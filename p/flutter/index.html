<!doctype html><html lang=zh-cn dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="安装 安装 JDK 下载地址 安装配置Android Studio 下载地址 flutter(windows) flutter安装 set PUB_HOSTED_URL=&amp;#34;https://mirrors.tuna.tsinghua.edu.cn/dart-pub&amp;#34; #配置国内镜像 set FLUTTER_STORAGE_BASE_URL=&amp;#34;https://mirrors.tuna.tsinghua.edu.cn/flutter&amp;#34; 配置环境变量path Dart: 无需配置，flutter现"><title>flutter基础备忘录</title><link rel=canonical href=https://xiaoxiano.github.io/p/flutter/><link rel=stylesheet href=/scss/style.min.d41860860756ab9c450238ff299dc8627d464cd484019706d7090e378ee95bf0.css><meta property="og:title" content="flutter基础备忘录"><meta property="og:description" content="安装 安装 JDK 下载地址 安装配置Android Studio 下载地址 flutter(windows) flutter安装 set PUB_HOSTED_URL=&amp;#34;https://mirrors.tuna.tsinghua.edu.cn/dart-pub&amp;#34; #配置国内镜像 set FLUTTER_STORAGE_BASE_URL=&amp;#34;https://mirrors.tuna.tsinghua.edu.cn/flutter&amp;#34; 配置环境变量path Dart: 无需配置，flutter现"><meta property="og:url" content="https://xiaoxiano.github.io/p/flutter/"><meta property="og:site_name" content="Janus"><meta property="og:type" content="article"><meta property="article:section" content="Post"><meta property="article:published_time" content="2022-04-30T00:00:00+00:00"><meta property="article:modified_time" content="2021-04-30T00:00:00+00:00"><meta name=twitter:title content="flutter基础备忘录"><meta name=twitter:description content="安装 安装 JDK 下载地址 安装配置Android Studio 下载地址 flutter(windows) flutter安装 set PUB_HOSTED_URL=&amp;#34;https://mirrors.tuna.tsinghua.edu.cn/dart-pub&amp;#34; #配置国内镜像 set FLUTTER_STORAGE_BASE_URL=&amp;#34;https://mirrors.tuna.tsinghua.edu.cn/flutter&amp;#34; 配置环境变量path Dart: 无需配置，flutter现"><link rel=icon type=image/svg+xml href=/favicon.svg><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#00aba9"><meta name=msapplication-TileImage content="/mstile-144x144.png"><meta name=theme-color content="#ffffff"><meta name=apple-mobile-web-app-title content="rmdhnreza.my.id - Blog Tutorial For Linux & Windows"><meta name=application-name content="rmdhnreza.my.id - Blog Tutorial For Linux & Windows"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","name":"flutter基础备忘录","headline":"flutter基础备忘录","description":"安装 安装 JDK 下载地址 安装配置Android Studio 下载地址 flutter(windows) flutter安装 set PUB_HOSTED_URL=\u0026#34;https:\/\/mirrors.tuna.tsinghua.edu.cn\/dart-pub\u0026#34; #配置国内镜像 set FLUTTER_STORAGE_BASE_URL=\u0026#34;https:\/\/mirrors.tuna.tsinghua.edu.cn\/flutter\u0026#34; 配置环境变量path Dart: 无需配置，flutter现","inLanguage":"id-ID","isFamilyFriendly":"true","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/xiaoxiano.github.io\/p\/flutter\/"},"author":{"@type":"Person","name":"rmdhnreza","url":"https://github.com/rmdhnreza"},"creator":{"@type":"Person","name":"rmdhnreza"},"accountablePerson":{"@type":"Person","name":"rmdhnreza"},"copyrightHolder":"Janus","copyrightYear":"2022","datePublished":"2022-04-30T00:00:00+00:00","dateModified":"2021-04-30T00:00:00+00:00","publisher":{"@type":"Organization","name":"Janus","url":"https://xiaoxiano.github.io","logo":{"@type":"ImageObject","url":"https:\/\/xiaoxiano.github.io/favicon-96x96.png","width":"112","height":"112"}},"image":"https://xiaoxiano.github.io","url":"https:\/\/xiaoxiano.github.io\/p\/flutter\/","wordCount":"9698","tag":[],"keywords":[],"articleSection":["computer"]}</script></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=切换菜单>
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_hu45d9d6b92b0e2c7b760024d72fbde663_30609_300x0_resize_box_3.png width=300 height=263 class=site-logo loading=lazy alt=Avatar></a></figure><div class=site-meta><h1 class=site-name><a href=/>Janus</a></h1><h2 class=site-description>个人杂记</h2></div></header><ul class=menu id=main-menu><li><a href=/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home-2" width="44" height="44" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round" style="stroke-width:2.5px"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><rect x="10" y="12" width="4" height="4"/></svg>首页</a></li><li><a href=/search/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="44" height="44" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round" style="stroke-width:2.5px"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>搜索</a></li><li><a href=/archives/><svg role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" style="fill:currentColor"><title>GitBook icon</title><path d="M10.802 17.77a.703.703.0 11-.002 1.406.703.703.0 01.002-1.406m11.024-4.347a.703.703.0 11.001-1.406.703.703.0 01-.001 1.406m0-2.876a2.176 2.176.0 00-2.174 2.174c0 .233.039.465.115.691l-7.181 3.823a2.165 2.165.0 00-1.784-.937c-.829.0-1.584.475-1.95 1.216l-6.451-3.402c-.682-.358-1.192-1.48-1.138-2.502.028-.533.212-.947.493-1.107.178-.1.392-.092.62.027l.042.023c1.71.9 7.304 3.847 7.54 3.956.363.169.565.237 1.185-.057l11.564-6.014c.17-.064.368-.227.368-.474.0-.342-.354-.477-.355-.477-.658-.315-1.669-.788-2.655-1.25-2.108-.987-4.497-2.105-5.546-2.655-.906-.474-1.635-.074-1.765.006l-.252.125C7.78 6.048 1.46 9.178 1.1 9.397.457 9.789.058 10.57.006 11.539c-.08 1.537.703 3.14 1.824 3.727l6.822 3.518a2.175 2.175.0 002.15 1.862 2.177 2.177.0 002.173-2.14l7.514-4.073c.38.298.853.461 1.337.461A2.176 2.176.0 0024 12.72a2.176 2.176.0 00-2.174-2.174"/></svg>档案</a></li><li><a href=/%E5%85%B3%E4%BA%8E/><svg xmlns="http://www.w3.org/2000/svg" fill="currentcolor" width="24" height="24" xmlns:v="https://vecta.io/nano"><path d="M12 5.9a2.1 2.1.0 110 4.2 2.1 2.1.0 110-4.2m0 9c2.97.0 6.1 1.46 6.1 2.1v1.1H5.9V17c0-.64 3.13-2.1 6.1-2.1M12 4a4 4 0 100 8 4 4 0 100-8zm0 9c-2.67.0-8 1.34-8 4v3h16v-3c0-2.66-5.33-4-8-4z"/></svg>关于</a></li><li id=dark-mode-toggle><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><span>暗色模式</span></li><li class=menu-bottom-section></li></ul></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">目录</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#安装>安装</a></li><li><a href=#更新>更新</a></li><li><a href=#创建-flutter-项目>创建 Flutter 项目</a></li><li><a href=#故障排除>故障排除</a><ol><li><a href=#配置>配置</a></li><li><a href=#运行项目报错>运行项目报错</a></li></ol></li><li><a href=#dart>dart</a><ol><li><a href=#变量>变量</a></li><li><a href=#常量>常量</a></li><li><a href=#类型>类型</a><ol><li><a href=#不常用类型>不常用类型</a></li><li><a href=#几乎不用的类型>几乎不用的类型</a></li><li><a href=#类型转换>类型转换</a></li></ol></li><li><a href=#函数>函数</a><ol><li><a href=#参数>参数</a></li></ol></li><li><a href=#运算符>运算符</a></li><li><a href=#类>类</a><ol><li><a href=#方法>方法</a><ol><li><a href=#实例变量和方法>实例变量和方法</a></li><li><a href=#静态变量和方法>静态变量和方法</a></li><li><a href=#get-和-set>get 和 set</a></li><li><a href=#抽象类抽象方法>抽象类、抽象方法</a></li></ol></li><li><a href=#构造函数>构造函数</a></li><li><a href=#回调函数>回调函数</a></li><li><a href=#扩展>扩展</a><ol><li><a href=#扩展类>扩展类</a></li><li><a href=#super>super</a></li><li><a href=#扩展方法>扩展方法</a></li></ol></li></ol></li><li><a href=#泛型>泛型</a></li><li><a href=#异步>异步</a></li></ol></li><li><a href=#flutter>flutter</a><ol><li><a href=#widget生命周期>Widget生命周期</a></li><li><a href=#getx>Getx</a><ol><li><a href=#状态管理>状态管理</a><ol><li><a href=#介绍>介绍</a></li><li><a href=#controller>Controller</a></li><li><a href=#反应状态管理>反应状态管理</a></li><li><a href=#简单状态管理>简单状态管理</a></li><li><a href=#workers>Workers</a></li></ol></li><li><a href=#路由管理>路由管理</a><ol><li><a href=#普通路由>普通路由</a></li><li><a href=#别名路由>别名路由</a></li></ol></li><li><a href=#依赖注入>依赖注入</a></li><li><a href=#其他高级-api>其他高级 API</a></li></ol></li><li><a href=#dio>dio</a><ol><li><a href=#原理>原理</a></li></ol></li><li><a href=#webview>WebView</a></li><li><a href=#widgetbook>Widgetbook</a><ol><li><a href=#windows配置>Windows配置</a></li><li><a href=#使用>使用</a></li></ol></li><li><a href=#ai画图>AI画图</a></li><li><a href=#动画>动画</a></li><li><a href=#其他>其他</a></li></ol></li></ol></nav></div></section></aside><main class="main full-width"><article class=main-article><header class=article-header><div class=article-details><header class=article-category><a href=/categories/computer/>计算机</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/p/flutter/>flutter基础备忘录</a></h2></div><footer class=article-time><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg><time class=article-time--published>2022-04-30</time></div></footer></div></header><section class=article-content><h1 id=安装>安装</h1><ol><li>安装 JDK</li></ol><p><a class=link href=https://www.oracle.com/java/technologies/downloads/#java8-windows target=_blank rel=noopener>下载地址</a></p><ol start=2><li>安装配置Android Studio</li></ol><p><a class=link href="https://docs.flutter.dev/release/archive?tab=windows#windows" target=_blank rel=noopener>下载地址</a></p><ol start=3><li>flutter(windows)
<a class=link href=https://docs.flutter.dev/get-started/install/windows target=_blank rel=noopener>flutter安装</a></li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>set PUB_HOSTED_URL=&#34;https://mirrors.tuna.tsinghua.edu.cn/dart-pub&#34;   #配置国内镜像
</span></span><span class=line><span class=cl>set FLUTTER_STORAGE_BASE_URL=&#34;https://mirrors.tuna.tsinghua.edu.cn/flutter&#34;
</span></span></code></pre></div><ol start=4><li>配置环境变量path</li></ol><p>Dart: 无需配置，flutter现在自带dart。</p><p>Flutter: C:\flutter\bin</p><p>Java: C:\Program Files\Java\jdk1.8.0_281\bin</p><p>Android SDK Tools:C:\Users{username}\AppData\Local\Android\sdk\tools</p><p>Android SDK Platform-Tools:C:\Users{username}\AppData\Local\Android\sdk\platform-tools</p><h1 id=更新>更新</h1><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>flutter upgrade
</span></span><span class=line><span class=cl>flutter doctor
</span></span></code></pre></div><h1 id=创建-flutter-项目>创建 Flutter 项目</h1><p><img src=/p/flutter/1.jpg width=1317 height=897 srcset="/p/flutter/1_huff754efb2c95fdbde3860fe3076e21cb_150899_480x0_resize_q75_box.jpg 480w, /p/flutter/1_huff754efb2c95fdbde3860fe3076e21cb_150899_1024x0_resize_q75_box.jpg 1024w" loading=lazy class=gallery-image data-flex-grow=146 data-flex-basis=352px></p><p><img src=/p/flutter/2.jpg width=1279 height=903 srcset="/p/flutter/2_hucf4eac703c21ad8fecf4d8297c8a4909_91996_480x0_resize_q75_box.jpg 480w, /p/flutter/2_hucf4eac703c21ad8fecf4d8297c8a4909_91996_1024x0_resize_q75_box.jpg 1024w" loading=lazy class=gallery-image data-flex-grow=141 data-flex-basis=339px></p><p><img src=/p/flutter/3.jpg width=1234 height=897 srcset="/p/flutter/3_huf5771a4378f496e08370a30e6aea2a57_268237_480x0_resize_q75_box.jpg 480w, /p/flutter/3_huf5771a4378f496e08370a30e6aea2a57_268237_1024x0_resize_q75_box.jpg 1024w" loading=lazy class=gallery-image data-flex-grow=137 data-flex-basis=330px></p><p><img src=/p/flutter/4.jpg width=1738 height=975 srcset="/p/flutter/4_hu749a3588d7f75328d4ce8cfeb04f0fea_609718_480x0_resize_q75_box.jpg 480w, /p/flutter/4_hu749a3588d7f75328d4ce8cfeb04f0fea_609718_1024x0_resize_q75_box.jpg 1024w" loading=lazy class=gallery-image data-flex-grow=178 data-flex-basis=427px></p><h1 id=故障排除>故障排除</h1><h2 id=配置>配置</h2><ul><li>配置build.gradle(project:android)</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>allprojects {
</span></span><span class=line><span class=cl>    repositories {
</span></span><span class=line><span class=cl>        google()
</span></span><span class=line><span class=cl>        jcenter()
</span></span><span class=line><span class=cl>        maven { url &#34;https://storage.googleapis.com/download.flutter.io&#34; }
</span></span><span class=line><span class=cl>    }
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><h2 id=运行项目报错>运行项目报错</h2><ul><li>更新flutter</li><li>更新Android Studio</li><li>重新建项目</li><li>\android\app\build.gradle</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>compileSdkVersion 33
</span></span><span class=line><span class=cl>minSdkVersion 21
</span></span></code></pre></div><ul><li>\android\app\src\main\AndroidManifest.xml</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>manifest</span> <span class=na>xmlns:android</span><span class=o>=</span><span class=s>&#34;http://schemas.android.com/apk/res/android&#34;</span>
</span></span><span class=line><span class=cl>    <span class=na>xmlns:tools</span><span class=o>=</span><span class=s>&#34;http://schemas.android.com/tools&#34;</span>  <span class=err>//</span> <span class=err>添加此行</span>
</span></span><span class=line><span class=cl>    <span class=na>package</span><span class=o>=</span><span class=s>&#34;com.example.flutter_ocr2&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>   <span class=p>&lt;</span><span class=nt>application</span>
</span></span><span class=line><span class=cl>        <span class=na>tools:replace</span><span class=o>=</span><span class=s>&#34;android:label&#34;</span>              <span class=err>//</span> <span class=err>添加此行</span>
</span></span><span class=line><span class=cl>        <span class=na>android:label</span><span class=o>=</span><span class=s>&#34;flutter_ocr2&#34;</span>
</span></span><span class=line><span class=cl>        <span class=na>android:name</span><span class=o>=</span><span class=s>&#34;${applicationName}&#34;</span>
</span></span><span class=line><span class=cl>        <span class=na>android:icon</span><span class=o>=</span><span class=s>&#34;@mipmap/ic_launcher&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>activity</span>
</span></span></code></pre></div><h1 id=dart>dart</h1><h2 id=变量>变量</h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl># 创建一个变量并将其初始化
</span></span><span class=line><span class=cl>var name = &#39;Bob&#39;;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl># 指定类型
</span></span><span class=line><span class=cl>String name = &#39;Bob&#39;;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl># 如果对象(name)不局限于单一的类型(String),可以将其指定为 Object（或 dynamic）类型
</span></span><span class=line><span class=cl>Object name = &#39;Bob&#39;;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>? 可空类型
</span></span><span class=line><span class=cl>int? a=123;   // int? 表示a是一个可空类型
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>! 类型断言
</span></span><span class=line><span class=cl>a!    // a不为空
</span></span></code></pre></div><h2 id=常量>常量</h2><ul><li>final 和 const</li></ul><p>final在被使用到的时候才会进行初始化, 如果只是被定义, 而没有被使用到, 那么这个变量一直没有被初始化 (&lsquo;懒加载&rsquo;); 而const修饰的变量, 一经定义就会在编译期间对其进行初始化</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>final name = &#39;Bob&#39;; // Without a type annotation
</span></span><span class=line><span class=cl>final String nickname = &#39;Bobby&#39;;
</span></span></code></pre></div><h2 id=类型>类型</h2><ul><li>内置类型</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>int    整数值
</span></span><span class=line><span class=cl>double 浮点数字
</span></span><span class=line><span class=cl>String 字符串
</span></span><span class=line><span class=cl>bool   布尔类型
</span></span><span class=line><span class=cl>List   集合类型
</span></span><span class=line><span class=cl>Map    字典型
</span></span></code></pre></div><h3 id=不常用类型>不常用类型</h3><ul><li><p><a class=link href=https://dart.dev/guides/language/language-tour#enumerated-types target=_blank rel=noopener>enum</a>　　枚举类型,用于表示固定数量的常量值。在switch语句中运行良好。</p></li><li><p>Object　对象类型，允许任何类型。</p></li><li><p><a class=link href=https://dart.dev/guides/language/effective-dart/design#avoid-using-dynamic-unless-you-want-to-disable-static-checking target=_blank rel=noopener>dynamic</a>　动态类型，不仅接受所有对象，而且还允许所有操作</p></li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>void main() {
</span></span><span class=line><span class=cl>  dynamic foo=&#34;bar&#34;;
</span></span><span class=line><span class=cl>  print(foo); 
</span></span><span class=line><span class=cl>  foo=123;
</span></span><span class=line><span class=cl>  print(foo);
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><ul><li>Set　无序集合，主要的功能就是去除数组重复内容</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>void main(){
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  List myList=[&#39;香蕉&#39;,&#39;苹果&#39;,&#39;西瓜&#39;,&#39;香蕉&#39;,&#39;苹果&#39;,&#39;香蕉&#39;,&#39;苹果&#39;];
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  var s=new Set();
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  s.addAll(myList);
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  print(s);
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  print(s.toList());
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><h3 id=几乎不用的类型>几乎不用的类型</h3><ul><li><p>runes 暴露了字符串的 Unicode 代码点（Unicode 为每个字母、数字和符号定义了一个唯一的数值）。例如，用于表情符号，(😆) 是<code>\u{1f606}</code>。</p></li><li><p>Symbol 表示标识符，例如<code>#</code>。</p></li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>void main() {
</span></span><span class=line><span class=cl>  assert(Symbol(&#39;bar&#39;)==#bar);
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>// true
</span></span></code></pre></div><h3 id=类型转换>类型转换</h3><ul><li>String -> int</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>myint = int.parse(myString);
</span></span></code></pre></div><ul><li>String -> double</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>mydouble = double.parse(myString);
</span></span></code></pre></div><ul><li>int -> String</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>myString = myint.toString();
</span></span></code></pre></div><ul><li>double -> String</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>myString = 3.14159.toStringAsFixed(2);
</span></span><span class=line><span class=cl>// myString = &#39;3.14&#39;
</span></span></code></pre></div><ul><li>将 list <a class=link href=https://dart.dev/codelabs/iterables#mapping target=_blank rel=noopener>映射</a>为 widget List</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>MyList.map((item) =&gt; SomeWidget(item)).toList();
</span></span></code></pre></div><h2 id=函数>函数</h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>bool isNoble(int atomicNumber) {                 // bool:返回类型
</span></span><span class=line><span class=cl>  return _nobleGases[atomicNumber] != null;
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><ul><li><p>箭头函数 =></p><p><code>=> expr</code> 是 <code>{ return expr; }</code>的简写</p></li></ul><h3 id=参数>参数</h3><ul><li>命名参数（可传可不传）</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>  String printUserInfo(String username, {int age = 0, String sex = &#39;男&#39;}) {//行参，用大括号    
</span></span><span class=line><span class=cl>    if (age != 0) {
</span></span><span class=line><span class=cl>      return &#34;姓名:$username---性别:$sex--年龄:$age&#34;;
</span></span><span class=line><span class=cl>    }
</span></span><span class=line><span class=cl>    return &#34;姓名:$username---性别:$sex--年龄保密&#34;;
</span></span><span class=line><span class=cl>  }
</span></span><span class=line><span class=cl>  print(printUserInfo(&#39;张三&#39;));                         //实参 
</span></span><span class=line><span class=cl>  print(printUserInfo(&#39;张三&#39;, age: 20, sex: &#39;未知&#39;));   //实参,命名参数的实参必须传入参数名age: sex: 
</span></span></code></pre></div><ul><li>位置参数（可传可不传）</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>  String printUserInfo(String username,[String sex=&#39;男&#39;,int age=0]){  //行参，用中括号
</span></span><span class=line><span class=cl>    if(age!=0){
</span></span><span class=line><span class=cl>      return &#34;姓名:$username---性别:$sex--年龄:$age&#34;;
</span></span><span class=line><span class=cl>    }
</span></span><span class=line><span class=cl>    return &#34;姓名:$username---性别:$sex--年龄保密&#34;;
</span></span><span class=line><span class=cl>  }
</span></span><span class=line><span class=cl>  print(printUserInfo(&#39;张三&#39;));           //实参
</span></span><span class=line><span class=cl>  print(printUserInfo(&#39;小李&#39;,&#39;女&#39;,30));   //实参
</span></span></code></pre></div><h2 id=运算符>运算符</h2><ul><li><p>算术运算符</p><p><code>+</code>(加)　　<code>–</code>(减)　　<code>-</code>(负)　　<code>*</code>(乘)　　<code>/</code>(除)　　<code>~/</code>(取整)　　<code>%</code>（取余）</p></li><li><p>关系运算符</p><p><code>==</code>　　<code>！=</code>　　<code>></code>　　<code>&lt;</code>　　<code>>=</code>　　<code>&lt;=</code></p></li><li><p>逻辑运算符</p><p><code>!</code>(取反)　　<code>&&</code>(与)　　<code>||</code>(或)</p></li><li><p>赋值运算符</p><p>基础赋值运算符　　<code>=</code>　　<code>??=</code>(为 null 的变量赋值)</p><p>复合赋值运算符　　<code>+=</code>　　<code>-=</code>　　<code>*=</code>　　<code>/=</code>　　<code>%=</code>　　<code>~/=</code></p></li><li><p>其他运算符
<code>()</code>　　使用一个方法</p><p><code>[]</code>　　访问 List</p><p><code>?[]</code>　　访问 List,左侧/?表示可以为null</p><p><code>.</code>　　访问成员</p><p><code>?.</code>　　访问成员,左侧/?表示可以为null</p><p><code>..</code> 级联，可以在同一个对象上访问实例成员和调用多个实例方法</p></li><li><p>if-else的表达式：</p><ul><li>condition <code>?</code> expr1 <code>:</code> expr2</li></ul><p>如果条件为真，则计算expr1（并返回其值）；否则，计算并返回expr2的值。</p><ul><li>expr1 <code>??</code> expr2</li></ul><p>如果expr1不为 null，则返回其值；否则，计算并返回expr2的值。</p></li></ul><h2 id=类>类</h2><h3 id=方法>方法</h3><h4 id=实例变量和方法>实例变量和方法</h4><p>实例变量:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>class Point {
</span></span><span class=line><span class=cl>  double? x; // Declare instance variable x, initially null.
</span></span><span class=line><span class=cl>  double? y; // Declare y, initially null.
</span></span><span class=line><span class=cl>  double z = 0; // Declare z, initially 0.
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><p>实例方法可以访问实例变量和 this</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>import &#39;dart:math&#39;;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>class Point {
</span></span><span class=line><span class=cl>  final double x;
</span></span><span class=line><span class=cl>  final double y;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  Point(this.x, this.y);
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  double distanceTo(Point other) {
</span></span><span class=line><span class=cl>    var dx = x - other.x;
</span></span><span class=line><span class=cl>    var dy = y - other.y;
</span></span><span class=line><span class=cl>    return sqrt(dx * dx + dy * dy);
</span></span><span class=line><span class=cl>  }
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><h4 id=静态变量和方法>静态变量和方法</h4><p>使用关键字 static 可以声明类变量或类方法。静态成员可以通过类名称直接访问（不需要实例化），提高性能。静态方法不能访问非静态成员，非静态方法可以访问静态成员，不能使用this关键字。</p><h4 id=get-和-set>get 和 set</h4><ul><li>特殊方法:实例对象的每一个属性都有一个隐式的 Getter 方法，非 final 属性还会有一个 Setter 方法。</li><li>通过get和set修饰的方法不带小括号，可以使访问方法像访问属性一样，简便我们的使用。访问</li><li>set：传入属性，get：访问属性。</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>class Rectangle {
</span></span><span class=line><span class=cl>  double left, top, width, height;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  Rectangle(this.left, this.top, this.width, this.height);
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  // Define two calculated properties: right and bottom.
</span></span><span class=line><span class=cl>  double get right =&gt; left + width;
</span></span><span class=line><span class=cl>  set right(double value) =&gt; left = value - width;
</span></span><span class=line><span class=cl>  double get bottom =&gt; top + height;
</span></span><span class=line><span class=cl>  set bottom(double value) =&gt; top = value - height;
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><h4 id=抽象类抽象方法>抽象类、抽象方法</h4><p>抽象类常用于定义接口，抽象类常常会包含抽象方法</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>abstract class Doer {
</span></span><span class=line><span class=cl>  // Define instance variables and methods...
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  void doSomething(); // Define an abstract method.
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>class EffectiveDoer extends Doer {
</span></span><span class=line><span class=cl>  void doSomething() {
</span></span><span class=line><span class=cl>    // Provide an implementation, so the method is not abstract here...
</span></span><span class=line><span class=cl>  }
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><h3 id=构造函数>构造函数</h3><link href="https://fonts.googleapis.com/css?family=monoton" rel=stylesheet type=text/css><div style=font-family:monoton;font-size:20px;font-style:normal;font-weight:700;color:blue>特点：</div><ul><li><p>实例化类时会被自动触发</p></li><li><p>一般用于初始化操作</p></li><li><p>没有返回值</p></li></ul><link href="https://fonts.googleapis.com/css?family=monoton" rel=stylesheet type=text/css><div style=font-family:monoton;font-size:20px;font-style:normal;font-weight:700;color:blue>普通构造函数</div><p>构造函数方法名和类名相同</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>class Point {
</span></span><span class=line><span class=cl>  num x, y;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  Point(num x, num y) {
</span></span><span class=line><span class=cl>    // There&#39;s a better way to do this, stay tuned.
</span></span><span class=line><span class=cl>    this.x = x;
</span></span><span class=line><span class=cl>    this.y = y;
</span></span><span class=line><span class=cl>  }
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><p>简化形式：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>class Point {
</span></span><span class=line><span class=cl>  num x, y;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  // Syntactic sugar for setting x and y
</span></span><span class=line><span class=cl>  // before the constructor body runs.
</span></span><span class=line><span class=cl>  Point(this.x, this.y);
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><link href="https://fonts.googleapis.com/css?family=monoton" rel=stylesheet type=text/css><div style=font-family:monoton;font-size:20px;font-style:normal;font-weight:700;color:blue>命名构造函数</div><p>命名构造函数(类名.函数名)可以实现多个构造器。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>class Point {
</span></span><span class=line><span class=cl>  num x, y;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  Point(this.x, this.y);
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  // 命名构造函数
</span></span><span class=line><span class=cl>  Point.origin() {
</span></span><span class=line><span class=cl>    x = 0;
</span></span><span class=line><span class=cl>    y = 0;
</span></span><span class=line><span class=cl>  }
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><p>请记住，命名构造函数不可继承，如果子类想要有 和父类一样的命名构造函数，那就写个同名的（通常也会在子类的命名构造函数里，调用父类的同名命名构造函数）</p><link href="https://fonts.googleapis.com/css?family=monoton" rel=stylesheet type=text/css><div style=font-family:monoton;font-size:20px;font-style:normal;font-weight:700;color:blue>调用父类构造函数</div><p>如果你的类，继承于父类，那么子类的构造函数，势必要调用父类的构造函数，这时候就要分两种情况：</p><ul><li>Dart语言帮你调用父类的无参数构造函数</li><li>代码中显式调用父类的构造函数</li></ul><ol><li>默认调用调用父类的无参数构造函数</li></ol><p>如果你没有显式调用父类的构造函数，并且父类有一个无参数构造函数，那么Dart就会帮你在子类的构造函数方法体的最前面，调用父类的无参数构造函数。当然，后面我们会说道，构造函数分成好几部分来初始化成员变量，调用的顺序如下：</p><ul><li>初始化列表</li><li>父类的无参数构造函数</li><li>子类的无参数构造函数</li></ul><p>当然，如果父类没有无参数构造函数，或者Dart这种隐式调用无法满足你的要求，那就需要显式调用父类的构造函数了</p><ol start=2><li>显式调用父类构造函数</li></ol><p>显式调用父类构造函数，应该在初始化列表中完成</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>class Person {
</span></span><span class=line><span class=cl>  String firstName;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  Person.fromJson(Map data) {
</span></span><span class=line><span class=cl>    print(&#39;in Person&#39;);
</span></span><span class=line><span class=cl>  }
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>class Employee extends Person {
</span></span><span class=line><span class=cl>  // Person does not have a default constructor;
</span></span><span class=line><span class=cl>  // you must call super.fromJson(data).
</span></span><span class=line><span class=cl>  Employee.fromJson(Map data) : super.fromJson(data) {
</span></span><span class=line><span class=cl>    print(&#39;in Employee&#39;);
</span></span><span class=line><span class=cl>  }
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>main() {
</span></span><span class=line><span class=cl>  var emp = new Employee.fromJson({});
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  // Prints:
</span></span><span class=line><span class=cl>  // in Person
</span></span><span class=line><span class=cl>  // in Employee
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><link href="https://fonts.googleapis.com/css?family=monoton" rel=stylesheet type=text/css><div style=font-family:monoton;font-size:20px;font-style:normal;font-weight:700;color:blue>初始化列表</div><p>在构造函数后加上<code>: x = , y =</code></p><ul><li><p>可以在构造函数中设置属性的默认值</p></li><li><p>在构造函数体执行之前执行</p></li><li><p>可以调用超类的构造函数</p></li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>// Initializer list sets instance variables before
</span></span><span class=line><span class=cl>// the constructor body runs.
</span></span><span class=line><span class=cl>Point.fromJson(Map<span class=p>&lt;</span><span class=nt>String</span><span class=err>,</span> <span class=na>num</span><span class=p>&gt;</span> json)
</span></span><span class=line><span class=cl>    : x = json[&#39;x&#39;],
</span></span><span class=line><span class=cl>      y = json[&#39;y&#39;] {
</span></span><span class=line><span class=cl>  print(&#39;In Point.fromJson(): ($x, $y)&#39;);
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><p>尤其是初始化那些final修饰的成员变量时，初始化列表很有用，因为在方法体中，不能给final修饰的成员变量赋值，因为<strong>在执行方法体的时候，final修饰的成员变量已经不能变了</strong>。这个地方很多人犯错。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>import &#39;dart:math&#39;;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>class Point {
</span></span><span class=line><span class=cl>  final num x;
</span></span><span class=line><span class=cl>  final num y;
</span></span><span class=line><span class=cl>  final num distanceFromOrigin;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  Point(x, y)
</span></span><span class=line><span class=cl>      : x = x,
</span></span><span class=line><span class=cl>        y = y,
</span></span><span class=line><span class=cl>        distanceFromOrigin = sqrt(x * x + y * y);
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>main() {
</span></span><span class=line><span class=cl>  var p = new Point(2, 3);
</span></span><span class=line><span class=cl>  print(p.distanceFromOrigin);
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><link href="https://fonts.googleapis.com/css?family=monoton" rel=stylesheet type=text/css><div style=font-family:monoton;font-size:20px;font-style:normal;font-weight:700;color:blue>重定向构造函数</div><p>定义构造函数的时候，除了一个普通构造函数，还可以有若干命名构造函数，这些构造函数之间，有时候会有一些相同的逻辑，如果分别书写在各个构造函数中，会有些多余，所以构造函数可以传递。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>class Point {
</span></span><span class=line><span class=cl>  num x, y;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  // The main constructor for this class.
</span></span><span class=line><span class=cl>  Point(this.x, this.y);
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  // Delegates to the main constructor.
</span></span><span class=line><span class=cl>  Point.alongXAxis(num x) : this(x, 0);
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><p>传递构造函数，没有方法体，会在初始化列表中，调用另一个构造函数。</p><link href="https://fonts.googleapis.com/css?family=monoton" rel=stylesheet type=text/css><div style=font-family:monoton;font-size:20px;font-style:normal;font-weight:700;color:blue>常量构造函数</div><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>class ImmutablePoint {
</span></span><span class=line><span class=cl>  static final ImmutablePoint origin =
</span></span><span class=line><span class=cl>      const ImmutablePoint(0, 0);
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  final num x, y;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  const ImmutablePoint(this.x, this.y);
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><p>如果你的类，创建的对象永远不会改变，你可以在编译期就创建这个常量实例，并且定义一个常量构造函数，并且确保所有的成员变量都是final的。</p><link href="https://fonts.googleapis.com/css?family=monoton" rel=stylesheet type=text/css><div style=font-family:monoton;font-size:20px;font-style:normal;font-weight:700;color:blue>工厂构造函数/单例模式</div><p>在构造函数前加上<code>factory</code></p><ul><li><p>只实例化一次，节省相同实例化带来的消耗</p></li><li><p>第一次调用命名构造函数进入工厂函数中实例化，后续调用就用缓存中现成的实例</p></li><li><p>工厂构造函数，没有权利访问this</p></li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>class Logger {
</span></span><span class=line><span class=cl>  final String name;
</span></span><span class=line><span class=cl>  bool mute = false;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  // _cache is library-private, thanks to
</span></span><span class=line><span class=cl>  // the _ in front of its name.
</span></span><span class=line><span class=cl>  static final Map<span class=p>&lt;</span><span class=nt>String</span><span class=err>,</span> <span class=na>Logger</span><span class=p>&gt;</span> _cache =
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>String</span><span class=err>,</span> <span class=na>Logger</span><span class=p>&gt;</span>{};
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  factory Logger(String name) {
</span></span><span class=line><span class=cl>    if (_cache.containsKey(name)) {
</span></span><span class=line><span class=cl>      return _cache[name];
</span></span><span class=line><span class=cl>    } else {
</span></span><span class=line><span class=cl>      final logger = Logger._internal(name);   # 调用构造函数
</span></span><span class=line><span class=cl>      _cache[name] = logger;
</span></span><span class=line><span class=cl>      return logger;
</span></span><span class=line><span class=cl>    }
</span></span><span class=line><span class=cl>  }
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  Logger._internal(this.name);    # 定义命名构造函数
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  void log(String msg) {
</span></span><span class=line><span class=cl>    if (!mute) print(msg);
</span></span><span class=line><span class=cl>  }
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>main() {
</span></span><span class=line><span class=cl>    var logger = Logger(&#39;UI&#39;);
</span></span><span class=line><span class=cl>    logger.log(&#39;Button clicked&#39;);
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><p>上例的意思是，类中又一个静态缓存<code>_cache</code>保存着一些Logger类实例，创建实例时，给工厂构造函数传递的name，如果在缓存中已经存在，就用缓存中现成的实例，如果没有，就新建一个实例，并且也放到缓存中。</p><p>如此，我们可以创建名字为UI / SYS / API 等的实例，然后在debug的时候，如果设置名字为UI的Logger实例的mute为true，就不会打印UI相关的log，而不影响其它两个名字的log。</p><h3 id=回调函数>回调函数</h3><p>回调函数本质上是把函数作为参数传递给小部件的函数，当按钮按下时调用此函数。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>import &#39;package:flutter/material.dart&#39;;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>void main() {
</span></span><span class=line><span class=cl>  runApp(const MyApp());
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>class MyApp extends StatefulWidget {
</span></span><span class=line><span class=cl>  const MyApp({Key? key}) : super(key: key);
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  @override
</span></span><span class=line><span class=cl>  State<span class=p>&lt;</span><span class=nt>MyApp</span><span class=p>&gt;</span> createState() =&gt; _MyAppState();
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>class _MyAppState extends State<span class=p>&lt;</span><span class=nt>MyApp</span><span class=p>&gt;</span> {
</span></span><span class=line><span class=cl>  String topic = &#34;Packages&#34;;
</span></span><span class=line><span class=cl>  callback(varTopic) {
</span></span><span class=line><span class=cl>    // setState:通知内部状态已更改从而重建UI
</span></span><span class=line><span class=cl>    setState(() {
</span></span><span class=line><span class=cl>      topic = varTopic;
</span></span><span class=line><span class=cl>    });
</span></span><span class=line><span class=cl>  }
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  @override
</span></span><span class=line><span class=cl>  Widget build(BuildContext context) {
</span></span><span class=line><span class=cl>    return MaterialApp(
</span></span><span class=line><span class=cl>      home: Scaffold(
</span></span><span class=line><span class=cl>        appBar: AppBar(
</span></span><span class=line><span class=cl>          title: const Text(&#34;Learning Flutter&#34;),
</span></span><span class=line><span class=cl>        ),
</span></span><span class=line><span class=cl>        body: Column(
</span></span><span class=line><span class=cl>          children: [
</span></span><span class=line><span class=cl>            Container(
</span></span><span class=line><span class=cl>              width: double.maxFinite,
</span></span><span class=line><span class=cl>              height: 70,
</span></span><span class=line><span class=cl>              margin: const EdgeInsets.only(
</span></span><span class=line><span class=cl>                  top: 50, left: 40, right: 40, bottom: 20),
</span></span><span class=line><span class=cl>              decoration: BoxDecoration(
</span></span><span class=line><span class=cl>                  color: Colors.lightBlue,
</span></span><span class=line><span class=cl>                  borderRadius: BorderRadius.circular(20)),
</span></span><span class=line><span class=cl>              child: Center(
</span></span><span class=line><span class=cl>                child: Text(
</span></span><span class=line><span class=cl>                  &#34;We are learning Flutter $topic&#34;,
</span></span><span class=line><span class=cl>                  style: const TextStyle(fontSize: 20, color: Colors.white),
</span></span><span class=line><span class=cl>                ),
</span></span><span class=line><span class=cl>              ),
</span></span><span class=line><span class=cl>            ),
</span></span><span class=line><span class=cl>            MyButtons(topic: &#34;Cubit&#34;, callbackFunction: callback),
</span></span><span class=line><span class=cl>            MyButtons(topic: &#34;BLoc&#34;, callbackFunction: callback),
</span></span><span class=line><span class=cl>            MyButtons(topic: &#34;GetX&#34;, callbackFunction: callback)
</span></span><span class=line><span class=cl>          ],
</span></span><span class=line><span class=cl>        ),
</span></span><span class=line><span class=cl>      ),
</span></span><span class=line><span class=cl>    );
</span></span><span class=line><span class=cl>  }
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>class MyButtons extends StatelessWidget {
</span></span><span class=line><span class=cl>  final String topic;
</span></span><span class=line><span class=cl>  final Function callbackFunction;
</span></span><span class=line><span class=cl>  const MyButtons(
</span></span><span class=line><span class=cl>      {Key? key, required this.topic, required this.callbackFunction})
</span></span><span class=line><span class=cl>      : super(key: key);
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  @override
</span></span><span class=line><span class=cl>  Widget build(BuildContext context) {
</span></span><span class=line><span class=cl>    return GestureDetector(
</span></span><span class=line><span class=cl>      onTap: () {
</span></span><span class=line><span class=cl>        callbackFunction(topic);
</span></span><span class=line><span class=cl>      },
</span></span><span class=line><span class=cl>      child: Container(
</span></span><span class=line><span class=cl>        width: double.maxFinite,
</span></span><span class=line><span class=cl>        height: 70,
</span></span><span class=line><span class=cl>        margin: const EdgeInsets.only(top: 20, left: 40, right: 40, bottom: 20),
</span></span><span class=line><span class=cl>        decoration: BoxDecoration(
</span></span><span class=line><span class=cl>            color: Colors.lightBlue, borderRadius: BorderRadius.circular(20)),
</span></span><span class=line><span class=cl>        child: Center(
</span></span><span class=line><span class=cl>          child: Text(
</span></span><span class=line><span class=cl>            topic,
</span></span><span class=line><span class=cl>            style: const TextStyle(fontSize: 20, color: Colors.white),
</span></span><span class=line><span class=cl>          ),
</span></span><span class=line><span class=cl>        ),
</span></span><span class=line><span class=cl>      ),
</span></span><span class=line><span class=cl>    );
</span></span><span class=line><span class=cl>  }
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><h3 id=扩展>扩展</h3><h4 id=扩展类>扩展类</h4><link href="https://fonts.googleapis.com/css?family=monoton" rel=stylesheet type=text/css><div style=font-family:monoton;font-size:20px;font-style:normal;font-weight:400;color:blue>extends</div><p>Extends是典型的OOP类继承。如果 a类 扩展了 b类，则 a类 可以使用或覆盖 b类 中实现的所有属性、变量、函数 。在 Dart 中，一个类只能扩展一个类。
<img src=/p/flutter/5.jpg width=1233 height=641 srcset="/p/flutter/5_hu572765b138c1f7437a19c6cea77cac10_136967_480x0_resize_q75_box.jpg 480w, /p/flutter/5_hu572765b138c1f7437a19c6cea77cac10_136967_1024x0_resize_q75_box.jpg 1024w" loading=lazy class=gallery-image data-flex-grow=192 data-flex-basis=461px></p><link href="https://fonts.googleapis.com/css?family=monoton" rel=stylesheet type=text/css><div style=font-family:monoton;font-size:20px;font-style:normal;font-weight:400;color:blue>implements</div><p>创建另一个类或接口的实现。当 a类 实现 b类 时，<strong>必须实现</strong> b类 中定义的所有功能(所有属性、变量、函数)。一个类可以实现多个接口。</p><link href="https://fonts.googleapis.com/css?family=monoton" rel=stylesheet type=text/css><div style=font-family:monoton;font-size:20px;font-style:normal;font-weight:400;color:blue>with</div><p>mixin使用with关键字，类似于继承，可以扩展多个类。mixins的类只能继承自Object，不能再继承其他类，且不能有构造函数。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl># extends只能扩展一个类，而mixin没有限制，可以一起使用
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>class Maestro extends Person with Musical, Aggressive, Demented {
</span></span><span class=line><span class=cl>  Maestro(String maestroName) {
</span></span><span class=line><span class=cl>    name = maestroName;
</span></span><span class=line><span class=cl>    canConduct = true;
</span></span><span class=line><span class=cl>  }
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><h4 id=super>super</h4><p><code>super</code>关键字用于调用父类的对象、方法、构造函数和子类中的属性。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>// 访问父类变量
</span></span><span class=line><span class=cl>super.variable_name; 
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>// 访问父类方法
</span></span><span class=line><span class=cl>super.method_name();
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>// 转发给超类的构造函数
</span></span><span class=line><span class=cl>const MyApp({Key? key}) : super(key: key);
</span></span></code></pre></div><h4 id=扩展方法>扩展方法</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>// 扩展 num，就可以使用 num.attribute 和 num.method 
</span></span><span class=line><span class=cl>extension FancyNum on num {
</span></span><span class=line><span class=cl>  num plus(num other) =&gt; this + other;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  num times(num other) =&gt; this * other;
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>print(5.plus(3)); // Equal to &#34;5 + 3&#34;.
</span></span><span class=line><span class=cl>print(5.times(8)); // Equal to &#34;5 * 8&#34;.
</span></span><span class=line><span class=cl>print(2.plus(1).times(3)); // Equal to &#34;(2 + 1) * 3&#34;.
</span></span></code></pre></div><h2 id=泛型>泛型</h2><p>泛型常用于需要要求类型安全的情况，可以减少代码重复。
<img src=/p/flutter/fanxing.jpg width=1122 height=449 srcset="/p/flutter/fanxing_hu6d02cad28d2736a6e42659b75fd941e7_62001_480x0_resize_q75_box.jpg 480w, /p/flutter/fanxing_hu6d02cad28d2736a6e42659b75fd941e7_62001_1024x0_resize_q75_box.jpg 1024w" loading=lazy class=gallery-image data-flex-grow=249 data-flex-basis=599px>
如果 T 是一个class，则表示传入该类型的参数。</p><p>@override 注解来表示你重写了一个成员
<img src=/p/flutter/override.jpg width=1173 height=659 srcset="/p/flutter/override_huf3ae0c28a53250be072483b49c760168_125842_480x0_resize_q75_box.jpg 480w, /p/flutter/override_huf3ae0c28a53250be072483b49c760168_125842_1024x0_resize_q75_box.jpg 1024w" loading=lazy class=gallery-image data-flex-grow=177 data-flex-basis=427px></p><h2 id=异步>异步</h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>// 示例：等待返回自己ip
</span></span><span class=line><span class=cl>import &#39;package:http/http.dart&#39;as http;
</span></span><span class=line><span class=cl>import &#39;dart:convert&#39;;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Future getIPAddress() async {
</span></span><span class=line><span class=cl>  final url =&#39;https://httpbin.org/ip&#39;;
</span></span><span class=line><span class=cl>  var response = await http.get(Uri.parse(url));
</span></span><span class=line><span class=cl>  String ip = json.decode(response.body)[&#39;origin&#39;];
</span></span><span class=line><span class=cl>  return ip;
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>void main() async {
</span></span><span class=line><span class=cl>  final ip = await getIPAddress();
</span></span><span class=line><span class=cl>  print(ip);
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><h1 id=flutter>flutter</h1><h2 id=widget生命周期>Widget生命周期</h2><p><strong>StatelessWidget生命周期源码图</strong>
<img src=/p/flutter/6.jpg width=1787 height=966 srcset="/p/flutter/6_hu9df739c1aeb15e1ce9f35dea789d6e83_349244_480x0_resize_q75_box.jpg 480w, /p/flutter/6_hu9df739c1aeb15e1ce9f35dea789d6e83_349244_1024x0_resize_q75_box.jpg 1024w" loading=lazy class=gallery-image data-flex-grow=184 data-flex-basis=443px></p><p>Flutter 中万物皆为Widget，<code>widget</code>类继承自<code>DiagnosticableTree</code>。</p><p><code>DiagnosticableTree</code>即“诊断树”，主要作用是提供调试信息。</p><p><code>Widget.createElement()</code> :创建一个Element实例，记为<code>element</code>。</p><p><code>Key</code>: [Key]是[Widget]、[Element]和[SemanticsNode]的标识符。Key可以保持组件之前的状态，比如在用户滑动时或者修改集合时，决定的条件在<code>canUpdate()</code>方法中。</p><p><code>canUpdate(...)</code>: <code>newWidget</code>与<code>oldWidget</code>的<code>runtimeType</code>和<code>key</code>同时相等时就会用<code>new widget</code>去更新<code>Element</code>对象的配置，否则就会创建新的<code>Element</code>。</p><p><code>createState()</code>:为每一个<code>StatefulElement</code>创建一个State实例。</p><p><code>element.mount()</code> :调用<code>createRenderObject</code>创建RenderObject，并使用<code>attachRenderObject</code>将RenderObject关联到Element上。</p><p>StatefulWidget更为复杂，使用Getx接管更好用，不再详解。</p><h2 id=getx>Getx</h2><h3 id=状态管理>状态管理</h3><h4 id=介绍>介绍</h4><div class=table-wrapper><table><tr><td>分类</td><td>状态管理器</td><td>消耗RAM</td><td>结论</td></tr><tr><td>简单的状态管理</td><td>GetBuilder</td><td>最少</td><td>性能最好，最常用</td></tr><tr><td rowspan=2>反应式状态管理</td><td>Obx</td><td>较少</td><td>反应式的基础层，较Getx简洁</td></tr><tr><td>GetX</td><td>较多</td><td>可以灵活使用的反应式，较Obx实用</td></tr><tr><td>混合态管理</td><td>MixinBuilder</td><td>最多</td><td>在GetBuilder中插入一个Obx，既可以响应式更新、也可以手动更新</td></tr></table></div><link href="https://fonts.googleapis.com/css?family=monoton" rel=stylesheet type=text/css><div style=font-family:monoton;font-size:20px;font-style:normal;font-weight:700;color:#000>使用场景：</div><p><strong>Obx</strong></p><ul><li>当我的控制器<strong>已经</strong>在其他地方注册</li><li>最少的代码/噪音</li><li>反应式小部件，自动刷新，不用<code>update()</code></li><li>监听<strong>多个</strong>GetXController的状态改变</li></ul><p><strong>GetX</strong></p><ul><li>当我的控制器<strong>尚未</strong>注册</li><li>我想非常明确/明显地使用哪个控制器</li><li>我需要<code>initState</code>在创建过程中进行一些调用</li><li>反应式小部件，自动刷新，不用<code>update()</code></li><li>只更新某个小组件的状态，只重建特定组件，性能更好</li></ul><p><strong>GetBuilder</strong></p><ul><li>我想手动决定何时重建小部件</li><li>我有几个状态变量，可以作为一个组一起刷新</li><li>需要update()手动刷新</li><li>更新几乎整个页面或几乎所有的变量，性能更好</li></ul><h4 id=controller>Controller</h4><p>Getx状态管理的代码结构都可以分为GetXController（控制器层）和view（界面层），GetXController 可以进一步分为state（状态层/变量层），logic（逻辑层）。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>└── sinup
</span></span><span class=line><span class=cl>    ├── controller.dart
</span></span><span class=line><span class=cl>    ├── view.dart
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>└── login
</span></span><span class=line><span class=cl>    ├── logic.dart
</span></span><span class=line><span class=cl>    ├── state.dart
</span></span><span class=line><span class=cl>    ├── view.dart    
</span></span></code></pre></div><p><link href="https://fonts.googleapis.com/css?family=monoton" rel=stylesheet type=text/css><div style=font-family:monoton;font-size:20px;font-style:normal;font-weight:700;color:#000>生命周期</div>在 StatefulWidget 中，使用<code>initState</code>或<code>dispose()</code>，而在 Controller 中我们可以使用相对应的操作：</p><ol><li><code>onStart</code>（开始）<strong>[不可覆盖]</strong>：组件在内存分配的时间点就会被调用，完成后会调用onInit方法</li><li><code>onInit</code>（初始化）：组件在内存分配后会被马上调用，适用于初始化 Controller（例如一些成员属性的初始化），详见Workers小节</li><li><code>onReady</code>（加载完成）：在 onInit 一帧后被调用，适合做一些导航进入的事件（例如对话框提示、SnackBar）或异步网络请求</li><li><code>onClose</code>（控制器被释放）：在 <code>onDelete</code> 方法前调用、用于销毁 <code>controller</code> 使用的资源（例如关闭事件监听，关闭流对象、动画）或者销毁可能造成内存泄露的对象（例如 <code>TextEditingController</code>，<code>AniamtionController</code>）。也适用于将数据进行离线持久化。</li><li><code>onDelete</code>（删除）<strong>[不可覆盖]</strong>：在 <code>controller</code>销毁前调用，将控制器从内存中删除</li></ol><h4 id=反应状态管理>反应状态管理</h4><h5 id=反应变量>反应变量</h5><p>使用反应状态管理需要声明反应变量，你有3种方法可以把一个变量变成是 &ldquo;可观察的&rdquo;。</p><p>1 - 第一种是使用 <strong><code>Rx{Type}</code></strong>。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>// 建议使用初始值，但不是强制性的
</span></span><span class=line><span class=cl>final name = RxString(&#39;&#39;);
</span></span><span class=line><span class=cl>final isLogged = RxBool(false);
</span></span><span class=line><span class=cl>final count = RxInt(0);
</span></span><span class=line><span class=cl>final balance = RxDouble(0.0);
</span></span><span class=line><span class=cl>final items = RxList&lt;String&gt;([]);
</span></span><span class=line><span class=cl>final myMap = RxMap&lt;String, int&gt;({});
</span></span></code></pre></div><p>2 - 第二种是使用 <strong><code>Rx</code></strong>，规定泛型 <code>Rx&lt;Type></code>。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>final name = Rx&lt;String&gt;(&#39;&#39;);
</span></span><span class=line><span class=cl>final isLogged = Rx&lt;Bool&gt;(false);
</span></span><span class=line><span class=cl>final count = Rx&lt;Int&gt;(0);
</span></span><span class=line><span class=cl>final balance = Rx&lt;Double&gt;(0.0);
</span></span><span class=line><span class=cl>final number = Rx&lt;Num&gt;(0)
</span></span><span class=line><span class=cl>final items = Rx&lt;List&lt;String&gt;&gt;([]);
</span></span><span class=line><span class=cl>final myMap = Rx&lt;Map&lt;String, int&gt;&gt;({});
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>// 自定义类 - 可以是任何类
</span></span><span class=line><span class=cl>final user = Rx&lt;User&gt;();
</span></span></code></pre></div><p>3 - 第三种更实用、更简单和<strong>首选的</strong>方法，只需添加 <strong><code>.obs</code></strong> 作为<code>value</code>的属性。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>final name = &#39;&#39;.obs;
</span></span><span class=line><span class=cl>final isLogged = false.obs;
</span></span><span class=line><span class=cl>final count = 0.obs;
</span></span><span class=line><span class=cl>final balance = 0.0.obs;
</span></span><span class=line><span class=cl>final number = 0.obs;
</span></span><span class=line><span class=cl>final items = &lt;String&gt;[].obs;
</span></span><span class=line><span class=cl>final myMap = &lt;String, int&gt;{}.obs;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>// 自定义类 - 可以是任何class, literally
</span></span><span class=line><span class=cl>final user = User().obs;
</span></span></code></pre></div><h5 id=使用value>使用value</h5><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>// controller
</span></span><span class=line><span class=cl>final count1 = 0.obs;
</span></span><span class=line><span class=cl>final count2 = 0.obs;
</span></span><span class=line><span class=cl>int get sum =&gt; count1.value + count2.value;   // 由于.obs把变量换成`Rx{Type}`类型，所以需要用.value取值
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>// 视图
</span></span><span class=line><span class=cl>GetX&lt;Controller&gt;(
</span></span><span class=line><span class=cl>  builder: (controller) {
</span></span><span class=line><span class=cl>    print(&#34;count 1 rebuild&#34;);
</span></span><span class=line><span class=cl>    return Text(&#39;${controller.count1.value}&#39;);
</span></span><span class=line><span class=cl>  },
</span></span><span class=line><span class=cl>),
</span></span><span class=line><span class=cl>GetX&lt;Controller&gt;(
</span></span><span class=line><span class=cl>  builder: (controller) {
</span></span><span class=line><span class=cl>    print(&#34;count 2 rebuild&#34;);
</span></span><span class=line><span class=cl>    return Text(&#39;${controller.count2.value}&#39;);
</span></span><span class=line><span class=cl>  },
</span></span><span class=line><span class=cl>),
</span></span><span class=line><span class=cl>GetX&lt;Controller&gt;(
</span></span><span class=line><span class=cl>  builder: (controller) {
</span></span><span class=line><span class=cl>    print(&#34;count 3 rebuild&#34;);
</span></span><span class=line><span class=cl>    return Text(&#39;${controller.sum}&#39;);
</span></span><span class=line><span class=cl>  },
</span></span><span class=line><span class=cl>),
</span></span></code></pre></div><h5 id=obx>Obx</h5><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>class StateObxView extends StatelessWidget {
</span></span><span class=line><span class=cl>  StateObxView({Key? key}) : super(key: key);
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  final count = 0.obs;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  @override
</span></span><span class=line><span class=cl>  Widget build(BuildContext context) {
</span></span><span class=line><span class=cl>    return Scaffold(
</span></span><span class=line><span class=cl>      appBar: AppBar(
</span></span><span class=line><span class=cl>        title: Text(&#34;Obx(...)&#34;),
</span></span><span class=line><span class=cl>      ),
</span></span><span class=line><span class=cl>      body: Center(
</span></span><span class=line><span class=cl>        child: Column(
</span></span><span class=line><span class=cl>          children: [
</span></span><span class=line><span class=cl>            Obx(() =&gt; Text(&#34;count1 -&gt; &#34; + count.toString())),
</span></span><span class=line><span class=cl>            Obx(() =&gt; Text(&#34;count2 -&gt; &#34; + count.toString())),
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            //
</span></span><span class=line><span class=cl>            Divider(),
</span></span><span class=line><span class=cl>            ElevatedButton(
</span></span><span class=line><span class=cl>              onPressed: () {
</span></span><span class=line><span class=cl>                count.value++;
</span></span><span class=line><span class=cl>              },
</span></span><span class=line><span class=cl>              child: Text(&#39;add&#39;),
</span></span><span class=line><span class=cl>            ),
</span></span><span class=line><span class=cl>          ],
</span></span><span class=line><span class=cl>        ),
</span></span><span class=line><span class=cl>      ),
</span></span><span class=line><span class=cl>    );
</span></span><span class=line><span class=cl>  }
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><h5 id=getx-1>GetX</h5><p>Controller</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>class CountController extends GetxController {
</span></span><span class=line><span class=cl>  final _count = 0.obs;
</span></span><span class=line><span class=cl>  set count(value) =&gt; this._count.value = value;
</span></span><span class=line><span class=cl>  get count =&gt; this._count.value;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  final _count2 = 0.obs;
</span></span><span class=line><span class=cl>  set count2(value) =&gt; this._count2.value = value;
</span></span><span class=line><span class=cl>  get count2 =&gt; this._count2.value;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  add() =&gt; _count.value++;
</span></span><span class=line><span class=cl>  add2() =&gt; _count2.value++;
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><p>View</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>class StateGetxView extends StatelessWidget {
</span></span><span class=line><span class=cl>  StateGetxView({Key? key}) : super(key: key);
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  final controller = CountController();
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  @override
</span></span><span class=line><span class=cl>  Widget build(BuildContext context) {
</span></span><span class=line><span class=cl>    return Scaffold(
</span></span><span class=line><span class=cl>      appBar: AppBar(
</span></span><span class=line><span class=cl>        title: Text(&#34;Getx&#34;),
</span></span><span class=line><span class=cl>      ),
</span></span><span class=line><span class=cl>      body: Center(
</span></span><span class=line><span class=cl>        child: Column(
</span></span><span class=line><span class=cl>          children: [
</span></span><span class=line><span class=cl>            GetX<span class=p>&lt;</span><span class=nt>CountController</span><span class=p>&gt;</span>(
</span></span><span class=line><span class=cl>              init: controller,
</span></span><span class=line><span class=cl>              initState: (_) {},
</span></span><span class=line><span class=cl>              builder: (_) {
</span></span><span class=line><span class=cl>                print(&#34;GetX - 1&#34;);
</span></span><span class=line><span class=cl>                return Text(&#39;value 1 -&gt; ${_.count}&#39;);
</span></span><span class=line><span class=cl>              },
</span></span><span class=line><span class=cl>            ),
</span></span><span class=line><span class=cl>            GetX<span class=p>&lt;</span><span class=nt>CountController</span><span class=p>&gt;</span>(
</span></span><span class=line><span class=cl>              init: controller,
</span></span><span class=line><span class=cl>              initState: (_) {},
</span></span><span class=line><span class=cl>              builder: (_) {
</span></span><span class=line><span class=cl>                print(&#34;GetX - 2&#34;);
</span></span><span class=line><span class=cl>                return Text(&#39;value 2 -&gt; ${_.count}&#39;);
</span></span><span class=line><span class=cl>              },
</span></span><span class=line><span class=cl>            ),
</span></span><span class=line><span class=cl>            Divider(),
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            //
</span></span><span class=line><span class=cl>            GetX<span class=p>&lt;</span><span class=nt>CountController</span><span class=p>&gt;</span>(
</span></span><span class=line><span class=cl>              init: controller,
</span></span><span class=line><span class=cl>              initState: (_) {},
</span></span><span class=line><span class=cl>              builder: (_) {
</span></span><span class=line><span class=cl>                print(&#34;GetX - 3&#34;);
</span></span><span class=line><span class=cl>                return Column(
</span></span><span class=line><span class=cl>                  children: [
</span></span><span class=line><span class=cl>                    Text(&#39;value 3 -&gt; ${_.count}&#39;),
</span></span><span class=line><span class=cl>                    ElevatedButton(
</span></span><span class=line><span class=cl>                      onPressed: () {
</span></span><span class=line><span class=cl>                        _.add();
</span></span><span class=line><span class=cl>                      },
</span></span><span class=line><span class=cl>                      child: Text(&#39;count1&#39;),
</span></span><span class=line><span class=cl>                    )
</span></span><span class=line><span class=cl>                  ],
</span></span><span class=line><span class=cl>                );
</span></span><span class=line><span class=cl>              },
</span></span><span class=line><span class=cl>            ),
</span></span><span class=line><span class=cl>            Divider(),
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            // count2
</span></span><span class=line><span class=cl>            GetX<span class=p>&lt;</span><span class=nt>CountController</span><span class=p>&gt;</span>(
</span></span><span class=line><span class=cl>              init: controller,
</span></span><span class=line><span class=cl>              initState: (_) {},
</span></span><span class=line><span class=cl>              builder: (_) {
</span></span><span class=line><span class=cl>                print(&#34;GetX - 4&#34;);
</span></span><span class=line><span class=cl>                return Text(&#39;value 4 -&gt; ${_.count2}&#39;);
</span></span><span class=line><span class=cl>              },
</span></span><span class=line><span class=cl>            ),
</span></span><span class=line><span class=cl>            Divider(),
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            // 按钮
</span></span><span class=line><span class=cl>            ElevatedButton(
</span></span><span class=line><span class=cl>              onPressed: () {
</span></span><span class=line><span class=cl>                controller.add();
</span></span><span class=line><span class=cl>              },
</span></span><span class=line><span class=cl>              child: Text(&#39;count1&#39;),
</span></span><span class=line><span class=cl>            ),
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            ElevatedButton(
</span></span><span class=line><span class=cl>              onPressed: () {
</span></span><span class=line><span class=cl>                controller.add2();
</span></span><span class=line><span class=cl>              },
</span></span><span class=line><span class=cl>              child: Text(&#39;count2&#39;),
</span></span><span class=line><span class=cl>            ),
</span></span><span class=line><span class=cl>          ],
</span></span><span class=line><span class=cl>        ),
</span></span><span class=line><span class=cl>      ),
</span></span><span class=line><span class=cl>    );
</span></span><span class=line><span class=cl>  }
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><h4 id=简单状态管理>简单状态管理</h4><h5 id=getbuilder>GetBuilder</h5><p>Controller同Getx</p><p>View</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>class StateGetBuilderView extends StatelessWidget {
</span></span><span class=line><span class=cl>  StateGetBuilderView({Key? key}) : super(key: key);
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  final controller = CountController();
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  @override
</span></span><span class=line><span class=cl>  Widget build(BuildContext context) {
</span></span><span class=line><span class=cl>    return Scaffold(
</span></span><span class=line><span class=cl>      appBar: AppBar(
</span></span><span class=line><span class=cl>        title: Text(&#34;GetBuilder&#34;),
</span></span><span class=line><span class=cl>      ),
</span></span><span class=line><span class=cl>      body: Center(
</span></span><span class=line><span class=cl>        child: Column(
</span></span><span class=line><span class=cl>          children: [
</span></span><span class=line><span class=cl>            GetBuilder<span class=p>&lt;</span><span class=nt>CountController</span><span class=p>&gt;</span>(
</span></span><span class=line><span class=cl>              init: controller,
</span></span><span class=line><span class=cl>              initState: (_) {},
</span></span><span class=line><span class=cl>              builder: (_) {
</span></span><span class=line><span class=cl>                print(&#34;GetBuilder - 1&#34;);
</span></span><span class=line><span class=cl>                return Text(&#39;value -&gt; ${_.count}&#39;);
</span></span><span class=line><span class=cl>              },
</span></span><span class=line><span class=cl>            ),
</span></span><span class=line><span class=cl>            GetBuilder<span class=p>&lt;</span><span class=nt>CountController</span><span class=p>&gt;</span>(
</span></span><span class=line><span class=cl>              init: controller,
</span></span><span class=line><span class=cl>              initState: (_) {},
</span></span><span class=line><span class=cl>              builder: (_) {
</span></span><span class=line><span class=cl>                print(&#34;GetBuilder - 2&#34;);
</span></span><span class=line><span class=cl>                return Text(&#39;value -&gt; ${_.count}&#39;);
</span></span><span class=line><span class=cl>              },
</span></span><span class=line><span class=cl>            ),
</span></span><span class=line><span class=cl>            Divider(),
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            //
</span></span><span class=line><span class=cl>            GetBuilder<span class=p>&lt;</span><span class=nt>CountController</span><span class=p>&gt;</span>(
</span></span><span class=line><span class=cl>              init: controller,
</span></span><span class=line><span class=cl>              initState: (_) {},
</span></span><span class=line><span class=cl>              builder: (_) {
</span></span><span class=line><span class=cl>                print(&#34;GetBuilder - 3&#34;);
</span></span><span class=line><span class=cl>                return Column(
</span></span><span class=line><span class=cl>                  children: [
</span></span><span class=line><span class=cl>                    Text(&#39;value -&gt; ${_.count}&#39;),
</span></span><span class=line><span class=cl>                    ElevatedButton(
</span></span><span class=line><span class=cl>                      onPressed: () {
</span></span><span class=line><span class=cl>                        _.add();
</span></span><span class=line><span class=cl>                      },
</span></span><span class=line><span class=cl>                      child: Text(&#39;GetBuilder -&gt; add&#39;),
</span></span><span class=line><span class=cl>                    )
</span></span><span class=line><span class=cl>                  ],
</span></span><span class=line><span class=cl>                );
</span></span><span class=line><span class=cl>              },
</span></span><span class=line><span class=cl>            ),
</span></span><span class=line><span class=cl>            Divider(),
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            // count2
</span></span><span class=line><span class=cl>            GetBuilder<span class=p>&lt;</span><span class=nt>CountController</span><span class=p>&gt;</span>(
</span></span><span class=line><span class=cl>              init: controller,
</span></span><span class=line><span class=cl>              initState: (_) {},
</span></span><span class=line><span class=cl>              builder: (_) {
</span></span><span class=line><span class=cl>                print(&#34;GetBuilder - 4&#34;);
</span></span><span class=line><span class=cl>                return Text(&#39;value count2 -&gt; ${_.count2}&#39;);
</span></span><span class=line><span class=cl>              },
</span></span><span class=line><span class=cl>            ),
</span></span><span class=line><span class=cl>            Divider(),
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            // id2 标记一个 `builder` ，触发方式`controller.update([&#34;id2&#34;]);` ，可传多个 `Array` 类型。
</span></span><span class=line><span class=cl>            GetBuilder<span class=p>&lt;</span><span class=nt>CountController</span><span class=p>&gt;</span>(
</span></span><span class=line><span class=cl>              id: &#34;id2&#34;,
</span></span><span class=line><span class=cl>              init: controller,
</span></span><span class=line><span class=cl>              initState: (_) {},
</span></span><span class=line><span class=cl>              builder: (_) {
</span></span><span class=line><span class=cl>                print(&#34;GetBuilder - 4&#34;);
</span></span><span class=line><span class=cl>                return Text(&#39;id2 -&gt; value count2 -&gt; ${_.count2}&#39;);
</span></span><span class=line><span class=cl>              },
</span></span><span class=line><span class=cl>            ),
</span></span><span class=line><span class=cl>            Divider(),
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            // 按钮
</span></span><span class=line><span class=cl>            ElevatedButton(
</span></span><span class=line><span class=cl>              onPressed: () {
</span></span><span class=line><span class=cl>                controller.add();
</span></span><span class=line><span class=cl>              },
</span></span><span class=line><span class=cl>              child: Text(&#39;add&#39;),
</span></span><span class=line><span class=cl>            ),
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            ElevatedButton(
</span></span><span class=line><span class=cl>              onPressed: () {
</span></span><span class=line><span class=cl>                controller.add2();
</span></span><span class=line><span class=cl>              },
</span></span><span class=line><span class=cl>              child: Text(&#39;add2&#39;),
</span></span><span class=line><span class=cl>            ),
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            ElevatedButton(
</span></span><span class=line><span class=cl>              onPressed: () {
</span></span><span class=line><span class=cl>                controller.update();
</span></span><span class=line><span class=cl>              },
</span></span><span class=line><span class=cl>              child: Text(&#39;controller.update()&#39;),
</span></span><span class=line><span class=cl>            ),
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            ElevatedButton(
</span></span><span class=line><span class=cl>              onPressed: () {
</span></span><span class=line><span class=cl>                controller.update([&#34;id2&#34;]);
</span></span><span class=line><span class=cl>              },
</span></span><span class=line><span class=cl>              child: Text(&#39;controller.update(id2)&#39;),
</span></span><span class=line><span class=cl>            ),
</span></span><span class=line><span class=cl>          ],
</span></span><span class=line><span class=cl>        ),
</span></span><span class=line><span class=cl>      ),
</span></span><span class=line><span class=cl>    );
</span></span><span class=line><span class=cl>  }
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><h4 id=workers>Workers</h4><p>Workers可以精确控制事件发生时触发回调，常用于Controller的onInit中：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>class CountController extends GetxController {
</span></span><span class=line><span class=cl>  final _count = 0.obs;
</span></span><span class=line><span class=cl>  set count(value) =&gt; this._count.value = value;
</span></span><span class=line><span class=cl>  get count =&gt; this._count.value;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  add() =&gt; _count.value++;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  @override
</span></span><span class=line><span class=cl>  void onInit() {
</span></span><span class=line><span class=cl>    super.onInit();
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    // 每次_count变化时调用
</span></span><span class=line><span class=cl>    ever(_count, (value) {
</span></span><span class=line><span class=cl>      print(&#34;ever -&gt; &#34; + value.toString());
</span></span><span class=line><span class=cl>    });
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    // 第一次被改变时才会被调用。
</span></span><span class=line><span class=cl>    once(_count, (value) {
</span></span><span class=line><span class=cl>      print(&#34;once -&gt; &#34; + value.toString());
</span></span><span class=line><span class=cl>    });
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    // 防DDos - 每当用户停止输入1秒时调用
</span></span><span class=line><span class=cl>    debounce(
</span></span><span class=line><span class=cl>      _count,
</span></span><span class=line><span class=cl>      (value) {
</span></span><span class=line><span class=cl>        print(&#34;debounce -&gt; &#34; + value.toString());
</span></span><span class=line><span class=cl>      },
</span></span><span class=line><span class=cl>      time: Duration(seconds: 1),
</span></span><span class=line><span class=cl>    );
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    // 忽略1秒内的所有变化。
</span></span><span class=line><span class=cl>    interval(
</span></span><span class=line><span class=cl>      _count,
</span></span><span class=line><span class=cl>      (value) {
</span></span><span class=line><span class=cl>        print(&#34;interval -&gt; &#34; + value.toString());
</span></span><span class=line><span class=cl>      },
</span></span><span class=line><span class=cl>      time: Duration(seconds: 1),
</span></span><span class=line><span class=cl>    );
</span></span><span class=line><span class=cl>  }
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><h3 id=路由管理>路由管理</h3><h4 id=普通路由>普通路由</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>// 导航到新的页面。
</span></span><span class=line><span class=cl>Get.to(NextScreen());
</span></span><span class=line><span class=cl>// 要导航到下一条路由，并在返回后立即接收或更新数据。
</span></span><span class=line><span class=cl>var data = await Get.to(Payment());
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>// 关闭SnackBars、Dialogs、BottomSheets或任何你通常会用Navigator.pop(context)关闭的东西。
</span></span><span class=line><span class=cl>Get.back();
</span></span><span class=line><span class=cl>// 在另一个页面上，发送前一个路由的数据。并使用它。
</span></span><span class=line><span class=cl>Get.back(result: &#39;success&#39;);
</span></span><span class=line><span class=cl>if(data == &#39;success&#39;) madeAnything();
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>// 进入下一个页面，但没有返回上一个页面的选项（用于SplashScreens，登录页面等）。
</span></span><span class=line><span class=cl>Get.off(NextScreen());
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>// 进入下一个界面并取消之前的所有路由（在购物车、投票和测试中很有用）。
</span></span><span class=line><span class=cl>Get.offAll(NextScreen());
</span></span></code></pre></div><h4 id=别名路由>别名路由</h4><p>普通路由管理起来比较麻烦,通常我们使用别名路由。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>// 导航到下一个页面
</span></span><span class=line><span class=cl>Get.toNamed(&#34;/NextScreen&#34;);
</span></span><span class=line><span class=cl>// 传递参数
</span></span><span class=line><span class=cl>Get.toNamed(&#34;/NextScreen&#34;, arguments: &#34;Hello&#34;);
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>// 浏览并删除前一个页面。
</span></span><span class=line><span class=cl>Get.offNamed(&#34;/NextScreen&#34;);
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>// 浏览并删除所有以前的页面。
</span></span><span class=line><span class=cl>Get.offAllNamed(&#34;/NextScreen&#34;);
</span></span><span class=line><span class=cl>// 动态URL
</span></span><span class=line><span class=cl>Get.offAllNamed(&#34;/NextScreen?device=phone<span class=ni>&amp;id=354&amp;name=Enzo&#34;);</span>
</span></span></code></pre></div><h3 id=依赖注入>依赖注入</h3><p><strong>Get.put()：</strong> 不使用控制器实例也会被创建</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>Get.put(CountController());
</span></span></code></pre></div><p><strong>Get.lazyPut()：</strong> 懒加载方式创建实例，只有在使用时才创建</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>Get.lazyPut<span class=p>&lt;</span><span class=nt>CountController</span><span class=p>&gt;</span>(() =&gt; CountController());
</span></span></code></pre></div><p><strong>Get.putAsync()：</strong> <code>Get.put()</code>的异步版版本</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>Get.putAsync<span class=p>&lt;</span><span class=nt>CountController</span><span class=p>&gt;</span>(() async =&gt; await CountController());
</span></span></code></pre></div><p><strong>Get.create()：</strong> 每次使用都会创建一个新的实例</p><p><strong>Get.find()：</strong> 你可以实例化100万个控制器，Get总会找到你所需的控制器</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>Get.find<span class=p>&lt;</span><span class=nt>CountController</span><span class=p>&gt;</span>();
</span></span></code></pre></div><h3 id=其他高级-api>其他高级 API</h3><p><a class=link href=https://github.com/jonataslaw/getx#other-advanced-apis target=_blank rel=noopener>https://github.com/jonataslaw/getx#other-advanced-apis</a></p><h2 id=dio>dio</h2><h3 id=原理>原理</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl># dio_mixin.dart 文件中 DioMixin 实现了 Dio
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>abstract class DioMixin implements Dio {
</span></span><span class=line><span class=cl>  @override
</span></span><span class=line><span class=cl>  Future<span class=p>&lt;</span><span class=nt>Response</span><span class=err>&lt;</span><span class=na>T</span><span class=p>&gt;</span>&gt; post<span class=p>&lt;</span><span class=nt>T</span><span class=p>&gt;</span>(
</span></span><span class=line><span class=cl>    String path, {                            # path： 请求的url链接
</span></span><span class=line><span class=cl>    data,                                     # data： 请求数据，例如上传用到的FromData
</span></span><span class=line><span class=cl>    Map<span class=p>&lt;</span><span class=nt>String</span><span class=err>,</span> <span class=na>dynamic</span><span class=p>&gt;</span>? queryParameters,    # data： 请求数据，例如上传用到的FromData
</span></span><span class=line><span class=cl>    Options? options,                         # queryParameters： 查询参数
</span></span><span class=line><span class=cl>    CancelToken? cancelToken,                 # cancelToken： 用来取消发送请求的token
</span></span><span class=line><span class=cl>    ProgressCallback? onSendProgress,         # onSendProgress： 网络请求发送的进度
</span></span><span class=line><span class=cl>    ProgressCallback? onReceiveProgress,      # onSendProgress： 网络请求发送的进度
</span></span><span class=line><span class=cl>  }) {
</span></span><span class=line><span class=cl>    return request<span class=p>&lt;</span><span class=nt>T</span><span class=p>&gt;</span>(                        # 返回request方法     
</span></span><span class=line><span class=cl>      path,
</span></span><span class=line><span class=cl>      data: data,
</span></span><span class=line><span class=cl>      options: checkOptions(&#39;POST&#39;, options),
</span></span><span class=line><span class=cl>      queryParameters: queryParameters,
</span></span><span class=line><span class=cl>      cancelToken: cancelToken,
</span></span><span class=line><span class=cl>      onSendProgress: onSendProgress,
</span></span><span class=line><span class=cl>      onReceiveProgress: onReceiveProgress,
</span></span><span class=line><span class=cl>    );
</span></span><span class=line><span class=cl>  }
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><p>get() post() 等调用时，返回request方法，request 方法对请求参数处理，并返回 fetch 方法，fetch 进行响应数据设定、构建请求流、添加拦截器、请求分发。</p><h2 id=webview>WebView</h2><p>WebView是应用内显示网页的功能，查看项目的官网、文档、条款等经常用到。推荐使用flutter_inappwebview，比官方webview_flutter有更丰富的功能和详尽的<a class=link href=https://inappwebview.dev/docs/5.x.x/intro target=_blank rel=noopener>文档</a>。主要功能：</p><ul><li><p><a class=link href=https://inappwebview.dev/docs/webview/in-app-webview target=_blank rel=noopener>InAppWebView</a>：是一个内嵌原生 WebView 小部件，集成到 Flutter 小部件树中。</p><ul><li><a class=link href=https://inappwebview.dev/docs/webview/context-menu target=_blank rel=noopener>ContextMenu</a>：WebView 的快捷菜单。例如长按网页文本后的复制。</li><li><a class=link href=https://inappwebview.dev/docs/webview/headless-in-app-webview target=_blank rel=noopener>HeadlessInAppWebView</a>：无头模式下的 WebView。在没有界面或UI的情况下运行WebView。它可以在没有用户界面的情况下执行网页加载和渲染操作，而不需要在用户界面中显示网页，用于后台处理网页数据、自动化测试、网络爬虫等。</li></ul></li><li><p>InAppBrowser</p><ul><li><a class=link href=https://inappwebview.dev/docs/in-app-browsers/in-app-browser target=_blank rel=noopener>InAppBrowser</a>：显示在 Flutter 应用程序顶部的原生 WebView，它没有集成到 Flutter 小部件树中。</li><li><a class=link href=https://inappwebview.dev/docs/in-app-browsers/chrome-safari-browser target=_blank rel=noopener>ChromeSafariBrowser</a>：Android 上的 <a class=link href=https://developer.chrome.com/docs/android/custom-tabs/overview/ target=_blank rel=noopener>Chrome 自定义选项卡</a>和 iOS 上的<a class=link href=https://developer.apple.com/documentation/safariservices/sfsafariviewcontroller target=_blank rel=noopener>SFSafariViewController</a>。</li></ul></li><li><p><a class=link href=https://inappwebview.dev/docs/in-app-localhost-server target=_blank rel=noopener>InAppLocalhostServer</a>：这个类允许你在 http://localhost:[port] 上创建一个简单的服务器。默认端口值为 8080。能够在本地服务器上缓存 js，html等资产文件，优化加载时间。</p></li><li><p><a class=link href=https://inappwebview.dev/docs/cookie-manager target=_blank rel=noopener>CookieManager</a>：此类实现了一个单例对象（共享实例），该对象管理 WebView 实例使用的 cookie。</p></li><li><p><a class=link href=https://inappwebview.dev/docs/http-auth-credential-database target=_blank rel=noopener>HttpAuthCredentialDatabase</a>：此类实现管理共享 HTTP 身份验证凭据缓存的单例对象（共享实例）。</p></li><li><p><a class=link href=https://inappwebview.dev/docs/web-storage-manager target=_blank rel=noopener>WebStorageManager</a>：这个类实现了一个单例对象（共享实例），它管理 WebView 实例使用的 Web 存储。</p></li><li><p><a class=link href=https://inappwebview.dev/docs/service-worker target=_blank rel=noopener>Service Worker</a>：Service Worker 是 PWA 的基本组成部分。它们支持快速加载（无论网络如何）、离线访问、推送通知和其他功能。</p></li></ul><details class=spoiler id=spoiler-13><summary>InAppWebView官方示例注释</summary><p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>import &#39;dart:async&#39;;
</span></span><span class=line><span class=cl>import &#39;package:flutter/foundation.dart&#39;;
</span></span><span class=line><span class=cl>import &#39;package:flutter/material.dart&#39;;
</span></span><span class=line><span class=cl>import &#39;package:flutter_inappwebview/flutter_inappwebview.dart&#39;;
</span></span><span class=line><span class=cl>import &#39;package:url_launcher/url_launcher.dart&#39;;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Future main() async {
</span></span><span class=line><span class=cl>  WidgetsFlutterBinding.ensureInitialized();
</span></span><span class=line><span class=cl>  // 如果是Android，则对加载到 WebView 中的 Web内容（HTML/CSS/JavaScript）启用调试
</span></span><span class=line><span class=cl>  if (!kIsWeb <span class=err>&amp;&amp;</span> defaultTargetPlatform == TargetPlatform.android) {
</span></span><span class=line><span class=cl>    await InAppWebViewController.setWebContentsDebuggingEnabled(true);
</span></span><span class=line><span class=cl>  }
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  runApp(const MaterialApp(home: MyApp()));
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>class MyApp extends StatefulWidget {
</span></span><span class=line><span class=cl>  const MyApp({super.key});
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  @override
</span></span><span class=line><span class=cl>  State<span class=p>&lt;</span><span class=nt>MyApp</span><span class=p>&gt;</span> createState() =&gt; _MyAppState();
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>class _MyAppState extends State<span class=p>&lt;</span><span class=nt>MyApp</span><span class=p>&gt;</span> {
</span></span><span class=line><span class=cl>  final GlobalKey webViewKey = GlobalKey();
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  InAppWebViewController? webViewController;
</span></span><span class=line><span class=cl>  InAppWebViewSettings settings = InAppWebViewSettings(
</span></span><span class=line><span class=cl>      // 能够监听 WebView.shouldOverrideUrlLoading（URL即将加载时）的事件。
</span></span><span class=line><span class=cl>      useShouldOverrideUrlLoading: true,
</span></span><span class=line><span class=cl>      // 设置为 true 以防止 HTML5 音频或视频自动播放。
</span></span><span class=line><span class=cl>      mediaPlaybackRequiresUserGesture: false,
</span></span><span class=line><span class=cl>      // 允许 HTML5 媒体播放在屏幕布局中内嵌显示，即让媒体播放器嵌入到网页的其他内容中一起显示
</span></span><span class=line><span class=cl>      allowsInlineMediaPlayback: true,
</span></span><span class=line><span class=cl>      // 根据请求的来源定义了哪些功能可供使用（例如，访问麦克风、摄像头、电池、网络共享等）
</span></span><span class=line><span class=cl>      iframeAllow: &#34;camera; microphone&#34;,
</span></span><span class=line><span class=cl>      // 如果 iframe 可以通过调用 requestFullscreen() 方法激活全屏模式，则设置为 true。
</span></span><span class=line><span class=cl>      iframeAllowFullscreen: true
</span></span><span class=line><span class=cl>  );
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  PullToRefreshController? pullToRefreshController;
</span></span><span class=line><span class=cl>  String url = &#34;&#34;;
</span></span><span class=line><span class=cl>  double progress = 0;
</span></span><span class=line><span class=cl>  final urlController = TextEditingController();
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  @override
</span></span><span class=line><span class=cl>  void initState() {
</span></span><span class=line><span class=cl>    super.initState();
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    // 在 WebView 中开启下拉刷新
</span></span><span class=line><span class=cl>    pullToRefreshController = kIsWeb ? null : PullToRefreshController(
</span></span><span class=line><span class=cl>      settings: PullToRefreshSettings(
</span></span><span class=line><span class=cl>        color: Colors.blue,
</span></span><span class=line><span class=cl>      ),
</span></span><span class=line><span class=cl>      onRefresh: () async {
</span></span><span class=line><span class=cl>        if (defaultTargetPlatform == TargetPlatform.android) {
</span></span><span class=line><span class=cl>          webViewController?.reload();
</span></span><span class=line><span class=cl>        } else if (defaultTargetPlatform == TargetPlatform.iOS) {
</span></span><span class=line><span class=cl>          webViewController?.loadUrl(
</span></span><span class=line><span class=cl>              urlRequest: URLRequest(url: await webViewController?.getUrl()));
</span></span><span class=line><span class=cl>        }
</span></span><span class=line><span class=cl>      },
</span></span><span class=line><span class=cl>    );
</span></span><span class=line><span class=cl>  }
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  @override
</span></span><span class=line><span class=cl>  Widget build(BuildContext context) {
</span></span><span class=line><span class=cl>    return Scaffold(
</span></span><span class=line><span class=cl>      appBar: AppBar(title: const Text(&#34;Official InAppWebView website&#34;)),
</span></span><span class=line><span class=cl>      body: SafeArea(
</span></span><span class=line><span class=cl>        child: Column(children: <span class=p>&lt;</span><span class=nt>Widget</span><span class=p>&gt;</span>[
</span></span><span class=line><span class=cl>          TextField(
</span></span><span class=line><span class=cl>            decoration: const InputDecoration(prefixIcon: Icon(Icons.search)),
</span></span><span class=line><span class=cl>            controller: urlController,
</span></span><span class=line><span class=cl>            keyboardType: TextInputType.url,
</span></span><span class=line><span class=cl>            onSubmitted: (value) {
</span></span><span class=line><span class=cl>              var url = WebUri(value);
</span></span><span class=line><span class=cl>              if (url.scheme.isEmpty) {
</span></span><span class=line><span class=cl>                url = WebUri(&#34;https://www.google.com/search?q=$value&#34;);
</span></span><span class=line><span class=cl>              }
</span></span><span class=line><span class=cl>              webViewController?.loadUrl(urlRequest: URLRequest(url: url));
</span></span><span class=line><span class=cl>            },
</span></span><span class=line><span class=cl>          ),
</span></span><span class=line><span class=cl>          Expanded(
</span></span><span class=line><span class=cl>            child: Stack(
</span></span><span class=line><span class=cl>              children: [
</span></span><span class=line><span class=cl>                InAppWebView(
</span></span><span class=line><span class=cl>                  key: webViewKey,
</span></span><span class=line><span class=cl>                  // 初始化URL
</span></span><span class=line><span class=cl>                  initialUrlRequest:
</span></span><span class=line><span class=cl>                  URLRequest(url: WebUri(&#34;https://inappwebview.dev/&#34;)),
</span></span><span class=line><span class=cl>                  // 初始化设置
</span></span><span class=line><span class=cl>                  initialSettings: settings,
</span></span><span class=line><span class=cl>                  // 下拉刷新
</span></span><span class=line><span class=cl>                  pullToRefreshController: pullToRefreshController,
</span></span><span class=line><span class=cl>                  // 创建 WebView 时触发的事件
</span></span><span class=line><span class=cl>                  onWebViewCreated: (controller) {
</span></span><span class=line><span class=cl>                    webViewController = controller;
</span></span><span class=line><span class=cl>                  },
</span></span><span class=line><span class=cl>                  // 当 WebView 开始加载 url 时触发的事件。
</span></span><span class=line><span class=cl>                  onLoadStart: (controller, url) {
</span></span><span class=line><span class=cl>                    setState(() {
</span></span><span class=line><span class=cl>                      this.url = url.toString();
</span></span><span class=line><span class=cl>                      urlController.text = this.url;
</span></span><span class=line><span class=cl>                    });
</span></span><span class=line><span class=cl>                  },
</span></span><span class=line><span class=cl>                  // 请求无访问权限资源 时触发的事件。
</span></span><span class=line><span class=cl>                  onPermissionRequest: (controller, request) async {
</span></span><span class=line><span class=cl>                    return PermissionResponse(
</span></span><span class=line><span class=cl>                        resources: request.resources,
</span></span><span class=line><span class=cl>                        action: PermissionResponseAction.GRANT);
</span></span><span class=line><span class=cl>                  },
</span></span><span class=line><span class=cl>                  // 让APP有机会在 URL即将加载 时进行控制。
</span></span><span class=line><span class=cl>                  shouldOverrideUrlLoading:
</span></span><span class=line><span class=cl>                      (controller, navigationAction) async {
</span></span><span class=line><span class=cl>                    var uri = navigationAction.request.url!;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>                    if (![
</span></span><span class=line><span class=cl>                      &#34;http&#34;,
</span></span><span class=line><span class=cl>                      &#34;https&#34;,
</span></span><span class=line><span class=cl>                      &#34;file&#34;,
</span></span><span class=line><span class=cl>                      &#34;chrome&#34;,
</span></span><span class=line><span class=cl>                      &#34;data&#34;,
</span></span><span class=line><span class=cl>                      &#34;javascript&#34;,
</span></span><span class=line><span class=cl>                      &#34;about&#34;
</span></span><span class=line><span class=cl>                    ].contains(uri.scheme)) {
</span></span><span class=line><span class=cl>                      if (await canLaunchUrl(uri)) {
</span></span><span class=line><span class=cl>                        // Launch the App
</span></span><span class=line><span class=cl>                        await launchUrl(
</span></span><span class=line><span class=cl>                          uri,
</span></span><span class=line><span class=cl>                        );
</span></span><span class=line><span class=cl>                        // and cancel the request
</span></span><span class=line><span class=cl>                        return NavigationActionPolicy.CANCEL;
</span></span><span class=line><span class=cl>                      }
</span></span><span class=line><span class=cl>                    }
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>                    return NavigationActionPolicy.ALLOW;
</span></span><span class=line><span class=cl>                  },
</span></span><span class=line><span class=cl>                  // 完成加载 url 时触发的事件。
</span></span><span class=line><span class=cl>                  onLoadStop: (controller, url) async {
</span></span><span class=line><span class=cl>                    pullToRefreshController?.endRefreshing();
</span></span><span class=line><span class=cl>                    setState(() {
</span></span><span class=line><span class=cl>                      this.url = url.toString();
</span></span><span class=line><span class=cl>                      urlController.text = this.url;
</span></span><span class=line><span class=cl>                    });
</span></span><span class=line><span class=cl>                  },
</span></span><span class=line><span class=cl>                  // 加载请求时遇到错误 时触发的事件。
</span></span><span class=line><span class=cl>                  onReceivedError: (controller, request, error) {
</span></span><span class=line><span class=cl>                    pullToRefreshController?.endRefreshing();
</span></span><span class=line><span class=cl>                  },
</span></span><span class=line><span class=cl>                  // 更改正在加载的页面 时触发的事件。
</span></span><span class=line><span class=cl>                  onProgressChanged: (controller, progress) {
</span></span><span class=line><span class=cl>                    if (progress == 100) {
</span></span><span class=line><span class=cl>                      pullToRefreshController?.endRefreshing();
</span></span><span class=line><span class=cl>                    }
</span></span><span class=line><span class=cl>                    setState(() {
</span></span><span class=line><span class=cl>                      this.progress = progress / 100;
</span></span><span class=line><span class=cl>                      urlController.text = url;
</span></span><span class=line><span class=cl>                    });
</span></span><span class=line><span class=cl>                  },
</span></span><span class=line><span class=cl>                  // APP更新其访问的链接 时触发的事件。
</span></span><span class=line><span class=cl>                  onUpdateVisitedHistory: (controller, url, androidIsReload) {
</span></span><span class=line><span class=cl>                    setState(() {
</span></span><span class=line><span class=cl>                      this.url = url.toString();
</span></span><span class=line><span class=cl>                      urlController.text = this.url;
</span></span><span class=line><span class=cl>                    });
</span></span><span class=line><span class=cl>                  },
</span></span><span class=line><span class=cl>                  // WebView收到控制台报错 时触发的事件。
</span></span><span class=line><span class=cl>                  onConsoleMessage: (controller, consoleMessage) {
</span></span><span class=line><span class=cl>                    if (kDebugMode) {
</span></span><span class=line><span class=cl>                      print(consoleMessage);
</span></span><span class=line><span class=cl>                    }
</span></span><span class=line><span class=cl>                  },
</span></span><span class=line><span class=cl>                ),
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>                // 进度指示器
</span></span><span class=line><span class=cl>                progress <span class=p>&lt;</span> <span class=nt>1.0</span>
</span></span><span class=line><span class=cl>                    <span class=err>?</span> <span class=na>LinearProgressIndicator</span><span class=err>(</span><span class=na>value:</span> <span class=na>progress</span><span class=err>)</span>
</span></span><span class=line><span class=cl>                    <span class=na>:</span> <span class=na>Container</span><span class=err>(),</span>
</span></span><span class=line><span class=cl>              <span class=err>],</span>
</span></span><span class=line><span class=cl>            <span class=err>),</span>
</span></span><span class=line><span class=cl>          <span class=err>),</span>
</span></span><span class=line><span class=cl>          <span class=na>ButtonBar</span><span class=err>(</span>
</span></span><span class=line><span class=cl>            <span class=na>alignment:</span> <span class=na>MainAxisAlignment</span><span class=err>.</span><span class=na>center</span><span class=err>,</span>
</span></span><span class=line><span class=cl>            <span class=na>children:</span> <span class=err>&lt;</span><span class=na>Widget</span><span class=p>&gt;</span>[
</span></span><span class=line><span class=cl>              // 后退按钮
</span></span><span class=line><span class=cl>              ElevatedButton(
</span></span><span class=line><span class=cl>                child: const Icon(Icons.arrow_back),
</span></span><span class=line><span class=cl>                onPressed: () {
</span></span><span class=line><span class=cl>                  webViewController?.goBack();
</span></span><span class=line><span class=cl>                },
</span></span><span class=line><span class=cl>              ),
</span></span><span class=line><span class=cl>              // 前进按钮
</span></span><span class=line><span class=cl>              ElevatedButton(
</span></span><span class=line><span class=cl>                child: const Icon(Icons.arrow_forward),
</span></span><span class=line><span class=cl>                onPressed: () {
</span></span><span class=line><span class=cl>                  webViewController?.goForward();
</span></span><span class=line><span class=cl>                },
</span></span><span class=line><span class=cl>              ),
</span></span><span class=line><span class=cl>              // 刷新按钮
</span></span><span class=line><span class=cl>              ElevatedButton(
</span></span><span class=line><span class=cl>                child: const Icon(Icons.refresh),
</span></span><span class=line><span class=cl>                onPressed: () {
</span></span><span class=line><span class=cl>                  webViewController?.reload();
</span></span><span class=line><span class=cl>                },
</span></span><span class=line><span class=cl>              ),
</span></span><span class=line><span class=cl>            ],
</span></span><span class=line><span class=cl>          ),
</span></span><span class=line><span class=cl>        ])
</span></span><span class=line><span class=cl>      )
</span></span><span class=line><span class=cl>    );
</span></span><span class=line><span class=cl>  }
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div></p></details><h2 id=widgetbook>Widgetbook</h2><p>使用Widgetbook可以管理组件、使用不同设备尺寸测试组件、实时修改组件参数、协作共享。</p><h3 id=windows配置>Windows配置</h3><p>确保安装Visual Studio，及其应用：
<img src=/p/flutter/7.png width=1085 height=312 srcset="/p/flutter/7_hu4fa1ec2a00219a167f5b56770646289b_37010_480x0_resize_box_3.png 480w, /p/flutter/7_hu4fa1ec2a00219a167f5b56770646289b_37010_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=347 data-flex-basis=834px></p><p>从<a class=link href=https://www.nuget.org/downloads target=_blank rel=noopener>https://www.nuget.org/downloads</a>下载最新的nuget.exe,并放入任意文件夹（我的在C:\Program Files\Microsoft Visual Studio），配置系统环境变量。</p><h3 id=使用>使用</h3><ul><li>在pubspec.yaml安装 widgetbook 组件</li></ul><style type=text/css>.box{padding:1.6em;padding-top:1.4em;line-height:1.4em;margin-top:2em;margin-bottom:4em;border-radius:4px;color:#444;background:#f3ebe850}.box-title{margin:-18px -18px 12px;padding:4px 18px;border-radius:4px 4px 0 0;font-weight:700;color:#fff;background:#6ab0de}.box.warning .box-title{background:#ff6b6b}.box.warning{background:#ff6b6b4f}.box.info .box-title{background:#0089e488}.box.info{background:#0089e41c;box-shadow:3px 3px 5px #0089e410}.box.important .box-title{background:#f7ec2c}.box.important{background:#f7ec2c7d}.box.tip .box-title{background:#a3ffa34d}.box.tip{background:#a3ffa34d;box-shadow:3px 3px 5px #0089e410}.icon-box{display:inline-flex;align-self:center;margin-right:8px}.icon-box img,.icon-box svg{height:1em;width:1em;fill:currentColor}.icon-box img,.icon-box.baseline svg{top:.125em;position:relative}.box p{margin-bottom:.6em}.box p:first-of-type{display:inline}.box p:nth-of-type(2){margin-top:.6em}.box p:last-child{margin-bottom:0}</style><svg width="0" height="0" display="none" xmlns="http://www.w3.org/2000/svg"><symbol id="tip-box" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379.0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628.0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628.0l-22.627 22.627c-6.248 6.248-6.248 16.379.0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"/></symbol><symbol id="important-box" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405.0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346 7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373.0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884.0-12.356 5.78-11.981 12.654z"/></symbol><symbol id="warning-box" viewBox="0 0 576 512" preserveAspectRatio="xMidYMid meet"><path d="M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937.0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154.0l239.94 416.028zM288 354c-25.405.0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346 7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373.0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884.0-12.356 5.78-11.981 12.654z"/></symbol><symbol id="info-box" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196.0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627.0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627.0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627.0 12 5.373 12 12v1e2h12c6.627.0 12 5.373 12 12v24z"/></symbol></svg><div class="box info"><span class="icon-box baseline"><svg><use href="#info-box"/></svg></span><p>注意是放在 dev_dependencies 下面</p></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>dev_dependencies:
</span></span><span class=line><span class=cl>  flutter_test:
</span></span><span class=line><span class=cl>    sdk: flutter
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  flutter_lints: ^2.0.0
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  widgetbook: ^3.0.0-beta.14
</span></span></code></pre></div><ul><li>新建lib/app.widgetbook.dart</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>import &#39;package:flutter/material.dart&#39;;
</span></span><span class=line><span class=cl>// ignore: depend_on_referenced_packages
</span></span><span class=line><span class=cl>import &#39;package:widgetbook/widgetbook.dart&#39;;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>import &#39;你的组件&#39;;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>void main() {
</span></span><span class=line><span class=cl>  runApp(const HotReload());
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>class HotReload extends StatelessWidget {
</span></span><span class=line><span class=cl>  const HotReload({Key? key}) : super(key: key);
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  @override
</span></span><span class=line><span class=cl>  Widget build(BuildContext context) {
</span></span><span class=line><span class=cl>    return Widgetbook.material(
</span></span><span class=line><span class=cl>      // Widgetbook 属性选择
</span></span><span class=line><span class=cl>      addons: [
</span></span><span class=line><span class=cl>        // 主题
</span></span><span class=line><span class=cl>        // buildMaterialThemeAddon(),
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        // 字体大小
</span></span><span class=line><span class=cl>        // buildTextScaleAddon(),
</span></span><span class=line><span class=cl>      ],
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>      // 可以容纳包、文件夹、类别、组件和用例
</span></span><span class=line><span class=cl>      directories: [
</span></span><span class=line><span class=cl>        //
</span></span><span class=line><span class=cl>        buildWidgetbookCategory(),
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        //
</span></span><span class=line><span class=cl>        //buildWidgetbookCategory2(),
</span></span><span class=line><span class=cl>      ],
</span></span><span class=line><span class=cl>    );
</span></span><span class=line><span class=cl>  }
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  TextScaleAddon buildTextScaleAddon() {
</span></span><span class=line><span class=cl>    return TextScaleAddon(
</span></span><span class=line><span class=cl>        setting: TextScaleSetting.firstAsSelected(
</span></span><span class=line><span class=cl>            textScales: [1.0, 1.25, 1.5, 1.75, 2]));
</span></span><span class=line><span class=cl>  }
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  MaterialThemeAddon buildMaterialThemeAddon() {
</span></span><span class=line><span class=cl>    return MaterialThemeAddon(
</span></span><span class=line><span class=cl>        setting: MaterialThemeSetting.firstAsSelected(themes: [
</span></span><span class=line><span class=cl>      WidgetbookTheme(name: &#34;dark&#34;, data: ThemeData.dark()),
</span></span><span class=line><span class=cl>      WidgetbookTheme(name: &#34;light&#34;, data: ThemeData.light()),
</span></span><span class=line><span class=cl>    ]));
</span></span><span class=line><span class=cl>  }
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  WidgetbookCategory buildWidgetbookCategory() {
</span></span><span class=line><span class=cl>    return WidgetbookCategory(
</span></span><span class=line><span class=cl>      // 分类名
</span></span><span class=line><span class=cl>      name: &#39;公共组件&#39;,
</span></span><span class=line><span class=cl>      children: [
</span></span><span class=line><span class=cl>        WidgetbookComponent(
</span></span><span class=line><span class=cl>          // 组件名
</span></span><span class=line><span class=cl>          name: &#39;Spinkit加载&#39;,
</span></span><span class=line><span class=cl>          useCases: [
</span></span><span class=line><span class=cl>            WidgetbookUseCase.center(
</span></span><span class=line><span class=cl>              // 组件用例名
</span></span><span class=line><span class=cl>              name: &#34;SpinKitFadingCircle&#34;,
</span></span><span class=line><span class=cl>              child: mySpinkit(),
</span></span><span class=line><span class=cl>            ),
</span></span><span class=line><span class=cl>          ],
</span></span><span class=line><span class=cl>        ),
</span></span><span class=line><span class=cl>      ],
</span></span><span class=line><span class=cl>    );
</span></span><span class=line><span class=cl>  }
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><h2 id=ai画图>AI画图</h2><p>Ai 设置：视图->显示网格</p><p>多边形变换：多边形工具->自定义变换工具</p><p>缩放：鼠标左键向右划放大、向左划缩小</p><p>形状合成：选中区域->形状生成器工具->穿过需要的区域->按住Alt穿过不要的区域</p><p>渐变：双击圆圈弹出调色板</p><h2 id=动画>动画</h2><p><img src=/p/flutter/donghua.png width=1396 height=785 srcset="/p/flutter/donghua_hub3ab5e6cde8a9a4aeac5a591ce269148_435997_480x0_resize_box_3.png 480w, /p/flutter/donghua_hub3ab5e6cde8a9a4aeac5a591ce269148_435997_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=177 data-flex-basis=426px></p><p>lottie需要用到Ae，rive是在线编辑。</p><h2 id=其他>其他</h2><p>double width = MediaQuery.of(context).size.width; 屏幕宽度</p><p>double height = MediaQuery.of(context).size.height; 屏幕高度</p></section><footer class=article-footer><section class=article-copyright><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg><span>Licensed under CC BY-NC-SA 4.0</span></section><section class=article-lastmod><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round" style="margin:0 5px"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg><span>最后更新于 2021-04-30</span></section></footer><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/katex.min.css integrity="sha256-J+iAE0sgH8QSz9hpcDxXIftnj65JEZgNhGcgReTTK9s=" crossorigin=anonymous><script src=https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/katex.min.js integrity="sha256-InsNdER1b2xUewP+pKCUJpkhiqwHgqiPXDlIk7GzBu4=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/contrib/auto-render.min.js integrity="sha256-y39Mpg7V3D4lhBX4x6O0bUqTV4pSrfgwEfGKfxkOdgI=" crossorigin=anonymous defer></script><script>window.addEventListener("DOMContentLoaded",()=>{renderMathInElement(document.querySelector(`.article-content`),{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}]})})</script></article><script src=//unpkg.com/@waline/client@v2/dist/waline.js></script>
<link href=//unpkg.com/@waline/client@v2/dist/waline.css rel=stylesheet><div id=waline class=waline-container></div><style>.waline-container{background-color:var(--card-background);border-radius:var(--card-border-radius);box-shadow:var(--shadow-l1);padding:var(--card-padding);--waline-font-size:var(--article-font-size)}.waline-container .wl-count{color:var(--card-text-color-main)}</style><script>Waline.init({dark:'html[data-scheme="dark"]',el:"#waline",emoji:["https://cdn.jsdelivr.net/gh/walinejs/emojis/weibo"],locale:{admin:"Admin",placeholder:null},requiredMeta:["name","email","url"],serverURL:"https://myblog-rho-ebon.vercel.app/"})</script><footer class=site-footer><section class=copyright>&copy;
2021 -
2023 Janus</section><section class=powerby>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>主题 <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.16.0>Stack</a></b> 由 <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a> 设计</section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script type=text/javascript src=/ts/main.js defer></script>
<script>function adsenseDelay(){var t=document.getElementsByTagName("head")[0],e=document.createElement("script");e.type="text/javascript",e.src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1748363845231571",e.setAttribute("crossorigin","anonymous"),t.appendChild(e)}function analyticsDelay(){var t=document.getElementsByTagName("head")[0],e=document.createElement("script");e.type="text/javascript",e.src="https://www.googletagmanager.com/gtag/js?id=UA-124746836-1",t.appendChild(e)}function gtag(){dataLayer.push(arguments)}setTimeout(adsenseDelay,1500),setTimeout(analyticsDelay,1500),window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-124746836-1")</script></body></html>