<!doctype html><html lang=zh-cn dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="å®‰è£… javaç‰ˆæœ¬æ§åˆ¶ï¼ˆjvmsï¼‰ æˆ‘ä»¬å¯èƒ½éœ€è¦å¤šä¸ªjavaç‰ˆæœ¬ï¼Œä¸»è¦æ˜¯ä¸ºäº†å…¼å®¹Gradleç‰ˆæœ¬ã€‚ ä¸‹è½½ï¼Œè§£å‹åˆ°æƒ³è¦çš„è·¯å¾„ ç®¡ç†å‘˜èº«ä»½æ‰“å¼€cmdï¼Œc"><title>flutteråŸºç¡€</title><link rel=canonical href=https://xiaoxiano.github.io/p/flutter/><link rel=stylesheet href=/scss/style.min.d41860860756ab9c450238ff299dc8627d464cd484019706d7090e378ee95bf0.css><meta property="og:title" content="flutteråŸºç¡€"><meta property="og:description" content="å®‰è£… javaç‰ˆæœ¬æ§åˆ¶ï¼ˆjvmsï¼‰ æˆ‘ä»¬å¯èƒ½éœ€è¦å¤šä¸ªjavaç‰ˆæœ¬ï¼Œä¸»è¦æ˜¯ä¸ºäº†å…¼å®¹Gradleç‰ˆæœ¬ã€‚ ä¸‹è½½ï¼Œè§£å‹åˆ°æƒ³è¦çš„è·¯å¾„ ç®¡ç†å‘˜èº«ä»½æ‰“å¼€cmdï¼Œc"><meta property="og:url" content="https://xiaoxiano.github.io/p/flutter/"><meta property="og:site_name" content="Janus"><meta property="og:type" content="article"><meta property="article:section" content="Post"><meta property="article:published_time" content="2022-04-30T00:00:00+00:00"><meta property="article:modified_time" content="2024-11-30T00:00:00+00:00"><meta name=twitter:title content="flutteråŸºç¡€"><meta name=twitter:description content="å®‰è£… javaç‰ˆæœ¬æ§åˆ¶ï¼ˆjvmsï¼‰ æˆ‘ä»¬å¯èƒ½éœ€è¦å¤šä¸ªjavaç‰ˆæœ¬ï¼Œä¸»è¦æ˜¯ä¸ºäº†å…¼å®¹Gradleç‰ˆæœ¬ã€‚ ä¸‹è½½ï¼Œè§£å‹åˆ°æƒ³è¦çš„è·¯å¾„ ç®¡ç†å‘˜èº«ä»½æ‰“å¼€cmdï¼Œc"><link rel=icon type=image/svg+xml href=/favicon.svg><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#00aba9"><meta name=msapplication-TileImage content="/mstile-144x144.png"><meta name=theme-color content="#ffffff"><meta name=apple-mobile-web-app-title content="rmdhnreza.my.id - Blog Tutorial For Linux & Windows"><meta name=application-name content="rmdhnreza.my.id - Blog Tutorial For Linux & Windows"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","name":"flutteråŸºç¡€","headline":"flutteråŸºç¡€","description":"å®‰è£… javaç‰ˆæœ¬æ§åˆ¶ï¼ˆjvmsï¼‰ æˆ‘ä»¬å¯èƒ½éœ€è¦å¤šä¸ªjavaç‰ˆæœ¬ï¼Œä¸»è¦æ˜¯ä¸ºäº†å…¼å®¹Gradleç‰ˆæœ¬ã€‚ ä¸‹è½½ï¼Œè§£å‹åˆ°æƒ³è¦çš„è·¯å¾„ ç®¡ç†å‘˜èº«ä»½æ‰“å¼€cmdï¼Œc","inLanguage":"id-ID","isFamilyFriendly":"true","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/xiaoxiano.github.io\/p\/flutter\/"},"author":{"@type":"Person","name":"rmdhnreza","url":"https://github.com/rmdhnreza"},"creator":{"@type":"Person","name":"rmdhnreza"},"accountablePerson":{"@type":"Person","name":"rmdhnreza"},"copyrightHolder":"Janus","copyrightYear":"2022","datePublished":"2022-04-30T00:00:00+00:00","dateModified":"2024-11-30T00:00:00+00:00","publisher":{"@type":"Organization","name":"Janus","url":"https://xiaoxiano.github.io","logo":{"@type":"ImageObject","url":"https:\/\/xiaoxiano.github.io/favicon-96x96.png","width":"112","height":"112"}},"image":"https://xiaoxiano.github.io","url":"https:\/\/xiaoxiano.github.io\/p\/flutter\/","wordCount":"26999","tag":[],"keywords":[],"articleSection":["computer"]}</script></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=åˆ‡æ¢èœå•>
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_hu45d9d6b92b0e2c7b760024d72fbde663_30609_300x0_resize_box_3.png width=300 height=263 class=site-logo loading=lazy alt=Avatar></a></figure><div class=site-meta><h1 class=site-name><a href=/>Janus</a></h1><h2 class=site-description>ä¸ªäººæ‚è®°</h2></div></header><ul class=menu id=main-menu><li><a href=/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home-2" width="44" height="44" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round" style="stroke-width:2.5px"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><rect x="10" y="12" width="4" height="4"/></svg>é¦–é¡µ</a></li><li><a href=/search/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="44" height="44" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round" style="stroke-width:2.5px"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>æœç´¢</a></li><li><a href=/archives/><svg role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" style="fill:currentColor"><title>GitBook icon</title><path d="M10.802 17.77a.703.703.0 11-.002 1.406.703.703.0 01.002-1.406m11.024-4.347a.703.703.0 11.001-1.406.703.703.0 01-.001 1.406m0-2.876a2.176 2.176.0 00-2.174 2.174c0 .233.039.465.115.691l-7.181 3.823a2.165 2.165.0 00-1.784-.937c-.829.0-1.584.475-1.95 1.216l-6.451-3.402c-.682-.358-1.192-1.48-1.138-2.502.028-.533.212-.947.493-1.107.178-.1.392-.092.62.027l.042.023c1.71.9 7.304 3.847 7.54 3.956.363.169.565.237 1.185-.057l11.564-6.014c.17-.064.368-.227.368-.474.0-.342-.354-.477-.355-.477-.658-.315-1.669-.788-2.655-1.25-2.108-.987-4.497-2.105-5.546-2.655-.906-.474-1.635-.074-1.765.006l-.252.125C7.78 6.048 1.46 9.178 1.1 9.397.457 9.789.058 10.57.006 11.539c-.08 1.537.703 3.14 1.824 3.727l6.822 3.518a2.175 2.175.0 002.15 1.862 2.177 2.177.0 002.173-2.14l7.514-4.073c.38.298.853.461 1.337.461A2.176 2.176.0 0024 12.72a2.176 2.176.0 00-2.174-2.174"/></svg>æ¡£æ¡ˆ</a></li><li><a href=/%E5%85%B3%E4%BA%8E/><svg xmlns="http://www.w3.org/2000/svg" fill="currentcolor" width="24" height="24" xmlns:v="https://vecta.io/nano"><path d="M12 5.9a2.1 2.1.0 110 4.2 2.1 2.1.0 110-4.2m0 9c2.97.0 6.1 1.46 6.1 2.1v1.1H5.9V17c0-.64 3.13-2.1 6.1-2.1M12 4a4 4 0 100 8 4 4 0 100-8zm0 9c-2.67.0-8 1.34-8 4v3h16v-3c0-2.66-5.33-4-8-4z"/></svg>å…³äº</a></li><li id=dark-mode-toggle><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><span>æš—è‰²æ¨¡å¼</span></li><li class=menu-bottom-section></li></ul></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">ç›®å½•</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#å®‰è£…>å®‰è£…</a><ol><li><a href=#javaç‰ˆæœ¬æ§åˆ¶jvms>javaç‰ˆæœ¬æ§åˆ¶ï¼ˆjvmsï¼‰</a></li><li><a href=#android-studio>Android Studio</a></li><li><a href=#flutterç‰ˆæœ¬æ§åˆ¶fvm>flutterç‰ˆæœ¬æ§åˆ¶ï¼ˆfvmï¼‰</a></li><li><a href=#ç›´æ¥å®‰è£…>ç›´æ¥å®‰è£…</a></li></ol></li><li><a href=#åˆ›å»º-flutter-é¡¹ç›®>åˆ›å»º Flutter é¡¹ç›®</a></li><li><a href=#æ„å»º>æ„å»º</a><ol><li><a href=#gradle>Gradle</a><ol><li><a href=#åŸºç¡€>åŸºç¡€</a></li><li><a href=#javaæ’ä»¶>javaæ’ä»¶</a></li></ol></li><li><a href=#æ•…éšœæ’é™¤>æ•…éšœæ’é™¤</a><ol><li><a href=#é…ç½®>é…ç½®</a></li><li><a href=#æ›´æ–°>æ›´æ–°</a></li><li><a href=#æŠ¥é”™>æŠ¥é”™</a></li></ol></li></ol></li><li><a href=#dart>dart</a><ol><li><a href=#å˜é‡>å˜é‡</a></li><li><a href=#ç±»å‹>ç±»å‹</a><ol><li><a href=#å¸¸è§„ç±»å‹>å¸¸è§„ç±»å‹</a></li><li><a href=#å…¶å®ƒç±»å‹>å…¶å®ƒç±»å‹</a></li><li><a href=#ä¸å¸¸ç”¨çš„ç±»å‹>ä¸å¸¸ç”¨çš„ç±»å‹</a></li><li><a href=#ç±»å‹è½¬æ¢>ç±»å‹è½¬æ¢</a></li></ol></li><li><a href=#å‡½æ•°>å‡½æ•°</a><ol><li><a href=#å‚æ•°>å‚æ•°</a></li></ol></li><li><a href=#è¿ç®—ç¬¦>è¿ç®—ç¬¦</a></li><li><a href=#ç±»>ç±»</a><ol><li><a href=#æ–¹æ³•>æ–¹æ³•</a><ol><li><a href=#å®ä¾‹å˜é‡å’Œæ–¹æ³•>å®ä¾‹å˜é‡å’Œæ–¹æ³•</a></li><li><a href=#é™æ€å˜é‡å’Œæ–¹æ³•>é™æ€å˜é‡å’Œæ–¹æ³•</a></li><li><a href=#get-å’Œ-set>get å’Œ set</a></li><li><a href=#æŠ½è±¡ç±»æŠ½è±¡æ–¹æ³•>æŠ½è±¡ç±»ã€æŠ½è±¡æ–¹æ³•</a></li><li><a href=#call>call()</a></li></ol></li><li><a href=#æ„é€ å‡½æ•°>æ„é€ å‡½æ•°</a></li><li><a href=#å›è°ƒå‡½æ•°>å›è°ƒå‡½æ•°</a><ol><li><a href=#function-class>Function class</a></li><li><a href=#widgetsä¹‹é—´çš„é€šä¿¡>widgetsä¹‹é—´çš„é€šä¿¡</a></li></ol></li><li><a href=#æ‰©å±•>æ‰©å±•</a><ol><li><a href=#æ‰©å±•ç±»>æ‰©å±•ç±»</a></li><li><a href=#super>super</a></li><li><a href=#æ‰©å±•æ–¹æ³•>æ‰©å±•æ–¹æ³•</a></li></ol></li></ol></li><li><a href=#æ³›å‹>æ³›å‹</a></li><li><a href=#å¼‚æ­¥>å¼‚æ­¥</a></li></ol></li><li><a href=#flutter>flutter</a><ol><li><a href=#widgetç”Ÿå‘½å‘¨æœŸ>Widgetç”Ÿå‘½å‘¨æœŸ</a><ol><li><a href=#ä½¿ç”¨>ä½¿ç”¨</a></li></ol></li><li><a href=#getx>Getx</a><ol><li><a href=#çŠ¶æ€ç®¡ç†>çŠ¶æ€ç®¡ç†</a><ol><li><a href=#ä»‹ç»>ä»‹ç»</a></li><li><a href=#controller>Controller</a></li><li><a href=#ååº”çŠ¶æ€ç®¡ç†>ååº”çŠ¶æ€ç®¡ç†</a></li><li><a href=#ç®€å•çŠ¶æ€ç®¡ç†>ç®€å•çŠ¶æ€ç®¡ç†</a></li><li><a href=#workers>Workers</a></li></ol></li><li><a href=#è·¯ç”±ç®¡ç†>è·¯ç”±ç®¡ç†</a><ol><li><a href=#æ™®é€šè·¯ç”±>æ™®é€šè·¯ç”±</a></li><li><a href=#åˆ«åè·¯ç”±>åˆ«åè·¯ç”±</a></li></ol></li><li><a href=#ä¾èµ–æ³¨å…¥>ä¾èµ–æ³¨å…¥</a></li><li><a href=#å…¶ä»–>å…¶ä»–</a><ol><li><a href=#getview>GetView</a></li><li><a href=#getxservice>GetxService</a></li><li><a href=#å…¶ä»–é«˜çº§-api>å…¶ä»–é«˜çº§ API</a></li></ol></li></ol></li><li><a href=#dio>dio</a><ol><li><a href=#åŸç†>åŸç†</a></li></ol></li><li><a href=#webview>WebView</a></li><li><a href=#flexcolorpicker>FlexColorPicker</a></li><li><a href=#widgetbookä»…ä½œäº†è§£>Widgetbook(ä»…ä½œäº†è§£)</a><ol><li><a href=#windowsé…ç½®>Windowsé…ç½®</a></li><li><a href=#ä½¿ç”¨-1>ä½¿ç”¨</a></li></ol></li><li><a href=#plugin>Plugin</a><ol><li><a href=#flutter-1>Flutter</a></li><li><a href=#android>Android</a><ol><li><a href=#java>Java</a></li><li><a href=#è¿›ç¨‹å’Œçº¿ç¨‹>è¿›ç¨‹å’Œçº¿ç¨‹</a></li><li><a href=#ç”Ÿå‘½å‘¨æœŸ>ç”Ÿå‘½å‘¨æœŸ</a></li><li><a href=#androidå››å¤§ç»„ä»¶>androidå››å¤§ç»„ä»¶</a></li><li><a href=#builderæ¨¡å¼>builderæ¨¡å¼</a></li><li><a href=#channel>Channel</a></li><li><a href=#androidmanifestxml>AndroidManifest.xml</a></li><li><a href=#xmlè§†å›¾>XMLè§†å›¾</a></li></ol></li><li><a href=#å¸¸ç”¨-api>å¸¸ç”¨ APIï¼š</a></li></ol></li><li><a href=#è°ƒè¯•>è°ƒè¯•</a><ol><li><a href=#vs-code-debug>VS Code debug</a></li><li><a href=#å¸ƒå±€è°ƒè¯•>å¸ƒå±€è°ƒè¯•</a></li><li><a href=#æ¨¡æ‹Ÿå™¨>æ¨¡æ‹Ÿå™¨</a></li></ol></li><li><a href=#aiç”»å›¾>AIç”»å›¾</a></li><li><a href=#åŠ¨ç”»>åŠ¨ç”»</a></li><li><a href=#ä¸Šæ¶>ä¸Šæ¶</a><ol><li><a href=#åŒ…å>åŒ…å</a></li><li><a href=#åº”ç”¨åç§°>åº”ç”¨åç§°</a></li><li><a href=#å›¾æ ‡>å›¾æ ‡</a></li><li><a href=#å¯åŠ¨å›¾ç‰‡>å¯åŠ¨å›¾ç‰‡</a></li><li><a href=#ç­¾åå®‰å“>ç­¾åï¼ˆå®‰å“ï¼‰</a></li><li><a href=#ç¼–è¯‘>ç¼–è¯‘</a></li></ol></li><li><a href=#å…¶ä»–-1>å…¶ä»–</a></li></ol></li></ol></nav></div></section></aside><main class="main full-width"><article class=main-article itemscope itemtype=https://schema.org/Article><header class=article-header><div class=article-details><h2 class="article-title center-text"><a itemprop=url href=/p/flutter/><span itemprop=name>flutteråŸºç¡€</span></a></h2><div class=article-time><span class=text-time>å‘å¸ƒæ—¶é—´: <time class=time datetime="2022-04-30 00:00:00 +0000 UTC" title="2022-04-30 00:00:00 +0000 UTC">April 30, 2022</time></span>
<span class=text-time>æ›´æ–°æ—¶é—´: <time class=time datetime="2024-11-30 00:00:00 +0000 UTC" title="2024-11-30 00:00:00 +0000 UTC">November 30, 2024</time></span></div><ul id=menu class="breadcrumb article-category" itemscope itemtype=https://schema.org/BreadcrumbList><li itemprop=itemListElement itemscope itemtype=https://schema.org/ListItem><a itemprop=item href=/><span itemprop=name>Home</span><meta itemprop=position content="1"></a></li><li itemprop=itemListElement itemscope itemtype=https://schema.org/ListItem><a itemprop=item href=/categories/computer><span itemprop=name>computer</span></a><meta itemprop=position content="2"><li itemprop=itemListElement itemscope itemtype=https://schema.org/ListItem><span style=display:none class=bold__text itemprop=name>flutteråŸºç¡€</span><meta itemprop=position content="3"></li></ul></div></header><section class=article-content><h1 id=å®‰è£…>å®‰è£…</h1><h2 id=javaç‰ˆæœ¬æ§åˆ¶jvms>javaç‰ˆæœ¬æ§åˆ¶ï¼ˆjvmsï¼‰</h2><p>æˆ‘ä»¬å¯èƒ½éœ€è¦å¤šä¸ªjavaç‰ˆæœ¬ï¼Œä¸»è¦æ˜¯ä¸ºäº†<a class=link href=https://docs.gradle.org/current/userguide/compatibility.html#compatibility target=_blank rel=noopener>å…¼å®¹Gradleç‰ˆæœ¬</a>ã€‚</p><ol><li><a class=link href=https://github.com/ystyle/jvms/releases target=_blank rel=noopener>ä¸‹è½½</a>ï¼Œè§£å‹åˆ°æƒ³è¦çš„è·¯å¾„</li><li>ç®¡ç†å‘˜èº«ä»½æ‰“å¼€cmdï¼Œcdåˆ°åœ¨jvms.exeæ‰€åœ¨çš„ç›®å½•ä¸‹ï¼Œæ‰§è¡Œ<code>jvms init</code></li><li><code>jvms.exe rls</code>å¯åˆ—å‡ºjavaç‰ˆæœ¬ï¼Œå¦‚æœå¤±è´¥ï¼Œæ‰“å¼€<code>https://site.ip138.com/raw.Githubusercontent.com/</code>æŸ¥çœ‹ipï¼Œåœ¨<code>C:\Windows\System32\drivers\etc\hosts</code>æœ«å°¾æ·»åŠ ä¸€è¡Œ<code>[ip] raw.githubusercontent.com</code></li><li>å®‰è£…<code>jvms install [version]</code></li><li><code>jvms.exe ls</code>åˆ—å‡ºå·²å®‰è£…JDKç‰ˆæœ¬</li><li><code>jvms.exe switch [version]</code>åˆ‡æ¢ç‰ˆæœ¬</li><li><code>java -version</code></li><li><code>jvms.exe remove [version]</code>åˆ é™¤æŸä¸ªç‰ˆæœ¬</li></ol><p><strong>æ›´å¤šå‘½ä»¤</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>// åˆ›å»ºæ–°é¡¹ç›®
</span></span><span class=line><span class=cl>fvm flutter create
</span></span><span class=line><span class=cl>// æ›´æ–°é¡¹ç›®ä¾èµ–
</span></span><span class=line><span class=cl>fvm flutter pub get
</span></span><span class=line><span class=cl>// æ¸…é™¤ç¼“å­˜
</span></span><span class=line><span class=cl>fvm flutter clean 
</span></span></code></pre></div><h2 id=android-studio>Android Studio</h2><p><strong>å®‰è£…é…ç½®Android Studio</strong></p><p><a class=link href=https://developer.android.com/studio target=_blank rel=noopener>ä¸‹è½½åœ°å€</a></p><p><strong>Android SDK Tools:</strong></p><ul><li>path:<code>C:\Users\[username]\AppData\Local\Android\Sdk\tools</code></li></ul><p><strong>Android SDK Platform-Tools:</strong></p><ul><li>path:<code>C:\Users\[username]\AppData\Local\Android\Sdk\platform-tools</code></li></ul><p><strong>Android SDK</strong></p><p>Tools -> SDK Manager -> ç¼–è¾‘Android SDK Locationï¼ˆé»˜è®¤å³å¯ï¼‰</p><ul><li>SDK Platformsï¼šæ¨èAndroid 7.0åŠä»¥ä¸Š</li><li>SDK Tools<ul><li><a class=link href=https://github.com/intel/haxm/releases target=_blank rel=noopener>ä¸‹è½½å®‰è£…</a> -> Intel x86 Emulator Accelerator (HAXM installer)-Deprecatedï¼ˆæ¨¡æ‹Ÿå™¨æ”¯æŒï¼‰</li><li>Android SDK Command-line Tools</li></ul></li></ul><h2 id=flutterç‰ˆæœ¬æ§åˆ¶fvm>flutterç‰ˆæœ¬æ§åˆ¶ï¼ˆfvmï¼‰</h2><ol><li>å®‰è£… fvmï¼Œå‘½ä»¤è¡Œè¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>choco install fvm
</span></span></code></pre></div><ol start=2><li>æŸ¥çœ‹å½“å‰æœ‰å“ªäº›ç‰ˆæœ¬å¯ç”¨</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>fvm releases
</span></span></code></pre></div><ol start=3><li>å®‰è£…æŒ‡å®šç‰ˆæœ¬</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>// æœ‰å¯èƒ½ç¼ºå¤±ï¼Œå»ºè®®æ‰‹åŠ¨ä¸‹è½½
</span></span><span class=line><span class=cl>fvm install [version]
</span></span></code></pre></div><ol start=4><li>åˆ—å‡ºæ‰€æœ‰å·²å®‰è£…çš„ Flutter SDK ç‰ˆæœ¬ã€‚</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>fvm list
</span></span></code></pre></div><ol start=5><li>VS Codeé…ç½®</li></ol><p>åœ¨é¡¹ç›®ä¸­åˆ›å»ºä¸€ä¸ª.vscodeæ–‡ä»¶å¤¹ï¼Œç„¶ååˆ›å»ºä¸€ä¸ªåä¸ºsettings.jsonçš„æ–‡ä»¶å¹¶æ·»åŠ ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>{
</span></span><span class=line><span class=cl>  &#34;dart.flutterSdkPath&#34;: &#34;.fvm/flutter_sdk&#34;,
</span></span><span class=line><span class=cl>  // Remove .fvm files from search
</span></span><span class=line><span class=cl>  &#34;search.exclude&#34;: {
</span></span><span class=line><span class=cl>    &#34;**/.fvm&#34;: true
</span></span><span class=line><span class=cl>  },
</span></span><span class=line><span class=cl>  // Remove from file watching
</span></span><span class=line><span class=cl>  &#34;files.watcherExclude&#34;: {
</span></span><span class=line><span class=cl>    &#34;**/.fvm&#34;: true
</span></span><span class=line><span class=cl>  }
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><ol start=6><li>åˆ‡æ¢ç‰ˆæœ¬</li></ol><ul><li>å…¨å±€åˆ‡æ¢ï¼š<code>fvm global [version]</code></li><li>é¡¹ç›®ä¸­åˆ‡æ¢ï¼ˆæ¯æ¬¡éƒ½è¦ï¼‰ï¼šé¡¹ç›®ç›®å½•ä¸‹ï¼Œç»ˆç«¯è¿è¡Œ<code>fvm use [version]</code>ï¼Œé‡å¯vscode</li></ul><style type=text/css>.box{padding:1.6em;padding-top:1.4em;line-height:1.4em;margin-top:2em;margin-bottom:4em;border-radius:4px;color:#444;background:#f3ebe850}.box-title{margin:-18px -18px 12px;padding:4px 18px;border-radius:4px 4px 0 0;font-weight:700;color:#fff;background:#6ab0de}.box.warning .box-title{background:#ff6b6b}.box.warning{background:#ff6b6b4f}.box.info .box-title{background:#0089e488}.box.info{background:#0089e41c;box-shadow:3px 3px 5px #0089e410}.box.important .box-title{background:#f7ec2c}.box.important{background:#f7ec2c7d}.box.tip .box-title{background:#a3ffa34d}.box.tip{background:#a3ffa34d;box-shadow:3px 3px 5px #0089e410}.icon-box{display:inline-flex;align-self:center;margin-right:8px}.icon-box img,.icon-box svg{height:1em;width:1em;fill:currentColor}.icon-box img,.icon-box.baseline svg{top:.125em;position:relative}.box p{margin-bottom:.6em}.box p:first-of-type{display:inline}.box p:nth-of-type(2){margin-top:.6em}.box p:last-child{margin-bottom:0}</style><svg width="0" height="0" display="none" xmlns="http://www.w3.org/2000/svg"><symbol id="tip-box" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379.0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628.0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628.0l-22.627 22.627c-6.248 6.248-6.248 16.379.0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"/></symbol><symbol id="important-box" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405.0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346 7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373.0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884.0-12.356 5.78-11.981 12.654z"/></symbol><symbol id="warning-box" viewBox="0 0 576 512" preserveAspectRatio="xMidYMid meet"><path d="M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937.0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154.0l239.94 416.028zM288 354c-25.405.0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346 7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373.0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884.0-12.356 5.78-11.981 12.654z"/></symbol><symbol id="info-box" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196.0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627.0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627.0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627.0 12 5.373 12 12v1e2h12c6.627.0 12 5.373 12 12v24z"/></symbol></svg><div class="box info"><span class="icon-box baseline"><svg><use href="#info-box"/></svg></span><p>è¿è¡Œä¸Šè¿°å‘½ä»¤åï¼Œé¡¹ç›®ä¸­åˆ›å»ºäº†ä¸€ä¸ªåä¸º.fvm çš„æ–‡ä»¶å¤¹ï¼Œæ–‡ä»¶å¤¹ä¸­æœ‰ flutter SDKï¼Œå¦‚æœä¸å¸Œæœ›æäº¤æ­¤æ–‡ä»¶å¤¹ï¼Œåœ¨.gitignoreæ–‡ä»¶ä¸­æ·»åŠ <code>.fvm/flutter_sdk</code></p></div><ol start=7><li>åˆ é™¤æŸä¸ªç‰ˆæœ¬</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>fvm remove [version]
</span></span></code></pre></div><h2 id=ç›´æ¥å®‰è£…>ç›´æ¥å®‰è£…</h2><ol><li>å®‰è£… JDK</li></ol><p><a class=link href=https://www.oracle.com/java/technologies/downloads/#jdk17-windows target=_blank rel=noopener>ä¸‹è½½åœ°å€</a></p><ol start=2><li>å®‰è£…flutter(windows)</li></ol><p><a class=link href=https://docs.flutter.dev/get-started/install/windows target=_blank rel=noopener>flutterå®‰è£…</a></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>set PUB_HOSTED_URL=&#34;https://mirrors.tuna.tsinghua.edu.cn/dart-pub&#34;   #é…ç½®å›½å†…é•œåƒ
</span></span><span class=line><span class=cl>set FLUTTER_STORAGE_BASE_URL=&#34;https://mirrors.tuna.tsinghua.edu.cn/flutter&#34;
</span></span></code></pre></div><ol start=3><li>é…ç½®ç¯å¢ƒå˜é‡</li></ol><p><strong>Dart:</strong> æ— éœ€é…ç½®ï¼Œflutterç°åœ¨è‡ªå¸¦dartã€‚</p><p><strong>Flutter:</strong></p><ul><li>path:<code>C:\flutter\bin</code></li></ul><p><strong>Java:</strong></p><ul><li><p><code>JAVA_HOME</code>:<code>C:\Program Files\Java\jdk-1.8</code></p></li><li><p>path:<code>%JAVA_HOME%\bin</code></p></li><li><p>path:<code>%JAVA_HOME%\jre\bin</code> (å¦‚æœæ˜¯jdk-17åˆ™ä¸éœ€è¦é…ç½®jre)</p></li><li><p>åˆ é™¤è‡ªåŠ¨é…ç½®çš„ç¯å¢ƒå˜é‡pathï¼š</p><ul><li><code>C:\Program Files\Common Files\Oracle\Java\javapath</code></li><li><code>C:\Program Files (x86)\Common Files\Oracle\Java\javapath</code></li></ul></li></ul><div class="box info"><span class="icon-box baseline"><svg><use href="#info-box"/></svg></span><p>ä¸æ¨èè®¾ç½®ç³»ç»Ÿç¯å¢ƒå˜é‡<code>classpath</code>ï¼Œå§‹ç»ˆå»ºè®®é€šè¿‡<code>-cp</code>å‘½ä»¤ä¼ å…¥ï¼ŒJVMé»˜è®¤çš„<code>classpath</code>ä¸º<code>.</code>ï¼Œå³å½“å‰ç›®å½•ã€‚</p></div><h1 id=åˆ›å»º-flutter-é¡¹ç›®>åˆ›å»º Flutter é¡¹ç›®</h1><p><img src=/p/flutter/1.jpg width=1317 height=897 srcset="/p/flutter/1_huff754efb2c95fdbde3860fe3076e21cb_150899_480x0_resize_q75_box.jpg 480w, /p/flutter/1_huff754efb2c95fdbde3860fe3076e21cb_150899_1024x0_resize_q75_box.jpg 1024w" loading=lazy class=gallery-image data-flex-grow=146 data-flex-basis=352px></p><p><img src=/p/flutter/2.jpg width=1279 height=903 srcset="/p/flutter/2_hucf4eac703c21ad8fecf4d8297c8a4909_91996_480x0_resize_q75_box.jpg 480w, /p/flutter/2_hucf4eac703c21ad8fecf4d8297c8a4909_91996_1024x0_resize_q75_box.jpg 1024w" loading=lazy class=gallery-image data-flex-grow=141 data-flex-basis=339px></p><p><img src=/p/flutter/3.jpg width=1234 height=897 srcset="/p/flutter/3_huf5771a4378f496e08370a30e6aea2a57_268237_480x0_resize_q75_box.jpg 480w, /p/flutter/3_huf5771a4378f496e08370a30e6aea2a57_268237_1024x0_resize_q75_box.jpg 1024w" loading=lazy class=gallery-image data-flex-grow=137 data-flex-basis=330px></p><p><img src=/p/flutter/4.jpg width=1738 height=975 srcset="/p/flutter/4_hu749a3588d7f75328d4ce8cfeb04f0fea_609718_480x0_resize_q75_box.jpg 480w, /p/flutter/4_hu749a3588d7f75328d4ce8cfeb04f0fea_609718_1024x0_resize_q75_box.jpg 1024w" loading=lazy class=gallery-image data-flex-grow=178 data-flex-basis=427px></p><h1 id=æ„å»º>æ„å»º</h1><p>æ„å»ºé¡¹ç›®å·¥å…·æ˜¯å¿…å­¦å†…å®¹ï¼Œä¹Ÿæ˜¯é¡¹ç›®å®¹æ˜“æŠ¥é”™çš„éƒ¨åˆ†ï¼Œæ‰€ä»¥æ”¾åœ¨å‰é¢ã€‚</p><p>Gradleæ˜¯Androidå®˜æ–¹å·¥å…·ï¼Œæ¯”Mavenæ›´çµæ´»é«˜æ•ˆï¼Œå®ƒå…·æœ‰é«˜åº¦å¯å®šåˆ¶æ€§ï¼Œä»¥é€‚åº”ä¸åŒçš„é¡¹ç›®ã€‚</p><h2 id=gradle>Gradle</h2><p><strong>æ³¨æ„ä¸åŒç‰ˆæœ¬çš„Gradleå­˜åœ¨å·®å¼‚</strong></p><ul><li>ä¸€èˆ¬æƒ…å†µä¸‹Androidé¡¹ç›®ä½¿ç”¨Android Gradle Plugin(AGP)çš„ç‰ˆæœ¬ï¼Œæ–°é¡¹ç›®è¯·<a class=link href="https://developer.android.com/build/releases/gradle-plugin?hl=zh-cn#updating-gradle" target=_blank rel=noopener>æ£€æŸ¥AGPå¯¹åº”gradleç‰ˆæœ¬</a></li><li>flutter SDKæœ‰å®ƒè‡ªå·±å¯¹åº”çš„gradleç‰ˆæœ¬</li><li>cloneçš„javaé¡¹ç›®<a class=link href=https://gradle.org/releases/ target=_blank rel=noopener>ä¸‹è½½ç›¸åº”gradle</a>åˆ°é¡¹ç›®ç›®å½•ï¼Œåœ¨<code>Settings -> Build Tools -> Distribution:Local installation</code>ä½¿ç”¨ã€‚</li></ul><p>æ›´æ–°AGPï¼š<code>Tools -> AGP upgrade assistant</code></p><p>æ›´æ”¹é¡¹ç›®/æ¨¡å—gradleç‰ˆæœ¬ï¼š<code>File -> Project Structure -> Project/Modules</code></p><p>å‚è€ƒï¼š<a class=link href=https://gradle.org/releases/ target=_blank rel=noopener>æ–‡æ¡£</a>ã€ç¤ºä¾‹ï¼šhttps://docs.gradle.org/[version]/samples/index.html#java</p><h3 id=åŸºç¡€>åŸºç¡€</h3><ul><li>é¡¹ç›® build.gradleï¼šé…ç½®é¡¹ç›®æ•´ä½“å±æ€§ï¼Œæ¯”å¦‚æŒ‡å®šçš„ä»£ç ä»“åº“ã€ä¾èµ–</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>buildscript {
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    repositories {   // gradleè„šæœ¬æ‰§è¡Œéœ€è¦çš„ä¾èµ–
</span></span><span class=line><span class=cl>        google()     // å¼•ç”¨googleä¸Šçš„å¼€æºé¡¹ç›®
</span></span><span class=line><span class=cl>        jcenter()    // å¼•ç”¨ jcenterä¸Šçš„å¼€æºé¡¹ç›®
</span></span><span class=line><span class=cl>    }
</span></span><span class=line><span class=cl>    dependencies {    // ä¾èµ–çš„jaråŒ…
</span></span><span class=line><span class=cl>        classpath &#39;com.android.tools.build:gradle:3.0.0&#39;
</span></span><span class=line><span class=cl>    }
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>allprojects {       // é¡¹ç›®æœ¬èº«éœ€è¦çš„ä¾èµ–
</span></span><span class=line><span class=cl>    repositories {
</span></span><span class=line><span class=cl>        google()
</span></span><span class=line><span class=cl>        jcenter()
</span></span><span class=line><span class=cl>    }
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>task clean(type: Delete) {   // æ‰§è¡Œtaskä»»åŠ¡ï¼šåˆ é™¤æ ¹ç›®å½•ä¸­çš„buildç›®å½•
</span></span><span class=line><span class=cl>    delete rootProject.buildDir
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><ul><li>æ¨¡å— build.gradleï¼šé…ç½®å½“å‰Moduleçš„ç¼–è¯‘å‚æ•°</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>// ä½¿ç”¨æ’ä»¶
</span></span><span class=line><span class=cl>apply plugin: &#39;com.android.application&#39;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>android {
</span></span><span class=line><span class=cl>    compileSdk 34                                   // è®¾ç½®ç¼–è¯‘æ—¶ç”¨çš„Androidç‰ˆæœ¬
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    defaultConfig {
</span></span><span class=line><span class=cl>        applicationId &#34;com.example.myapplication&#34;   // é¡¹ç›®çš„åŒ…åï¼ˆå­æ¨¡å—ä¸èƒ½æŒ‡å®šï¼‰
</span></span><span class=line><span class=cl>        minSdkVersion 15                            // æœ€ä½å…¼å®¹çš„ç‰ˆæœ¬
</span></span><span class=line><span class=cl>        targetSdk 34                                // ç›®æ ‡ç‰ˆæœ¬
</span></span><span class=line><span class=cl>        versionCode 1                               // ç‰ˆæœ¬å·
</span></span><span class=line><span class=cl>        versionName &#34;1.0&#34;                           // ç‰ˆæœ¬åç§°
</span></span><span class=line><span class=cl>        // ä½¿ç”¨AndroidJUnitRunnerè¿›è¡Œå•å…ƒæµ‹è¯•
</span></span><span class=line><span class=cl>        testInstrumentationRunner  &#34;android.support.test.runner.AndroidJUnitRunner&#34;    
</span></span><span class=line><span class=cl>    }
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    buildTypes {
</span></span><span class=line><span class=cl>        release {   // ç”Ÿäº§ç¯å¢ƒ
</span></span><span class=line><span class=cl>            buildConfigField(&#34;boolean&#34;, &#34;LOG_DEBUG&#34;, &#34;false&#34;)     // é…ç½®Logæ—¥å¿—
</span></span><span class=line><span class=cl>            buildConfigField(&#34;String&#34;, &#34;URL_PERFIX&#34;, &#34;&#34;https://release.cn/&#34;&#34;)    // é…ç½®URLå‰ç¼€
</span></span><span class=line><span class=cl>            minifyEnabled false                                   // æ˜¯å¦å¯¹ä»£ç è¿›è¡Œæ··æ·†
</span></span><span class=line><span class=cl>            //æŒ‡å®šæ··æ·†çš„è§„åˆ™æ–‡ä»¶
</span></span><span class=line><span class=cl>            proguardFiles getDefaultProguardFile(&#39;proguard-android.txt&#39;), &#39;proguard-rules.pro&#39;
</span></span><span class=line><span class=cl>            signingConfig signingConfigs.release                  // è®¾ç½®ç­¾åä¿¡æ¯
</span></span><span class=line><span class=cl>            pseudoLocalesEnabled false                            // æ˜¯å¦åœ¨APKä¸­ç”Ÿæˆä¼ªè¯­è¨€ç¯å¢ƒï¼Œå¸®åŠ©å›½é™…åŒ–
</span></span><span class=line><span class=cl>            zipAlignEnabled true                                  // æ˜¯å¦å¯¹APKåŒ…è¿›è¡ŒZIPå¯¹é½ä¼˜åŒ–
</span></span><span class=line><span class=cl>            applicationIdSuffix &#39;test&#39;                            // åœ¨applicationId ä¸­æ·»åŠ äº†ä¸€ä¸ªåç¼€ï¼Œä¸€èˆ¬ä½¿ç”¨çš„ä¸å¤š
</span></span><span class=line><span class=cl>            versionNameSuffix &#39;test&#39;                              // åœ¨applicationId ä¸­æ·»åŠ äº†ä¸€ä¸ªåç¼€ï¼Œä¸€èˆ¬ä½¿ç”¨çš„ä¸å¤š
</span></span><span class=line><span class=cl>        }
</span></span><span class=line><span class=cl>        debug {   // æµ‹è¯•ç¯å¢ƒ
</span></span><span class=line><span class=cl>            buildConfigField(&#34;boolean&#34;, &#34;LOG_DEBUG&#34;, &#34;true&#34;)                  // é…ç½®Logæ—¥å¿—
</span></span><span class=line><span class=cl>            buildConfigField(&#34;String&#34;, &#34;URL_PERFIX&#34;, &#34;&#34;https://test.com/&#34;&#34;)   // é…ç½®URLå‰ç¼€
</span></span><span class=line><span class=cl>            minifyEnabled false                                               //æ˜¯å¦å¯¹ä»£ç è¿›è¡Œæ··æ·†
</span></span><span class=line><span class=cl>            //æŒ‡å®šæ··æ·†çš„è§„åˆ™æ–‡ä»¶
</span></span><span class=line><span class=cl>            proguardFiles getDefaultProguardFile(&#39;proguard-android.txt&#39;), &#39;proguard-rules.pro&#39;   
</span></span><span class=line><span class=cl>            signingConfig signingConfigs.debug                                // è®¾ç½®ç­¾åä¿¡æ¯
</span></span><span class=line><span class=cl>            debuggable false                                                  // æ˜¯å¦æ”¯æŒæ–­ç‚¹è°ƒè¯•
</span></span><span class=line><span class=cl>            jniDebuggable false                                               // æ˜¯å¦å¯ä»¥è°ƒè¯•NDKä»£ç 
</span></span><span class=line><span class=cl>            renderscriptDebuggable false                                      // æ˜¯å¦å¼€å¯æ¸²æŸ“è„šæœ¬
</span></span><span class=line><span class=cl>            zipAlignEnabled true                                              // æ˜¯å¦å¯¹APKåŒ…æ‰§è¡ŒZIPå¯¹é½ä¼˜åŒ–
</span></span><span class=line><span class=cl>            pseudoLocalesEnabled false                                        // æ˜¯å¦åœ¨APKä¸­ç”Ÿæˆä¼ªè¯­è¨€ç¯å¢ƒï¼Œå¸®åŠ©å›½é™…åŒ–
</span></span><span class=line><span class=cl>            applicationIdSuffix &#39;test&#39;                                        // åœ¨applicationId ä¸­æ·»åŠ äº†ä¸€ä¸ªåç¼€ï¼Œä¸€èˆ¬ä½¿ç”¨çš„ä¸å¤š
</span></span><span class=line><span class=cl>            versionNameSuffix &#39;test&#39;                                          // åœ¨applicationId ä¸­æ·»åŠ äº†ä¸€ä¸ªåç¼€ï¼Œä¸€èˆ¬ä½¿ç”¨çš„ä¸å¤š
</span></span><span class=line><span class=cl>        }
</span></span><span class=line><span class=cl>    }
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>dependencies {     //é¡¹ç›®çš„ä¾èµ–å…³ç³»
</span></span><span class=line><span class=cl>    ğŸ‘‰// æœ¬åœ°jaråŒ…ä¾èµ–ï¼šæ–°å»º Project\app\libs æ–‡ä»¶å¤¹ï¼Œç²˜è´´ jar
</span></span><span class=line><span class=cl>    implementation fileTree(include: [&#39;*.jar&#39;], dir: &#39;libs&#39;)    
</span></span><span class=line><span class=cl>    testImplementation &#39;junit:junit:4.12&#39;                       // å£°æ˜æµ‹è¯•ç”¨ä¾‹åº“
</span></span><span class=line><span class=cl>    implementation &#39;com.android.support:appcompat-v7:26.1.0&#39;    // è¿œç¨‹ä¾èµ–
</span></span><span class=line><span class=cl>    implementation project(&#39;:library&#39;)                          // é¡¹ç›®æœ¬åœ°çš„Libraryæ¨¡å—
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><details class=spoiler id=spoiler-2><summary>å…¶ä»–é…ç½®</summary><p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>android {
</span></span><span class=line><span class=cl>    signingConfigs {                        // è‡ªåŠ¨åŒ–æ‰“åŒ…é…ç½®
</span></span><span class=line><span class=cl>            release {                       // çº¿ä¸Šç¯å¢ƒ
</span></span><span class=line><span class=cl>                keyAlias &#39;test&#39;
</span></span><span class=line><span class=cl>                keyPassword &#39;123456&#39;
</span></span><span class=line><span class=cl>                storeFile file(&#39;test.keystore&#39;)
</span></span><span class=line><span class=cl>                storePassword &#39;123456&#39;
</span></span><span class=line><span class=cl>            }
</span></span><span class=line><span class=cl>            debug {                         // å¼€å‘ç¯å¢ƒ
</span></span><span class=line><span class=cl>                keyAlias &#39;test&#39;
</span></span><span class=line><span class=cl>                keyPassword &#39;123456&#39;
</span></span><span class=line><span class=cl>                storeFile file(&#39;test.keystore&#39;)
</span></span><span class=line><span class=cl>                storePassword &#39;123456&#39;
</span></span><span class=line><span class=cl>            }
</span></span><span class=line><span class=cl>    }
</span></span><span class=line><span class=cl>    sourceSets {                             // ç›®å½•æŒ‡å‘é…ç½®
</span></span><span class=line><span class=cl>            main {
</span></span><span class=line><span class=cl>                jniLibs.srcDirs = [&#39;libs&#39;]   // æŒ‡å®šlibåº“ç›®å½•
</span></span><span class=line><span class=cl>            }
</span></span><span class=line><span class=cl>    }
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>    packagingOptions{
</span></span><span class=line><span class=cl>            // å½“æœ‰é‡å¤æ–‡ä»¶æ—¶ ,ä½¿ç”¨ç¬¬ä¸€ä¸ªåŒ¹é…çš„æ–‡ä»¶æ‰“åŒ…è¿›apk
</span></span><span class=line><span class=cl>            pickFirsts = [&#39;META-INF/LICENSE&#39;]
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            // å½“å‡ºç°é‡å¤æ–‡ä»¶æ—¶ åˆå¹¶é‡å¤çš„æ–‡ä»¶æ‰“åŒ…è¿›apk
</span></span><span class=line><span class=cl>            merge &#39;META-INF/LICENSE&#39;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            // åŒæ—¶ä½¿ç”¨butterknifeã€dagger2æ¡†æ¶å¤„ç† ï¼ˆå¸¸ç”¨ï¼‰
</span></span><span class=line><span class=cl>            exclude &#39;META-INF/services/javax.annotation.processing.Processor&#39;
</span></span><span class=line><span class=cl>    }
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    productFlavors {
</span></span><span class=line><span class=cl>        wandoujia {     // è±Œè±†èšæ¸ é“åŒ…é…ç½®
</span></span><span class=line><span class=cl>            manifestPlaceholders = [UMENG_CHANNEL_VALUE: &#34;wandoujia&#34;]
</span></span><span class=line><span class=cl>        }
</span></span><span class=line><span class=cl>        xiaomi {
</span></span><span class=line><span class=cl>            manifestPlaceholders = [UMENG_CHANNEL_VALUE: &#34;xiaomi&#34;]
</span></span><span class=line><span class=cl>            applicationId &#34;com.wiky.gradle.xiaomi&#34;   // é…ç½®åŒ…å
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        }
</span></span><span class=line><span class=cl>        _360 {
</span></span><span class=line><span class=cl>            manifestPlaceholders = [UMENG_CHANNEL_VALUE: &#34;_360&#34;]
</span></span><span class=line><span class=cl>        }
</span></span><span class=line><span class=cl>        //...
</span></span><span class=line><span class=cl>    } 
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    lintOptions {                     // å…³é—­æ£€æŸ¥lintï¼ˆæœ‰é”™è¯¯ä¼šåœæ­¢buildï¼‰
</span></span><span class=line><span class=cl>            abortOnError false        // å³ä½¿æŠ¥é”™ä¹Ÿä¸ä¼šåœæ­¢æ‰“åŒ…
</span></span><span class=line><span class=cl>            checkReleaseBuilds false  // æ‰“åŒ…releaseç‰ˆæœ¬çš„æ—¶å€™è¿›è¡Œæ£€æµ‹
</span></span><span class=line><span class=cl>    }
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    buildFeatures { // trueè¡¨ç¤ºç”Ÿæˆbuild/app/generated/source/buildConfig/release/com/example/app/BuildConfig.javaï¼Œä¸éœ€è¦æ‰‹åŠ¨ç»´æŠ¤ç‰ˆæœ¬å·ã€æ¸ é“ç­‰å¸¸é‡
</span></span><span class=line><span class=cl>        buildConfig = false
</span></span><span class=line><span class=cl>    }
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div></p></details><ul><li>gradle-wrapper-propertiesï¼šé…ç½® Gradle Wrapper</li><li>gradle-propertiesï¼šé…ç½® Gradleç¼–è¯‘å‚æ•°ï¼Œè¯¦è§<a class=link href=URLhttps://docs.gradle.org/current/userguide/build_environment.html#sec:gradle_configuration_properties>æ–‡æ¡£</a></li><li>setting.gradleï¼šé…ç½® Gradle çš„å¤šé¡¹ç›®ç®¡ç†</li><li>local.propertiesï¼šå­˜æ”¾ Android é¡¹ç›®çš„ç§æœ‰å±æ€§é…ç½®ï¼Œå¦‚ SDK è·¯å¾„</li><li>multiDexKeep.proã€proguard-rules.proï¼šå¯é€‰çš„æ··æ·†æ–‡ä»¶ï¼Œç”¨äºé…ç½®æ”¾ç½®åœ¨ä¸» Dex çš„ç±»ã€å£°æ˜é¿å…æ··æ·†çš„ç±»</li></ul><h3 id=javaæ’ä»¶>javaæ’ä»¶</h3><p><a class=link href="https://juejin.cn/post/7098383560746696718?searchId=20241129193310F29515280AF1035FC168#heading-9" target=_blank rel=noopener>å‚è€ƒ</a></p><p><strong>ç®€ä»‹</strong></p><ul><li>Android Appï¼šAPKæ–‡ä»¶ï¼Œæ–°å»ºæ—¶é€‰æ‹©Empty Views Activity</li><li>Android Libraryï¼šARRæ–‡ä»¶ï¼Œåœ¨ç›®å½•ç»“æ„ä¸Šä¸Android Appç›¸åŒï¼ŒåŒ…å«æ„å»ºAPPæ‰€éœ€çš„ä¸€åˆ‡ã€‚å½“ä½ éœ€è¦æ„å»ºä¸åŒçš„APKæ—¶ï¼Œå…·æœ‰é€šç”¨çš„æ¨¡å—ï¼ˆå¦‚è´¦æˆ·ç®¡ç†ï¼‰ï¼Œå¯ä»¥å°†libraryæ·»åŠ ä¸ºæ¯ä¸ªAPPæ¨¡å—çš„ä¾èµ–é¡¹</li><li>Java or Kotlin Libraryï¼ˆæ’ä»¶ï¼‰ï¼šJARæ–‡ä»¶ï¼Œæ‰“åŒ…å¯é‡ç”¨çš„ä»£ç ï¼Œä¸å«èµ„æºæ–‡ä»¶ï¼Œå¦‚resä¸­çš„å›¾ç‰‡</li></ul><p><strong>ä½¿ç”¨</strong></p><ol><li>ç”Ÿæˆjar\arr</li></ol><p>Android Studio æ‰“å¼€å³ä¾§çš„ Gradleï¼Œé€‰æ‹©éœ€è¦æ‰“åŒ…çš„module â€”> Tasks â€”> build, åŒå‡» assemble</p><ol start=2><li><p>ç”Ÿæˆjar\arråˆ°Project\build\library\libsæˆ–outputs\aarï¼Œç§»åˆ°Project\app\libs</p></li><li><p>åœ¨æ¨¡å—gradleæ·»åŠ </p></li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>implementation fileTree(dir: &#39;libs&#39;, include: [&#39;*.aar&#39;])
</span></span><span class=line><span class=cl>implementation fileTree(dir: &#39;libs&#39;, include: [&#39;*.jar&#39;])
</span></span></code></pre></div><p><strong>è‡ªå®šä¹‰æ’ä»¶çš„ä¸‰ç§æ–¹å¼</strong></p><ul><li>build scriptï¼šåœ¨<code>build.gradle</code>è„šæœ¬ä¸­ç›´æ¥ç¼–å†™ï¼Œåªèƒ½åœ¨æœ¬æ–‡ä»¶å†…ä½¿ç”¨</li><li>buildSrcé¡¹ç›®ï¼šæ–°å»ºä¸€ä¸ªåä¸º<code>buildSrc</code>çš„Moduleï¼ŒGradleä¼šè‡ªåŠ¨ç¼–è¯‘å’Œæµ‹è¯•ï¼Œåªèƒ½åœ¨æœ¬é¡¹ç›®ä¸­ä½¿ç”¨</li><li>ç‹¬ç«‹é¡¹ç›®ï¼šåœ¨ç‹¬ç«‹çš„é¡¹ç›®ä¸­ç¼–å†™æ’ä»¶ï¼Œå‘å¸ƒåˆ°æœ¬åœ°æˆ–è€…è¿œç¨‹jcenterã€mavenä»“åº“ä¾›å…¶ä»–é¡¹ç›®ä½¿ç”¨</li></ul><p>ç‹¬ç«‹é¡¹ç›®æ‰“åŒ…jaråˆ°mavenï¼š</p><ol><li><p>åœ¨é¡¹ç›®ä¸­æ–°å»ºFile -> New -> New Module -> Java or Kotlin Library</p></li><li><p>ä¿®æ”¹build.gradleï¼š</p></li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>// Gradleæ’ä»¶
</span></span><span class=line><span class=cl>apply plugin: &#39;groovy&#39;
</span></span><span class=line><span class=cl>apply plugin: &#39;maven&#39;
</span></span><span class=line><span class=cl>apply plugin: &#39;java-gradle-plugin&#39;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>// ä¾èµ–
</span></span><span class=line><span class=cl>dependencies {
</span></span><span class=line><span class=cl>    implementation gradleApi()     //Groovy DSL
</span></span><span class=line><span class=cl>    implementation localGroovy()   //Gradle DSL
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>// ä»“åº“
</span></span><span class=line><span class=cl>repositories {
</span></span><span class=line><span class=cl>    mavenCentral()
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>// é…ç½®æ’ä»¶idå’Œæ˜ å°„ç±»ï¼ˆç”Ÿæˆresourcesæ–‡ä»¶å¤¹å‚¨å­˜)
</span></span><span class=line><span class=cl>gradlePlugin {
</span></span><span class=line><span class=cl>    plugins {
</span></span><span class=line><span class=cl>        greeting {
</span></span><span class=line><span class=cl>            // æ’ä»¶id
</span></span><span class=line><span class=cl>            id = &#39;CustomPlugin&#39;
</span></span><span class=line><span class=cl>            // æ’ä»¶å®ç°ç±»
</span></span><span class=line><span class=cl>            implementationClass = &#39;com.group.myplugin.CustomPlugin&#39;
</span></span><span class=line><span class=cl>        }
</span></span><span class=line><span class=cl>    }
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>def group=&#39;com.group.myplugin&#39;
</span></span><span class=line><span class=cl>def artifactId=&#39;myplugin&#39;
</span></span><span class=line><span class=cl>def version=&#39;1.0.0&#39;
</span></span><span class=line><span class=cl>// æŒ‡å®šæœ¬åœ°mavençš„è·¯å¾„ï¼Œåœ¨æ’ä»¶ç›®å½•ä¸‹
</span></span><span class=line><span class=cl>def uploadRepo = &#39;../myplugin&#39;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>// æ‰“åŒ…åˆ°æœ¬åœ°mavenä»“åº“
</span></span><span class=line><span class=cl>uploadArchives {
</span></span><span class=line><span class=cl>    repositories {
</span></span><span class=line><span class=cl>        mavenDeployer {
</span></span><span class=line><span class=cl>            pom.groupId = group
</span></span><span class=line><span class=cl>            pom.artifactId = artifactId
</span></span><span class=line><span class=cl>            pom.version = version
</span></span><span class=line><span class=cl>            repository(url: uri(uploadRepo))
</span></span><span class=line><span class=cl>        }
</span></span><span class=line><span class=cl>    }
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><ol start=3><li>æ–°å»ºCustomPlugin.groovyæ–‡ä»¶å†™æ’ä»¶ï¼šå®ç°Pluginæ¥å£</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>package com.group.myplugin
</span></span><span class=line><span class=cl>import org.gradle.api.Plugin
</span></span><span class=line><span class=cl>import org.gradle.api.Project
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>class CustomPlugin implements Plugin<span class=p>&lt;</span><span class=nt>Project</span><span class=p>&gt;</span> {
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    @Override
</span></span><span class=line><span class=cl>    void apply(Project project) {
</span></span><span class=line><span class=cl>        println(&#34;Hello gradle plugin&#34;)
</span></span><span class=line><span class=cl>    }
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><ol start=4><li>å°†æ’ä»¶å‘å¸ƒåˆ°æœ¬åœ° Maven ä»“åº“çš„2ç§æ–¹å¼ï¼š</li></ol><ul><li><p>æ‰§è¡Œ<code>./gradlew uploadArchives</code>å‘½ä»¤</p></li><li><p>å¯è§†åŒ–ç•Œé¢çš„ uploadArchives Task ç‚¹å‡»å‘å¸ƒ</p></li></ul><h2 id=æ•…éšœæ’é™¤>æ•…éšœæ’é™¤</h2><h3 id=é…ç½®>é…ç½®</h3><ul><li>é…ç½®build.gradle(project:android)</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>allprojects {
</span></span><span class=line><span class=cl>    repositories {
</span></span><span class=line><span class=cl>        google()
</span></span><span class=line><span class=cl>        jcenter()
</span></span><span class=line><span class=cl>        maven { url &#34;https://storage.googleapis.com/download.flutter.io&#34; }
</span></span><span class=line><span class=cl>    }
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><h3 id=æ›´æ–°>æ›´æ–°</h3><ul><li>flutter</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>flutter upgrade
</span></span><span class=line><span class=cl>flutter doctor
</span></span></code></pre></div><h3 id=æŠ¥é”™>æŠ¥é”™</h3><p><strong>æŸ¥çœ‹é”™è¯¯ä¿¡æ¯</strong>
æ§åˆ¶å°Terminalï¼š<code>./gradlew assembleDebug --info</code></p><p><strong>å¸¸è§é”™è¯¯</strong></p><ul><li>æ›´æ–°Android Studio</li><li>é‡æ–°å»ºé¡¹ç›®</li><li>\android\app\build.gradle</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>compileSdkVersion 33
</span></span><span class=line><span class=cl>minSdkVersion 21
</span></span></code></pre></div><p><strong>å…¶ä»–é”™è¯¯</strong></p><ul><li>Attribute application@label value=(Dormitory) from AndroidManifest.xml</li></ul><p>è§£å†³ï¼šè¿›å…¥\android\app\src\main\AndroidManifest.xml</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>manifest</span> <span class=na>xmlns:android</span><span class=o>=</span><span class=s>&#34;http://schemas.android.com/apk/res/android&#34;</span>
</span></span><span class=line><span class=cl>    <span class=na>xmlns:tools</span><span class=o>=</span><span class=s>&#34;http://schemas.android.com/tools&#34;</span>  <span class=err>//</span> <span class=err>æ·»åŠ æ­¤è¡Œ</span>
</span></span><span class=line><span class=cl>    <span class=na>package</span><span class=o>=</span><span class=s>&#34;com.example.model_dev&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>   <span class=p>&lt;</span><span class=nt>application</span>
</span></span><span class=line><span class=cl>        <span class=na>tools:replace</span><span class=o>=</span><span class=s>&#34;android:label&#34;</span>              <span class=err>//</span> <span class=err>æ·»åŠ æ­¤è¡Œ</span>
</span></span><span class=line><span class=cl>        <span class=na>android:label</span><span class=o>=</span><span class=s>&#34;model_dev&#34;</span>
</span></span><span class=line><span class=cl>        <span class=na>android:name</span><span class=o>=</span><span class=s>&#34;${applicationName}&#34;</span>
</span></span><span class=line><span class=cl>        <span class=na>android:icon</span><span class=o>=</span><span class=s>&#34;@mipmap/ic_launcher&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>activity</span>
</span></span></code></pre></div><ul><li>Gradle threw an error while downloading artifacts from the network</li></ul><p>è§£å†³ï¼šGradleæŸåï¼Œè¿›å…¥ C:\Users\username åˆ é™¤ .gradle æ–‡ä»¶å¤¹</p><ul><li>Execution failed for task:generateDebugRFile
Android Studio -> Analyze -> Code Inspect</li></ul><h1 id=dart>dart</h1><h2 id=å˜é‡>å˜é‡</h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl># åˆ›å»ºä¸€ä¸ªå˜é‡å¹¶å°†å…¶åˆå§‹åŒ–
</span></span><span class=line><span class=cl>var name = &#39;Bob&#39;;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl># æŒ‡å®šç±»å‹
</span></span><span class=line><span class=cl>String name = &#39;Bob&#39;;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl># å¦‚æœå¯¹è±¡(name)ä¸å±€é™äºå•ä¸€çš„ç±»å‹(ä¾‹å¦‚String),å¯ä»¥å°†å…¶æŒ‡å®šä¸º Objectï¼ˆæˆ– dynamicï¼‰ç±»å‹
</span></span><span class=line><span class=cl>Object name = &#39;Bob&#39;;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>? å¯ç©ºç±»å‹
</span></span><span class=line><span class=cl>int? a=123;   // int? è¡¨ç¤ºaæ˜¯ä¸€ä¸ªå¯ç©ºç±»å‹
</span></span><span class=line><span class=cl>int? a;  // æœªåˆå§‹åŒ–å˜é‡çš„åˆå§‹å€¼ä¸ºnull 
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>! ç±»å‹æ–­è¨€
</span></span><span class=line><span class=cl>a!    // aä¸ä¸ºç©º
</span></span></code></pre></div><ul><li>late
<a class=link href=https://dart.dev/null-safety/understanding-null-safety#lazy-initialization target=_blank rel=noopener>å»¶è¿Ÿåˆå§‹åŒ–</a>:å­—æ®µè¢«ç¬¬ä¸€æ¬¡è®¿é—®æ—¶å»¶è¿Ÿè¿è¡Œï¼Œè€Œä¸æ˜¯åœ¨å®ä¾‹åŒ–åç«‹å³è¿è¡Œã€‚</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>class Weather {
</span></span><span class=line><span class=cl>  late int _temperature = _readThermometer();
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><ul><li>final
å·²ç»å®ä¾‹åŒ–çš„finalå¯¹è±¡ä¸èƒ½æŒ‡å‘å¦ä¸€ä¸ªä¸åŒçš„å¯¹è±¡ï¼Œä½†å…¶å­—æ®µå¯ä»¥æ›´æ”¹ã€‚</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>final name = &#39;Bob&#39;; 
</span></span><span class=line><span class=cl>final String nickname = &#39;Bobby&#39;;
</span></span></code></pre></div><ul><li>const
ç¼–è¯‘æ—¶å¸¸é‡ï¼šä¸€ç»å®šä¹‰å°±ä¼šåœ¨ç¼–è¯‘æœŸé—´å¯¹å…¶è¿›è¡Œåˆå§‹åŒ–ï¼Œconstå¯¹è±¡åŠå…¶å­—æ®µæ— æ³•æ›´æ”¹ã€‚</li></ul><h2 id=ç±»å‹>ç±»å‹</h2><h3 id=å¸¸è§„ç±»å‹>å¸¸è§„ç±»å‹</h3><div class="box info"><span class="icon-box baseline"><svg><use href="#info-box"/></svg></span><p>æ³¨æ„é¦–å­—æ¯å¤§å°å†™</p></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>int    æ•´æ•°å€¼
</span></span><span class=line><span class=cl>double æµ®ç‚¹æ•°å­—
</span></span><span class=line><span class=cl>String å­—ç¬¦ä¸²                  
</span></span><span class=line><span class=cl>bool   å¸ƒå°”ç±»å‹
</span></span><span class=line><span class=cl>List   åˆ—è¡¨ç±»å‹
</span></span><span class=line><span class=cl>Map    å­—å…¸å‹
</span></span></code></pre></div><ul><li><p>List<br>å±æ€§ï¼š</p><ul><li>lengthã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€é•¿åº¦</li><li>reversedã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ç¿»è½¬</li><li>isEmptyã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€æ˜¯å¦ä¸ºç©º</li><li>isNotEmptyã€€ã€€ã€€ã€€ã€€ã€€ã€€æ˜¯å¦ä¸ä¸ºç©º</li></ul><p>æ–¹æ³•ï¼š</p><ul><li>add()ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€å¢åŠ </li><li>addAll()ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€æ‹¼æ¥æ•°ç»„</li><li>indexOf()ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€æŸ¥æ‰¾ ä¼ å…¥å…·ä½“å€¼</li><li>remove()ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€åˆ é™¤ ä¼ å…¥å…·ä½“å€¼</li><li>removeAt()ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€åˆ é™¤ ä¼ å…¥ç´¢å¼•å€¼</li><li>fillRange()ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ä¿®æ”¹</li><li>insert(index,value);ã€€ã€€ã€€ã€€ã€€ã€€ã€€æŒ‡å®šä½ç½®æ’å…¥</li><li>insertAll(index,list)ã€€ã€€ã€€ã€€ã€€ã€€ã€€æŒ‡å®šä½ç½®æ’å…¥List</li><li>toList()ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€å…¶ä»–ç±»å‹è½¬æ¢æˆList</li><li>join()ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€Listè½¬æ¢æˆå­—ç¬¦ä¸²</li><li>split()ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€å­—ç¬¦ä¸²è½¬åŒ–æˆList</li><li>forEach()</li><li>map()<br>ç¤ºä¾‹ï¼š<code>List&lt;Widget>.from(MyMap.keys.map((item) => SomeWidget(item)).toList());</code><br>map()å¯ä»¥ä¼ å…¥Listæˆ–Mapçš„æ¯é¡¹æ•°æ®ï¼ŒtoList()è½¬æ¢æˆListï¼ŒList<widget>.fromæ¥æ”¶Iterableï¼ˆ[Map.keys]ã€[List] å’Œ [Set] éƒ½æ˜¯ <code>Iterable</code>ï¼‰ï¼Œè¿”å›widget Listã€‚</li><li>where()</li><li>any()</li><li>every()</li></ul></li><li><p>Map<br>å±æ€§ï¼š</p><ul><li>keysã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€è·å–æ‰€æœ‰çš„keyå€¼</li><li>valuesã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€è·å–æ‰€æœ‰çš„valueå€¼</li><li>isEmptyã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€æ˜¯å¦ä¸ºç©º</li><li>isNotEmptyã€€ã€€ã€€ã€€ã€€ã€€æ˜¯å¦ä¸ä¸ºç©º</li></ul><p>æ–¹æ³•ï¼š</p><ul><li>remove(key)ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€åˆ é™¤æŒ‡å®škeyçš„æ•°æ®</li><li>addAll({&mldr;})ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€åˆå¹¶æ˜ å°„ ç»™æ˜ å°„å†…å¢åŠ å±æ€§</li><li>containsValue()ã€€ã€€ã€€ã€€ã€€ã€€ã€€æŸ¥çœ‹æ˜ å°„å†…çš„å€¼ è¿”å›true/false</li><li>forEach()</li><li>map()</li><li>where()</li><li>any()</li><li>every()</li></ul></li></ul><h3 id=å…¶å®ƒç±»å‹>å…¶å®ƒç±»å‹</h3><ul><li><p><a class=link href=https://dart.dev/guides/language/language-tour#enumerated-types target=_blank rel=noopener>enum</a>ã€€ã€€æšä¸¾ç±»å‹,ç”¨äºè¡¨ç¤ºå›ºå®šæ•°é‡çš„å¸¸é‡å€¼ã€‚åœ¨switchè¯­å¥ä¸­è¿è¡Œè‰¯å¥½ã€‚</p></li><li><p>Objectã€€å¯¹è±¡ç±»å‹ï¼Œå…è®¸ä»»ä½•ç±»å‹ã€‚</p></li><li><p><a class=link href=https://dart.dev/guides/language/effective-dart/design#avoid-using-dynamic-unless-you-want-to-disable-static-checking target=_blank rel=noopener>dynamic</a>ã€€åŠ¨æ€ç±»å‹ï¼Œä¸ä»…æ¥å—æ‰€æœ‰å¯¹è±¡ï¼Œè€Œä¸”è¿˜å…è®¸æ‰€æœ‰æ“ä½œ</p></li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>void main() {
</span></span><span class=line><span class=cl>  dynamic foo=&#34;bar&#34;;
</span></span><span class=line><span class=cl>  print(foo); 
</span></span><span class=line><span class=cl>  foo=123;
</span></span><span class=line><span class=cl>  print(foo);
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><ul><li>Setã€€æ— åºé›†åˆï¼Œä¸»è¦çš„åŠŸèƒ½å°±æ˜¯å»é™¤æ•°ç»„é‡å¤å†…å®¹</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>void main(){
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  List myList=[&#39;é¦™è•‰&#39;,&#39;è‹¹æœ&#39;,&#39;è¥¿ç“œ&#39;,&#39;é¦™è•‰&#39;,&#39;è‹¹æœ&#39;,&#39;é¦™è•‰&#39;,&#39;è‹¹æœ&#39;];
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  var s=new Set();
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  s.addAll(myList);
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  print(s);
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  print(s.toList());
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><ul><li>Futureã€€ç”¨äº<a class=link href=https://dart.dev/language/async target=_blank rel=noopener>å¼‚æ­¥æ”¯æŒ</a>ã€‚</li><li>Streamã€€ç”¨äºå¼‚æ­¥æ”¯æŒã€‚</li><li>Iterableã€€ç”¨åœ¨<a class=link href=https://dart.dev/guides/libraries/library-tour#iteration target=_blank rel=noopener>for-in å¾ªç¯</a>å’ŒåŒæ­¥<a class=link href=https://dart.dev/language/functions#generators target=_blank rel=noopener>ç”Ÿæˆå™¨å‡½æ•°</a>ä¸­ã€‚</li><li>Neverã€€è¡¨ç¤ºè¡¨è¾¾å¼æ°¸è¿œæ— æ³•æˆåŠŸå®Œæˆè®¡ç®—ã€‚æœ€å¸¸ç”¨äºæ€»æ˜¯æŠ›å‡ºå¼‚å¸¸çš„å‡½æ•°ã€‚</li><li>voidã€€è¡¨ç¤ºä»æœªä½¿ç”¨è¿‡æŸä¸ªå€¼ã€‚é€šå¸¸ç”¨ä½œè¿”å›ç±»å‹ã€‚</li><li>(value1, value2)ã€€è®°å½•ï¼ˆéœ€dart3ï¼‰</li><li>Nullã€€ç©ºå€¼</li></ul><h3 id=ä¸å¸¸ç”¨çš„ç±»å‹>ä¸å¸¸ç”¨çš„ç±»å‹</h3><ul><li><p>runes æš´éœ²äº†å­—ç¬¦ä¸²çš„ Unicode ä»£ç ç‚¹ï¼ˆUnicode ä¸ºæ¯ä¸ªå­—æ¯ã€æ•°å­—å’Œç¬¦å·å®šä¹‰äº†ä¸€ä¸ªå”¯ä¸€çš„æ•°å€¼ï¼‰ã€‚ä¾‹å¦‚ï¼Œç”¨äºè¡¨æƒ…ç¬¦å·ï¼Œ(ğŸ˜†) æ˜¯<code>\u{1f606}</code>ã€‚ç»å¸¸è¢« &ldquo;characters&rdquo; API å–ä»£ã€‚</p></li><li><p>Symbol è¡¨ç¤ºæ ‡è¯†ç¬¦ï¼Œä¾‹å¦‚<code>#</code>ã€‚</p></li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>void main() {
</span></span><span class=line><span class=cl>  assert(Symbol(&#39;bar&#39;)==#bar);
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>// true
</span></span></code></pre></div><h3 id=ç±»å‹è½¬æ¢>ç±»å‹è½¬æ¢</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>myint = int.parse(myString);            // String -&gt; int
</span></span><span class=line><span class=cl>myString = myint.toString();            // int -&gt; String
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>mydouble = double.parse(myString);      // String -&gt; double
</span></span><span class=line><span class=cl>myString = 3.14159.toStringAsFixed(2);  // double -&gt; String (myString = &#39;3.14&#39;) 
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>mynum.member = mynum.values.byName(myString);   // String -&gt; enum
</span></span><span class=line><span class=cl>myString = mynum.member.name;                   // enum -&gt; String
</span></span></code></pre></div><h2 id=å‡½æ•°>å‡½æ•°</h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>bool isNoble(int atomicNumber) {                 // bool:è¿”å›ç±»å‹
</span></span><span class=line><span class=cl>  return _nobleGases[atomicNumber] != null;
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><ul><li><p>ç®­å¤´å‡½æ•° =></p><p><code>=> expr</code> æ˜¯ <code>{ return expr; }</code>çš„ç®€å†™</p></li></ul><h3 id=å‚æ•°>å‚æ•°</h3><ul><li>å‘½åå‚æ•°ï¼ˆå¯ä¼ å¯ä¸ä¼ ï¼‰</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>  String printUserInfo(String username, {int age = 0, String sex = &#39;ç”·&#39;}) {//è¡Œå‚ï¼Œç”¨å¤§æ‹¬å·    
</span></span><span class=line><span class=cl>    if (age != 0) {
</span></span><span class=line><span class=cl>      return &#34;å§“å:$username---æ€§åˆ«:$sex--å¹´é¾„:$age&#34;;
</span></span><span class=line><span class=cl>    }
</span></span><span class=line><span class=cl>    return &#34;å§“å:$username---æ€§åˆ«:$sex--å¹´é¾„ä¿å¯†&#34;;
</span></span><span class=line><span class=cl>  }
</span></span><span class=line><span class=cl>  print(printUserInfo(&#39;å¼ ä¸‰&#39;));                         //å®å‚ 
</span></span><span class=line><span class=cl>  print(printUserInfo(&#39;å¼ ä¸‰&#39;, age: 20, sex: &#39;æœªçŸ¥&#39;));   //å®å‚,å‘½åå‚æ•°çš„å®å‚å¿…é¡»ä¼ å…¥å‚æ•°åage: sex: 
</span></span></code></pre></div><ul><li>ä½ç½®å‚æ•°ï¼ˆå¯ä¼ å¯ä¸ä¼ ï¼‰</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>  String printUserInfo(String username,[String sex=&#39;ç”·&#39;,int age=0]){  //è¡Œå‚ï¼Œç”¨ä¸­æ‹¬å·
</span></span><span class=line><span class=cl>    if(age!=0){
</span></span><span class=line><span class=cl>      return &#34;å§“å:$username---æ€§åˆ«:$sex--å¹´é¾„:$age&#34;;
</span></span><span class=line><span class=cl>    }
</span></span><span class=line><span class=cl>    return &#34;å§“å:$username---æ€§åˆ«:$sex--å¹´é¾„ä¿å¯†&#34;;
</span></span><span class=line><span class=cl>  }
</span></span><span class=line><span class=cl>  print(printUserInfo(&#39;å¼ ä¸‰&#39;));           //å®å‚
</span></span><span class=line><span class=cl>  print(printUserInfo(&#39;å°æ&#39;,&#39;å¥³&#39;,30));   //å®å‚
</span></span></code></pre></div><h2 id=è¿ç®—ç¬¦>è¿ç®—ç¬¦</h2><ul><li><p>ç®—æœ¯è¿ç®—ç¬¦</p><p><code>+</code>(åŠ )ã€€ã€€<code>â€“</code>(å‡)ã€€ã€€<code>-</code>(è´Ÿ)ã€€ã€€<code>*</code>(ä¹˜)ã€€ã€€<code>/</code>(é™¤)ã€€ã€€<code>~/</code>(å–æ•´)ã€€ã€€<code>%</code>ï¼ˆå–ä½™ï¼‰</p></li><li><p>å…³ç³»è¿ç®—ç¬¦</p><p><code>==</code>ã€€ã€€<code>ï¼=</code>ã€€ã€€<code>></code>ã€€ã€€<code>&lt;</code>ã€€ã€€<code>>=</code>ã€€ã€€<code>&lt;=</code></p></li><li><p>é€»è¾‘è¿ç®—ç¬¦</p><p><code>!</code>(å–å)ã€€ã€€<code>&&</code>(ä¸)ã€€ã€€<code>||</code>(æˆ–)</p></li><li><p>èµ‹å€¼è¿ç®—ç¬¦</p><p>åŸºç¡€èµ‹å€¼è¿ç®—ç¬¦ã€€ã€€<code>=</code>ã€€ã€€<code>??=</code>(ä¸º null çš„å˜é‡èµ‹å€¼)</p><p>å¤åˆèµ‹å€¼è¿ç®—ç¬¦ã€€ã€€<code>+=</code>ã€€ã€€<code>-=</code>ã€€ã€€<code>*=</code>ã€€ã€€<code>/=</code>ã€€ã€€<code>%=</code>ã€€ã€€<code>~/=</code></p></li><li><p>å…¶ä»–è¿ç®—ç¬¦
<code>()</code>ã€€ã€€ä½¿ç”¨ä¸€ä¸ªæ–¹æ³•</p><p><code>[]</code>ã€€ã€€è®¿é—® List</p><p><code>?[]</code>ã€€ã€€è®¿é—® List,å·¦ä¾§/?è¡¨ç¤ºå¯ä»¥ä¸ºnull</p><p><code>.</code>ã€€ã€€è®¿é—®æˆå‘˜</p><p><code>?.</code>ã€€ã€€è®¿é—®æˆå‘˜,å·¦ä¾§/?è¡¨ç¤ºå¯ä»¥ä¸ºnull</p><p><code>..</code> çº§è”ï¼Œå¯ä»¥åœ¨åŒä¸€ä¸ªå¯¹è±¡ä¸Šè®¿é—®å®ä¾‹æˆå‘˜å’Œè°ƒç”¨å¤šä¸ªå®ä¾‹æ–¹æ³•</p></li><li><p>if-elseçš„è¡¨è¾¾å¼ï¼š</p><ul><li>condition <code>?</code> expr1 <code>:</code> expr2</li></ul><p>å¦‚æœæ¡ä»¶ä¸ºçœŸï¼Œåˆ™è®¡ç®—expr1ï¼ˆå¹¶è¿”å›å…¶å€¼ï¼‰ï¼›å¦åˆ™ï¼Œè®¡ç®—å¹¶è¿”å›expr2çš„å€¼ã€‚</p><ul><li>expr1 <code>??</code> expr2</li></ul><p>å¦‚æœexpr1ä¸ä¸º nullï¼Œåˆ™è¿”å›å…¶å€¼ï¼›å¦åˆ™ï¼Œè®¡ç®—å¹¶è¿”å›expr2çš„å€¼ã€‚</p></li></ul><h2 id=ç±»>ç±»</h2><h3 id=æ–¹æ³•>æ–¹æ³•</h3><h4 id=å®ä¾‹å˜é‡å’Œæ–¹æ³•>å®ä¾‹å˜é‡å’Œæ–¹æ³•</h4><p>å®ä¾‹å˜é‡:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>class Point {
</span></span><span class=line><span class=cl>  double? x; // Declare instance variable x, initially null.
</span></span><span class=line><span class=cl>  double? y; // Declare y, initially null.
</span></span><span class=line><span class=cl>  double z = 0; // Declare z, initially 0.
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><p>å®ä¾‹æ–¹æ³•å¯ä»¥è®¿é—®å®ä¾‹å˜é‡å’Œ this</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>import &#39;dart:math&#39;;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>class Point {
</span></span><span class=line><span class=cl>  final double x;
</span></span><span class=line><span class=cl>  final double y;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  Point(this.x, this.y);
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  double distanceTo(Point other) {
</span></span><span class=line><span class=cl>    var dx = x - other.x;
</span></span><span class=line><span class=cl>    var dy = y - other.y;
</span></span><span class=line><span class=cl>    return sqrt(dx * dx + dy * dy);
</span></span><span class=line><span class=cl>  }
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><h4 id=é™æ€å˜é‡å’Œæ–¹æ³•>é™æ€å˜é‡å’Œæ–¹æ³•</h4><p>ä½¿ç”¨å…³é”®å­— static å¯ä»¥å£°æ˜ç±»å˜é‡æˆ–ç±»æ–¹æ³•ã€‚é™æ€æˆå‘˜å¯ä»¥é€šè¿‡ç±»åç§°ç›´æ¥è®¿é—®ï¼ˆä¸éœ€è¦å®ä¾‹åŒ–ï¼‰ï¼Œæé«˜æ€§èƒ½ã€‚é™æ€æ–¹æ³•ä¸èƒ½è®¿é—®éé™æ€æˆå‘˜ï¼Œéé™æ€æ–¹æ³•å¯ä»¥è®¿é—®é™æ€æˆå‘˜ï¼Œä¸èƒ½ä½¿ç”¨thiså…³é”®å­—ã€‚</p><h4 id=get-å’Œ-set>get å’Œ set</h4><p>ç‰¹æ®Šæ–¹æ³•:å®ä¾‹å¯¹è±¡çš„æ¯ä¸€ä¸ªå±æ€§éƒ½æœ‰ä¸€ä¸ªéšå¼çš„ Getter æ–¹æ³•ï¼Œé final å±æ€§è¿˜ä¼šæœ‰ä¸€ä¸ª Setter æ–¹æ³•ã€‚</p><ul><li>é€šè¿‡getå’Œsetä¿®é¥°çš„æ–¹æ³•ä¸å¸¦å°æ‹¬å·ï¼Œå¯ä»¥ä½¿è®¿é—®æ–¹æ³•åƒè®¿é—®å±æ€§ä¸€æ ·ï¼Œç®€ä¾¿æˆ‘ä»¬çš„ä½¿ç”¨ã€è®¿é—®</li><li>setï¼šä¼ å…¥å±æ€§ï¼Œgetï¼šè®¿é—®å±æ€§ã€‚</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>class Rectangle {
</span></span><span class=line><span class=cl>  double left, top, width, height;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  Rectangle(this.left, this.top, this.width, this.height);
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  double get right =&gt; left + width;
</span></span><span class=line><span class=cl>  set right(double value) =&gt; left = value - width;
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>void main() {
</span></span><span class=line><span class=cl>  var rect = Rectangle(3, 4, 20, 15);
</span></span><span class=line><span class=cl>  // é€šè¿‡getterè®¿é—® right
</span></span><span class=line><span class=cl>  assert(rect.right == 23);
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  // é€šè¿‡setterä¿®æ”¹  right å±æ€§
</span></span><span class=line><span class=cl>  rect.right = 12;
</span></span><span class=line><span class=cl>  assert(rect.left == -8);
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><h4 id=æŠ½è±¡ç±»æŠ½è±¡æ–¹æ³•>æŠ½è±¡ç±»ã€æŠ½è±¡æ–¹æ³•</h4><p>æŠ½è±¡ç±»å¸¸ç”¨äºå®šä¹‰æ¥å£ï¼ŒæŠ½è±¡ç±»å¸¸å¸¸ä¼šåŒ…å«æŠ½è±¡æ–¹æ³•</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>abstract class Doer {
</span></span><span class=line><span class=cl>  // Define instance variables and methods...
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  void doSomething(); // Define an abstract method.
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>class EffectiveDoer extends Doer {
</span></span><span class=line><span class=cl>  void doSomething() {
</span></span><span class=line><span class=cl>    // Provide an implementation, so the method is not abstract here...
</span></span><span class=line><span class=cl>  }
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><h4 id=call>call()</h4><p>åœ¨åˆ«äººé¡¹ç›®ç»å¸¸çœ‹åˆ°æ­¤æ–¹æ³•ï¼Œçœ‹å…¶è§£é‡Šæ„Ÿè§‰å¯ä»¥çœç•¥ä¸å†™ã€‚</p><p>æ‰€æœ‰ Dartå‡½æ•°ï¼ˆå…·æœ‰å‡½æ•°ç±»å‹è€Œä¸æ˜¯ç±»/æ¥å£ç±»å‹çš„å¯¹è±¡ï¼‰éƒ½æœ‰ä¸€ä¸ªcallæ–¹æ³•ã€‚</p><p>è¯¥callæ–¹æ³•ä¸å‡½æ•°æœ¬èº«å…·æœ‰ç›¸åŒçš„å‡½æ•°ç±»å‹ï¼Œå¹¶ä¸”åœ¨è°ƒç”¨å®ƒæ—¶å®ƒçš„è¡Œä¸ºå®Œå…¨ç›¸åŒã€‚æ‚¨ç”šè‡³å¯ä»¥è¯´è°ƒç”¨å‡½æ•°å°±æ˜¯éšå¼è°ƒç”¨å…¶callæ–¹æ³•ã€‚å¦‚æœæ‚¨ç¼–å†™å‡½æ•°è°ƒç”¨e1(e2, e3)ï¼Œé‚£ä¹ˆç¼–è¯‘å™¨ä¼šæ£€æŸ¥æ˜¯å¦e1æœ‰callæ–¹æ³•ï¼Œå¦‚æœæœ‰ï¼Œåˆ™å°†å…¶è½¬æ¢ä¸ºæ–¹æ³•è°ƒç”¨e1.call(e2, e3)ã€‚</p><h3 id=æ„é€ å‡½æ•°>æ„é€ å‡½æ•°</h3><link href="https://fonts.googleapis.com/css?family=default" rel=stylesheet type=text/css><div style=font-family:default;font-size:20px;font-style:normal;font-weight:700;color:blue>ç‰¹ç‚¹ï¼š</div><ul><li><p>å®ä¾‹åŒ–ç±»æ—¶ä¼šè¢«è‡ªåŠ¨è§¦å‘</p></li><li><p>ä¸€èˆ¬ç”¨äºåˆå§‹åŒ–æ“ä½œ</p></li><li><p>æ²¡æœ‰è¿”å›å€¼</p></li></ul><link href="https://fonts.googleapis.com/css?family=default" rel=stylesheet type=text/css><div style=font-family:default;font-size:20px;font-style:normal;font-weight:700;color:blue>æ™®é€šæ„é€ å‡½æ•°</div><p>æ„é€ å‡½æ•°æ–¹æ³•åå’Œç±»åç›¸åŒ</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>class Point {
</span></span><span class=line><span class=cl>  num x, y;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  Point(num x, num y) {
</span></span><span class=line><span class=cl>    // There&#39;s a better way to do this, stay tuned.
</span></span><span class=line><span class=cl>    this.x = x;
</span></span><span class=line><span class=cl>    this.y = y;
</span></span><span class=line><span class=cl>  }
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><p>ç®€åŒ–å½¢å¼ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>class Point {
</span></span><span class=line><span class=cl>  num x, y;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  // Syntactic sugar for setting x and y
</span></span><span class=line><span class=cl>  // before the constructor body runs.
</span></span><span class=line><span class=cl>  Point(this.x, this.y);
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><link href="https://fonts.googleapis.com/css?family=default" rel=stylesheet type=text/css><div style=font-family:default;font-size:20px;font-style:normal;font-weight:700;color:blue>å‘½åæ„é€ å‡½æ•°</div><p>å‘½åæ„é€ å‡½æ•°(ç±»å.å‡½æ•°å)å¯ä»¥å®ç°å¤šä¸ªæ„é€ å™¨ã€‚</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>class Point {
</span></span><span class=line><span class=cl>  num x, y;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  Point(this.x, this.y);
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  // å‘½åæ„é€ å‡½æ•°
</span></span><span class=line><span class=cl>  Point.origin() {
</span></span><span class=line><span class=cl>    x = 0;
</span></span><span class=line><span class=cl>    y = 0;
</span></span><span class=line><span class=cl>  }
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><p>è¯·è®°ä½ï¼Œå‘½åæ„é€ å‡½æ•°ä¸å¯ç»§æ‰¿ï¼Œå¦‚æœå­ç±»æƒ³è¦æœ‰ å’Œçˆ¶ç±»ä¸€æ ·çš„å‘½åæ„é€ å‡½æ•°ï¼Œé‚£å°±å†™ä¸ªåŒåçš„ï¼ˆé€šå¸¸ä¹Ÿä¼šåœ¨å­ç±»çš„å‘½åæ„é€ å‡½æ•°é‡Œï¼Œè°ƒç”¨çˆ¶ç±»çš„åŒåå‘½åæ„é€ å‡½æ•°ï¼‰</p><link href="https://fonts.googleapis.com/css?family=default" rel=stylesheet type=text/css><div style=font-family:default;font-size:20px;font-style:normal;font-weight:700;color:blue>è°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°</div><p>å¦‚æœä½ çš„ç±»ï¼Œç»§æ‰¿äºçˆ¶ç±»ï¼Œé‚£ä¹ˆå­ç±»çš„æ„é€ å‡½æ•°ï¼ŒåŠ¿å¿…è¦è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°ï¼Œè¿™æ—¶å€™å°±è¦åˆ†ä¸¤ç§æƒ…å†µï¼š</p><ul><li>Dartè¯­è¨€å¸®ä½ è°ƒç”¨çˆ¶ç±»çš„æ— å‚æ•°æ„é€ å‡½æ•°</li><li>ä»£ç ä¸­æ˜¾å¼è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°</li></ul><ol><li>é»˜è®¤è°ƒç”¨è°ƒç”¨çˆ¶ç±»çš„æ— å‚æ•°æ„é€ å‡½æ•°</li></ol><p>å¦‚æœä½ æ²¡æœ‰æ˜¾å¼è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°ï¼Œå¹¶ä¸”çˆ¶ç±»æœ‰ä¸€ä¸ªæ— å‚æ•°æ„é€ å‡½æ•°ï¼Œé‚£ä¹ˆDartå°±ä¼šå¸®ä½ åœ¨å­ç±»çš„æ„é€ å‡½æ•°æ–¹æ³•ä½“çš„æœ€å‰é¢ï¼Œè°ƒç”¨çˆ¶ç±»çš„æ— å‚æ•°æ„é€ å‡½æ•°ã€‚å½“ç„¶ï¼Œåé¢æˆ‘ä»¬ä¼šè¯´é“ï¼Œæ„é€ å‡½æ•°åˆ†æˆå¥½å‡ éƒ¨åˆ†æ¥åˆå§‹åŒ–æˆå‘˜å˜é‡ï¼Œè°ƒç”¨çš„é¡ºåºå¦‚ä¸‹ï¼š</p><ul><li>åˆå§‹åŒ–åˆ—è¡¨</li><li>çˆ¶ç±»çš„æ— å‚æ•°æ„é€ å‡½æ•°</li><li>å­ç±»çš„æ— å‚æ•°æ„é€ å‡½æ•°</li></ul><p>å½“ç„¶ï¼Œå¦‚æœçˆ¶ç±»æ²¡æœ‰æ— å‚æ•°æ„é€ å‡½æ•°ï¼Œæˆ–è€…Dartè¿™ç§éšå¼è°ƒç”¨æ— æ³•æ»¡è¶³ä½ çš„è¦æ±‚ï¼Œé‚£å°±éœ€è¦æ˜¾å¼è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°äº†</p><ol start=2><li>æ˜¾å¼è°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°</li></ol><p>æ˜¾å¼è°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°ï¼Œåº”è¯¥åœ¨åˆå§‹åŒ–åˆ—è¡¨ä¸­å®Œæˆ</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>class Person {
</span></span><span class=line><span class=cl>  String firstName;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  Person.fromJson(Map data) {
</span></span><span class=line><span class=cl>    print(&#39;in Person&#39;);
</span></span><span class=line><span class=cl>  }
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>class Employee extends Person {
</span></span><span class=line><span class=cl>  // Person does not have a default constructor;
</span></span><span class=line><span class=cl>  // you must call super.fromJson(data).
</span></span><span class=line><span class=cl>  Employee.fromJson(Map data) : super.fromJson(data) {
</span></span><span class=line><span class=cl>    print(&#39;in Employee&#39;);
</span></span><span class=line><span class=cl>  }
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>main() {
</span></span><span class=line><span class=cl>  var emp = new Employee.fromJson({});
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  // Prints:
</span></span><span class=line><span class=cl>  // in Person
</span></span><span class=line><span class=cl>  // in Employee
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><link href="https://fonts.googleapis.com/css?family=default" rel=stylesheet type=text/css><div style=font-family:default;font-size:20px;font-style:normal;font-weight:700;color:blue>åˆå§‹åŒ–åˆ—è¡¨</div><p>åœ¨æ„é€ å‡½æ•°ååŠ ä¸Š<code>: x = , y =</code></p><ul><li><p>å¯ä»¥åœ¨æ„é€ å‡½æ•°ä¸­è®¾ç½®å±æ€§çš„é»˜è®¤å€¼</p></li><li><p>åœ¨æ„é€ å‡½æ•°ä½“æ‰§è¡Œä¹‹å‰æ‰§è¡Œ</p></li><li><p>å¯ä»¥è°ƒç”¨è¶…ç±»çš„æ„é€ å‡½æ•°</p></li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>// Initializer list sets instance variables before
</span></span><span class=line><span class=cl>// the constructor body runs.
</span></span><span class=line><span class=cl>Point.fromJson(Map<span class=p>&lt;</span><span class=nt>String</span><span class=err>,</span> <span class=na>num</span><span class=p>&gt;</span> json)
</span></span><span class=line><span class=cl>    : x = json[&#39;x&#39;],
</span></span><span class=line><span class=cl>      y = json[&#39;y&#39;] {
</span></span><span class=line><span class=cl>  print(&#39;In Point.fromJson(): ($x, $y)&#39;);
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><p>å°¤å…¶æ˜¯åˆå§‹åŒ–é‚£äº›finalä¿®é¥°çš„æˆå‘˜å˜é‡æ—¶ï¼Œåˆå§‹åŒ–åˆ—è¡¨å¾ˆæœ‰ç”¨ï¼Œå› ä¸ºåœ¨æ–¹æ³•ä½“ä¸­ï¼Œä¸èƒ½ç»™finalä¿®é¥°çš„æˆå‘˜å˜é‡èµ‹å€¼ï¼Œå› ä¸º<strong>åœ¨æ‰§è¡Œæ–¹æ³•ä½“çš„æ—¶å€™ï¼Œfinalä¿®é¥°çš„æˆå‘˜å˜é‡å·²ç»ä¸èƒ½å˜äº†</strong>ã€‚è¿™ä¸ªåœ°æ–¹å¾ˆå¤šäººçŠ¯é”™ã€‚</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>import &#39;dart:math&#39;;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>class Point {
</span></span><span class=line><span class=cl>  final num x;
</span></span><span class=line><span class=cl>  final num y;
</span></span><span class=line><span class=cl>  final num distanceFromOrigin;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  Point(x, y)
</span></span><span class=line><span class=cl>      : x = x,
</span></span><span class=line><span class=cl>        y = y,
</span></span><span class=line><span class=cl>        distanceFromOrigin = sqrt(x * x + y * y);
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>main() {
</span></span><span class=line><span class=cl>  var p = new Point(2, 3);
</span></span><span class=line><span class=cl>  print(p.distanceFromOrigin);
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><link href="https://fonts.googleapis.com/css?family=default" rel=stylesheet type=text/css><div style=font-family:default;font-size:20px;font-style:normal;font-weight:700;color:blue>é‡å®šå‘æ„é€ å‡½æ•°</div><p>å®šä¹‰æ„é€ å‡½æ•°çš„æ—¶å€™ï¼Œé™¤äº†ä¸€ä¸ªæ™®é€šæ„é€ å‡½æ•°ï¼Œè¿˜å¯ä»¥æœ‰è‹¥å¹²å‘½åæ„é€ å‡½æ•°ï¼Œè¿™äº›æ„é€ å‡½æ•°ä¹‹é—´ï¼Œæœ‰æ—¶å€™ä¼šæœ‰ä¸€äº›ç›¸åŒçš„é€»è¾‘ï¼Œå¦‚æœåˆ†åˆ«ä¹¦å†™åœ¨å„ä¸ªæ„é€ å‡½æ•°ä¸­ï¼Œä¼šæœ‰äº›å¤šä½™ï¼Œæ‰€ä»¥æ„é€ å‡½æ•°å¯ä»¥ä¼ é€’ã€‚</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>class Point {
</span></span><span class=line><span class=cl>  num x, y;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  // The main constructor for this class.
</span></span><span class=line><span class=cl>  Point(this.x, this.y);
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  // Delegates to the main constructor.
</span></span><span class=line><span class=cl>  Point.alongXAxis(num x) : this(x, 0);
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><p>ä¼ é€’æ„é€ å‡½æ•°ï¼Œæ²¡æœ‰æ–¹æ³•ä½“ï¼Œä¼šåœ¨åˆå§‹åŒ–åˆ—è¡¨ä¸­ï¼Œè°ƒç”¨å¦ä¸€ä¸ªæ„é€ å‡½æ•°ã€‚</p><link href="https://fonts.googleapis.com/css?family=default" rel=stylesheet type=text/css><div style=font-family:default;font-size:20px;font-style:normal;font-weight:700;color:blue>å¸¸é‡æ„é€ å‡½æ•°</div><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>class ImmutablePoint {
</span></span><span class=line><span class=cl>  static final ImmutablePoint origin =
</span></span><span class=line><span class=cl>      const ImmutablePoint(0, 0);
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  final num x, y;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  const ImmutablePoint(this.x, this.y);
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><p>å¦‚æœä½ çš„ç±»ï¼Œåˆ›å»ºçš„å¯¹è±¡æ°¸è¿œä¸ä¼šæ”¹å˜ï¼Œä½ å¯ä»¥åœ¨ç¼–è¯‘æœŸå°±åˆ›å»ºè¿™ä¸ªå¸¸é‡å®ä¾‹ï¼Œå¹¶ä¸”å®šä¹‰ä¸€ä¸ªå¸¸é‡æ„é€ å‡½æ•°ï¼Œå¹¶ä¸”ç¡®ä¿æ‰€æœ‰çš„æˆå‘˜å˜é‡éƒ½æ˜¯finalçš„ã€‚</p><link href="https://fonts.googleapis.com/css?family=default" rel=stylesheet type=text/css><div style=font-family:default;font-size:20px;font-style:normal;font-weight:700;color:blue>å·¥å‚æ„é€ å‡½æ•°/å•ä¾‹æ¨¡å¼</div><p>åœ¨æ„é€ å‡½æ•°å‰åŠ ä¸Š<code>factory</code></p><ul><li><p>åªå®ä¾‹åŒ–ä¸€æ¬¡ï¼ŒèŠ‚çœç›¸åŒå®ä¾‹åŒ–å¸¦æ¥çš„æ¶ˆè€—</p></li><li><p>ç¬¬ä¸€æ¬¡è°ƒç”¨å‘½åæ„é€ å‡½æ•°è¿›å…¥å·¥å‚å‡½æ•°ä¸­å®ä¾‹åŒ–ï¼Œåç»­è°ƒç”¨å°±ç”¨ç¼“å­˜ä¸­ç°æˆçš„å®ä¾‹</p></li><li><p>å·¥å‚æ„é€ å‡½æ•°ï¼Œæ²¡æœ‰æƒåˆ©è®¿é—®this</p></li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>class Logger {
</span></span><span class=line><span class=cl>  final String name;
</span></span><span class=line><span class=cl>  bool mute = false;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  // _cache is library-private, thanks to
</span></span><span class=line><span class=cl>  // the _ in front of its name.
</span></span><span class=line><span class=cl>  static final Map<span class=p>&lt;</span><span class=nt>String</span><span class=err>,</span> <span class=na>Logger</span><span class=p>&gt;</span> _cache =
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>String</span><span class=err>,</span> <span class=na>Logger</span><span class=p>&gt;</span>{};
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  factory Logger(String name) {
</span></span><span class=line><span class=cl>    if (_cache.containsKey(name)) {
</span></span><span class=line><span class=cl>      return _cache[name];
</span></span><span class=line><span class=cl>    } else {
</span></span><span class=line><span class=cl>      final logger = Logger._internal(name);   # è°ƒç”¨æ„é€ å‡½æ•°
</span></span><span class=line><span class=cl>      _cache[name] = logger;
</span></span><span class=line><span class=cl>      return logger;
</span></span><span class=line><span class=cl>    }
</span></span><span class=line><span class=cl>  }
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  Logger._internal(this.name);    # å®šä¹‰å‘½åæ„é€ å‡½æ•°
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  void log(String msg) {
</span></span><span class=line><span class=cl>    if (!mute) print(msg);
</span></span><span class=line><span class=cl>  }
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>main() {
</span></span><span class=line><span class=cl>    var logger = Logger(&#39;UI&#39;);
</span></span><span class=line><span class=cl>    logger.log(&#39;Button clicked&#39;);
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><p>ä¸Šä¾‹çš„æ„æ€æ˜¯ï¼Œç±»ä¸­åˆä¸€ä¸ªé™æ€ç¼“å­˜<code>_cache</code>ä¿å­˜ç€ä¸€äº›Loggerç±»å®ä¾‹ï¼Œåˆ›å»ºå®ä¾‹æ—¶ï¼Œç»™å·¥å‚æ„é€ å‡½æ•°ä¼ é€’çš„nameï¼Œå¦‚æœåœ¨ç¼“å­˜ä¸­å·²ç»å­˜åœ¨ï¼Œå°±ç”¨ç¼“å­˜ä¸­ç°æˆçš„å®ä¾‹ï¼Œå¦‚æœæ²¡æœ‰ï¼Œå°±æ–°å»ºä¸€ä¸ªå®ä¾‹ï¼Œå¹¶ä¸”ä¹Ÿæ”¾åˆ°ç¼“å­˜ä¸­ã€‚</p><p>å¦‚æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºåå­—ä¸ºUI / SYS / API ç­‰çš„å®ä¾‹ï¼Œç„¶ååœ¨debugçš„æ—¶å€™ï¼Œå¦‚æœè®¾ç½®åå­—ä¸ºUIçš„Loggerå®ä¾‹çš„muteä¸ºtrueï¼Œå°±ä¸ä¼šæ‰“å°UIç›¸å…³çš„logï¼Œè€Œä¸å½±å“å…¶å®ƒä¸¤ä¸ªåå­—çš„logã€‚</p><h3 id=å›è°ƒå‡½æ•°>å›è°ƒå‡½æ•°</h3><p>å›è°ƒå‡½æ•°æœ¬è´¨ä¸Šæ˜¯æŠŠå‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’ç»™å°éƒ¨ä»¶çš„å‡½æ•°ï¼Œå½“æŒ‰é’®æŒ‰ä¸‹æ—¶è°ƒç”¨æ­¤å‡½æ•°ã€‚</p><p>å®˜æ–¹å®ç°ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>/// Signature of callbacks that have no arguments and return no data.
</span></span><span class=line><span class=cl>typedef VoidCallback = void Function();
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>/// Signature for callbacks that report that an underlying value has changed.
</span></span><span class=line><span class=cl>/// See also:
</span></span><span class=line><span class=cl>///  * [ValueSetter], for callbacks that report that a value has been set.
</span></span><span class=line><span class=cl>typedef ValueChanged<span class=p>&lt;</span><span class=nt>T</span><span class=p>&gt;</span> = void Function(T value);
</span></span></code></pre></div><p>ç¤ºä¾‹ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>import &#39;package:flutter/material.dart&#39;;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>void main() {
</span></span><span class=line><span class=cl>  runApp(const MyApp());
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>class MyApp extends StatefulWidget {
</span></span><span class=line><span class=cl>  const MyApp({Key? key}) : super(key: key);
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  @override
</span></span><span class=line><span class=cl>  State<span class=p>&lt;</span><span class=nt>MyApp</span><span class=p>&gt;</span> createState() =&gt; _MyAppState();
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>class _MyAppState extends State<span class=p>&lt;</span><span class=nt>MyApp</span><span class=p>&gt;</span> {
</span></span><span class=line><span class=cl>  String topic = &#34;Packages&#34;;
</span></span><span class=line><span class=cl>  callback(varTopic) {
</span></span><span class=line><span class=cl>    // setState:é€šçŸ¥å†…éƒ¨çŠ¶æ€å·²æ›´æ”¹ä»è€Œé‡å»ºUI
</span></span><span class=line><span class=cl>    setState(() {
</span></span><span class=line><span class=cl>      topic = varTopic;
</span></span><span class=line><span class=cl>    });
</span></span><span class=line><span class=cl>  }
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  @override
</span></span><span class=line><span class=cl>  Widget build(BuildContext context) {
</span></span><span class=line><span class=cl>    return MaterialApp(
</span></span><span class=line><span class=cl>      home: Scaffold(
</span></span><span class=line><span class=cl>        appBar: AppBar(
</span></span><span class=line><span class=cl>          title: const Text(&#34;Learning Flutter&#34;),
</span></span><span class=line><span class=cl>        ),
</span></span><span class=line><span class=cl>        body: Column(
</span></span><span class=line><span class=cl>          children: [
</span></span><span class=line><span class=cl>            Container(
</span></span><span class=line><span class=cl>              width: double.maxFinite,
</span></span><span class=line><span class=cl>              height: 70,
</span></span><span class=line><span class=cl>              margin: const EdgeInsets.only(
</span></span><span class=line><span class=cl>                  top: 50, left: 40, right: 40, bottom: 20),
</span></span><span class=line><span class=cl>              decoration: BoxDecoration(
</span></span><span class=line><span class=cl>                  color: Colors.lightBlue,
</span></span><span class=line><span class=cl>                  borderRadius: BorderRadius.circular(20)),
</span></span><span class=line><span class=cl>              child: Center(
</span></span><span class=line><span class=cl>                child: Text(
</span></span><span class=line><span class=cl>                  &#34;We are learning Flutter $topic&#34;,
</span></span><span class=line><span class=cl>                  style: const TextStyle(fontSize: 20, color: Colors.white),
</span></span><span class=line><span class=cl>                ),
</span></span><span class=line><span class=cl>              ),
</span></span><span class=line><span class=cl>            ),
</span></span><span class=line><span class=cl>            MyButtons(topic: &#34;Cubit&#34;, callbackFunction: callback),
</span></span><span class=line><span class=cl>            MyButtons(topic: &#34;BLoc&#34;, callbackFunction: callback),
</span></span><span class=line><span class=cl>            MyButtons(topic: &#34;GetX&#34;, callbackFunction: callback)
</span></span><span class=line><span class=cl>          ],
</span></span><span class=line><span class=cl>        ),
</span></span><span class=line><span class=cl>      ),
</span></span><span class=line><span class=cl>    );
</span></span><span class=line><span class=cl>  }
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>class MyButtons extends StatelessWidget {
</span></span><span class=line><span class=cl>  final String topic;
</span></span><span class=line><span class=cl>  final Function callbackFunction;
</span></span><span class=line><span class=cl>  const MyButtons(
</span></span><span class=line><span class=cl>      {Key? key, required this.topic, required this.callbackFunction})
</span></span><span class=line><span class=cl>      : super(key: key);
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  @override
</span></span><span class=line><span class=cl>  Widget build(BuildContext context) {
</span></span><span class=line><span class=cl>    return GestureDetector(
</span></span><span class=line><span class=cl>      onTap: () {
</span></span><span class=line><span class=cl>        callbackFunction(topic);
</span></span><span class=line><span class=cl>      },
</span></span><span class=line><span class=cl>      child: Container(
</span></span><span class=line><span class=cl>        width: double.maxFinite,
</span></span><span class=line><span class=cl>        height: 70,
</span></span><span class=line><span class=cl>        margin: const EdgeInsets.only(top: 20, left: 40, right: 40, bottom: 20),
</span></span><span class=line><span class=cl>        decoration: BoxDecoration(
</span></span><span class=line><span class=cl>            color: Colors.lightBlue, borderRadius: BorderRadius.circular(20)),
</span></span><span class=line><span class=cl>        child: Center(
</span></span><span class=line><span class=cl>          child: Text(
</span></span><span class=line><span class=cl>            topic,
</span></span><span class=line><span class=cl>            style: const TextStyle(fontSize: 20, color: Colors.white),
</span></span><span class=line><span class=cl>          ),
</span></span><span class=line><span class=cl>        ),
</span></span><span class=line><span class=cl>      ),
</span></span><span class=line><span class=cl>    );
</span></span><span class=line><span class=cl>  }
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><h4 id=function-class>Function class</h4><p>Functionæ˜¯æ‰€æœ‰å‡½æ•°ç±»å‹çš„è¶…ç±»ã€‚</p><p>Functionæœ‰ä¸€äº›æ²¡æœ‰å£°æ˜çš„ç‰¹æ®ŠåŠŸèƒ½ï¼š</p><ul><li>Function é™æ€ç±»å‹çš„å€¼ä»ç„¶å¯ä»¥åƒå‡½æ•°ä¸€æ ·è¢«è°ƒç”¨ï¼ˆè¿™æ ·çš„è°ƒç”¨æ˜¯åŠ¨æ€è°ƒç”¨,ç¼–è¯‘å™¨æ— æ³•åœ¨ç¼–è¯‘æ—¶æ£€æŸ¥ç±»å‹çš„æ­£ç¡®æ€§,åœ¨è¿è¡Œæ—¶å°†æ‰§è¡Œæ£€æŸ¥ä»¥ç¡®ä¿å‚æ•°ç±»å‹ä¸€è‡´ï¼‰ã€‚</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>Function f = (int x) =&gt; &#34;$x&#34;;
</span></span><span class=line><span class=cl>print(f(1)); // Prints &#34;1&#34;.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>f(&#34;not&#34;, &#34;one&#34;, &#34;int&#34;); // Throws! No static warning.
</span></span></code></pre></div><h4 id=widgetsä¹‹é—´çš„é€šä¿¡>widgetsä¹‹é—´çš„é€šä¿¡</h4><p><a class=link href=https://medium.com/flutter-community/flutter-communication-between-widgets-f5590230df1e target=_blank rel=noopener>https://medium.com/flutter-community/flutter-communication-between-widgets-f5590230df1e</a></p><h3 id=æ‰©å±•>æ‰©å±•</h3><h4 id=æ‰©å±•ç±»>æ‰©å±•ç±»</h4><link href="https://fonts.googleapis.com/css?family=default" rel=stylesheet type=text/css><div style=font-family:default;font-size:20px;font-style:normal;font-weight:400;color:blue>extends</div><p>Extendsæ˜¯å…¸å‹çš„OOPç±»ç»§æ‰¿ã€‚å¦‚æœ aç±» æ‰©å±•äº† bç±»ï¼Œåˆ™ aç±» å¯ä»¥ä½¿ç”¨æˆ–è¦†ç›– bç±» ä¸­å®ç°çš„æ‰€æœ‰å±æ€§ã€å˜é‡ã€å‡½æ•° ã€‚åœ¨ Dart ä¸­ï¼Œä¸€ä¸ªç±»åªèƒ½æ‰©å±•ä¸€ä¸ªç±»ã€‚
<img src=/p/flutter/5.jpg width=1233 height=641 srcset="/p/flutter/5_hu572765b138c1f7437a19c6cea77cac10_136967_480x0_resize_q75_box.jpg 480w, /p/flutter/5_hu572765b138c1f7437a19c6cea77cac10_136967_1024x0_resize_q75_box.jpg 1024w" loading=lazy class=gallery-image data-flex-grow=192 data-flex-basis=461px></p><link href="https://fonts.googleapis.com/css?family=default" rel=stylesheet type=text/css><div style=font-family:default;font-size:20px;font-style:normal;font-weight:400;color:blue>implements</div><p>åˆ›å»ºå¦ä¸€ä¸ªç±»æˆ–æ¥å£çš„å®ç°ã€‚å½“ aç±» å®ç° bç±» æ—¶ï¼Œ<strong>å¿…é¡»å®ç°</strong> bç±» ä¸­å®šä¹‰çš„æ‰€æœ‰åŠŸèƒ½(æ‰€æœ‰å±æ€§ã€å˜é‡ã€å‡½æ•°)ã€‚ä¸€ä¸ªç±»å¯ä»¥å®ç°å¤šä¸ªæ¥å£ã€‚</p><link href="https://fonts.googleapis.com/css?family=default" rel=stylesheet type=text/css><div style=font-family:default;font-size:20px;font-style:normal;font-weight:400;color:blue>with</div><p>mixinä½¿ç”¨withå…³é”®å­—ï¼Œç±»ä¼¼äºç»§æ‰¿ï¼Œå¯ä»¥æ‰©å±•å¤šä¸ªç±»ã€‚mixinsçš„ç±»åªèƒ½ç»§æ‰¿è‡ªObjectï¼Œä¸èƒ½å†ç»§æ‰¿å…¶ä»–ç±»ï¼Œä¸”ä¸èƒ½æœ‰æ„é€ å‡½æ•°ã€‚</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl># extendsåªèƒ½æ‰©å±•ä¸€ä¸ªç±»ï¼Œè€Œmixinæ²¡æœ‰é™åˆ¶ï¼Œå¯ä»¥ä¸€èµ·ä½¿ç”¨
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>class Maestro extends Person with Musical, Aggressive, Demented {
</span></span><span class=line><span class=cl>  Maestro(String maestroName) {
</span></span><span class=line><span class=cl>    name = maestroName;
</span></span><span class=line><span class=cl>    canConduct = true;
</span></span><span class=line><span class=cl>  }
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><h4 id=super>super</h4><p><code>super</code>å…³é”®å­—ç”¨äºè°ƒç”¨çˆ¶ç±»çš„å¯¹è±¡ã€æ–¹æ³•ã€æ„é€ å‡½æ•°å’Œå­ç±»ä¸­çš„å±æ€§ã€‚</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>// è®¿é—®çˆ¶ç±»å˜é‡
</span></span><span class=line><span class=cl>super.variable_name; 
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>// è®¿é—®çˆ¶ç±»æ–¹æ³•
</span></span><span class=line><span class=cl>super.method_name();
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>// è½¬å‘ç»™è¶…ç±»çš„æ„é€ å‡½æ•°
</span></span><span class=line><span class=cl>const MyApp({Key? key}) : super(key: key);
</span></span></code></pre></div><h4 id=æ‰©å±•æ–¹æ³•>æ‰©å±•æ–¹æ³•</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>// æ‰©å±• numï¼Œå°±å¯ä»¥ä½¿ç”¨ num.attribute å’Œ num.method 
</span></span><span class=line><span class=cl>extension FancyNum on num {
</span></span><span class=line><span class=cl>  num plus(num other) =&gt; this + other;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  num times(num other) =&gt; this * other;
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>print(5.plus(3)); // Equal to &#34;5 + 3&#34;.
</span></span><span class=line><span class=cl>print(5.times(8)); // Equal to &#34;5 * 8&#34;.
</span></span><span class=line><span class=cl>print(2.plus(1).times(3)); // Equal to &#34;(2 + 1) * 3&#34;.
</span></span></code></pre></div><h2 id=æ³›å‹>æ³›å‹</h2><p>æ³›å‹å¸¸ç”¨äºéœ€è¦è¦æ±‚ç±»å‹å®‰å…¨çš„æƒ…å†µï¼Œå¯ä»¥å‡å°‘ä»£ç é‡å¤ã€‚
<img src=/p/flutter/fanxing.jpg width=1122 height=449 srcset="/p/flutter/fanxing_hu6d02cad28d2736a6e42659b75fd941e7_62001_480x0_resize_q75_box.jpg 480w, /p/flutter/fanxing_hu6d02cad28d2736a6e42659b75fd941e7_62001_1024x0_resize_q75_box.jpg 1024w" loading=lazy class=gallery-image data-flex-grow=249 data-flex-basis=599px>
å¦‚æœ T æ˜¯ä¸€ä¸ªclassï¼Œåˆ™è¡¨ç¤ºä¼ å…¥è¯¥ç±»å‹çš„å‚æ•°ã€‚</p><p>@override æ³¨è§£æ¥è¡¨ç¤ºä½ é‡å†™äº†ä¸€ä¸ªæˆå‘˜
<img src=/p/flutter/override.jpg width=1173 height=659 srcset="/p/flutter/override_huf3ae0c28a53250be072483b49c760168_125842_480x0_resize_q75_box.jpg 480w, /p/flutter/override_huf3ae0c28a53250be072483b49c760168_125842_1024x0_resize_q75_box.jpg 1024w" loading=lazy class=gallery-image data-flex-grow=177 data-flex-basis=427px></p><h2 id=å¼‚æ­¥>å¼‚æ­¥</h2><link href="https://fonts.googleapis.com/css?family=default" rel=stylesheet type=text/css><div style=font-family:default;font-size:20px;font-style:normal;font-weight:700;color:blue>Isolate</div><p>Isolate æ˜¯è¿è¡Œæ‰€æœ‰ Dart ä»£ç çš„åœ°æ–¹ï¼Œåœ¨è®¸å¤šå…¶ä»–è¯­è¨€é‡Œï¼ˆä¾‹å¦‚ C++ï¼‰ï¼Œä½ å¯ä»¥è®©å¤šä¸ªçº¿ç¨‹å…±äº«ç›¸åŒçš„å†…å­˜ï¼Œä½†æ˜¯åœ¨ Dart ä¸­ï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½æœ‰è‡ªå·±çš„ Isolate å’Œå®ƒè‡ªå·±çš„å†…å­˜ã€‚</p><p>å¦‚æœä½ è¦è¿è¡Œçš„è®¡ç®—é‡å¤ªè¿‡åºå¤§ï¼Œåœ¨ main Isolate ä¸­è¿è¡Œå¯èƒ½ä¼šå¯¼è‡´ä¸¢å¸§ï¼Œå¦‚æœå¤„ç†å¯èƒ½éœ€è¦å‡ ç™¾æ¯«ç§’ï¼Œåˆ™è€ƒè™‘åˆ›å»ºå•ç‹¬çš„Isolateï¼Œä¾‹å¦‚ï¼š</p><ul><li>è§£ç  JSONï¼ŒHttpRequest çš„ç»“æœ => compute</li><li>åŠ å¯†å¯èƒ½éå¸¸è€—æ—¶</li><li>å¤„ç†å›¾åƒï¼ˆä¾‹å¦‚è£å‰ªï¼‰</li><li>ä» Web åŠ è½½å›¾åƒ</li></ul><p><strong>äº‹ä»¶å¾ªç¯</strong></p><p>Dartä½¿ç”¨æ°¸ä¸é˜»å¡çš„å•çº¿ç¨‹æ¥å¤„ç†æ‰€æœ‰äº‹ä»¶ã€‚å› æ­¤ï¼Œå®ƒè¿è¡Œä¸€ä¸ªäº‹ä»¶å¾ªç¯ï¼Œå®ƒä»äº‹ä»¶é˜Ÿåˆ—ä¸­å–å¾—æœ€å…ˆå‘ç”Ÿçš„äº‹ä»¶ï¼Œå¤„ç†å®ƒï¼Œè¿”å›ä¸‹ä¸€ä¸ªäº‹ä»¶è¿›è¡Œå¤„ç†ï¼Œä¾æ­¤ç±»æ¨ï¼Œç›´åˆ°äº‹ä»¶é˜Ÿåˆ—æ¸…ç©ºä¸ºæ­¢ã€‚</p><link href="https://fonts.googleapis.com/css?family=default" rel=stylesheet type=text/css><div style=font-family:default;font-size:20px;font-style:normal;font-weight:700;color:blue>Future</div><p><strong>å®šä¹‰</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>// Future<span class=p>&lt;</span><span class=nt>type</span><span class=p>&gt;</span>æ˜¯ä¸€ç§ç±»å‹
</span></span><span class=line><span class=cl>Future<span class=p>&lt;</span><span class=nt>void</span><span class=p>&gt;</span> myVoidFuture() {}   // ä¸è¿”å›ä»»ä½•å†…å®¹ï¼Œä½†å¯ä»¥åœ¨æœ€ç»ˆå®Œæˆæ—¶é€šçŸ¥è°ƒç”¨è€…ã€‚ 
</span></span><span class=line><span class=cl>Future<span class=p>&lt;</span><span class=nt>bool</span><span class=p>&gt;</span> myTypedFuture() {}  // å¦‚æœéœ€è¦è¿”å›ä¸€ä¸ªå€¼ï¼Œé‚£ä¹ˆä½ ä¼ é€’ç»™å®ƒä¸€ä¸ªç±»å‹ã€‚
</span></span></code></pre></div><p>Future æœ‰ä¸¤ç§çŠ¶æ€ï¼š</p><ul><li>æœªå®Œæˆ(Uncompleted): ä½ åˆšåˆšå¾—åˆ°ä¸€ä¸ª Futureï¼Œè¿˜æœªæ‰“å¼€<br>é¦–å…ˆï¼Œäº‹ä»¶å‘ç”Ÿï¼Œäº‹ä»¶å¾ªç¯è·å–äº‹ä»¶ï¼Œå¹¶è°ƒç”¨ä½ å†™çš„å¤„ç†ç¨‹åºï¼Œå¾—åˆ°ä¸€ä¸ªè¿”å›çš„ Futureï¼Œæ­¤æ—¶Futureæ˜¯å…³ç€çš„ï¼Œæ­¤æ—¶ Future æœªèƒ½å®Œæˆï¼Œäº‹ä»¶å¾ªç¯ç»§ç»­æ‰§è¡Œå…¶ä»–äº‹ä»¶ã€‚</li><li>å·²å®Œæˆ<ul><li>Completed with a value: æ‰“å¼€äº†ï¼Œå¸¦æœ‰ä¸€ä¸ªå€¼<br>ç­‰åˆ°æ•°æ®æŠµè¾¾æ—¶ï¼ŒFuture å¾—åˆ°æ•°æ®å¹¶æ‰“å¼€å®ƒï¼Œå¦‚æœFuture å®Œæˆå¹¶å¸¦æœ‰ä¸€ä¸ªå€¼ï¼Œæ­¤æ—¶ä¼šè§¦å‘ä½ çš„ <code>then</code> å›è°ƒã€‚<code>then</code> æ˜¯ä½ å¯ä»¥ç”¨æ¥åœ¨æ¯ä¸ª Future ä¸Šæ³¨å†Œå›è°ƒçš„å®ä¾‹æ–¹æ³•ï¼Œä½ å¯ä»¥ç”¨å®ƒåˆ›å»ºä¸€ä¸ªå‡½æ•°ï¼Œä¼ å…¥ä¸€ä¸ªåŒ¹é… Future ç±»å‹çš„å‚æ•°ã€‚</li><li>Completed with an error: æ‰“å¼€äº†ï¼ŒæŠ›å‡ºä¸€ä¸ªå¼‚å¸¸<br>å¦‚æœFuture åœ¨å®Œæˆæ—¶æ²¡æœ‰å¸¦ä¸€ä¸ªå€¼ï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>catchError</code>æ³¨å†Œå¦ä¸€ä¸ªå›è°ƒï¼ŒcatchError çš„å·¥ä½œæ–¹å¼å’Œ then ä¸€æ ·ï¼Œå”¯ä¸€ä¸åŒçš„æ˜¯å®ƒæ•è·å¼‚å¸¸è€Œä¸æ˜¯å€¼ã€‚ä½ ç”šè‡³å¯ä»¥ç»™å®ƒä¸€ä¸ª<code>test</code>æ–¹æ³•ï¼Œä½ å¯ä»¥é€šè¿‡è¿™ç§æ–¹å¼ä½¿ç”¨å¤šä¸ª catchError æ–¹æ³•ï¼Œæ¯ç§æ–¹æ³•éƒ½ä¼šæ£€æŸ¥é”™è¯¯è¿”å›å€¼çš„ç±»å‹ã€‚</li></ul></li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>void main() {
</span></span><span class=line><span class=cl>  Future<span class=p>&lt;</span><span class=nt>int</span><span class=p>&gt;</span>.delayed (
</span></span><span class=line><span class=cl>    Duration (seconds: 3),
</span></span><span class=line><span class=cl>    () { return 100; },
</span></span><span class=line><span class=cl>  ).then((value) {
</span></span><span class=line><span class=cl>    print(value);
</span></span><span class=line><span class=cl>  }).catchError(
</span></span><span class=line><span class=cl>    (err) {
</span></span><span class=line><span class=cl>      print(&#39;Caught $err&#39;);
</span></span><span class=line><span class=cl>    },
</span></span><span class=line><span class=cl>    test: (err) =&gt; err.runtimeType == String,
</span></span><span class=line><span class=cl>  ).whenComplete (() {
</span></span><span class=line><span class=cl>    print(&#39;All finished!&#39;);
</span></span><span class=line><span class=cl>  });
</span></span><span class=line><span class=cl>  print(&#39;waiting...&#39;);
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><p><strong>Futureæ–¹æ³•</strong></p><ul><li><p>Future.value<br>å¦‚æœä½ å·²ç»çŸ¥é“ Future è¿”å›çš„å€¼ï¼Œä½ å¯ä»¥ä½¿ç”¨ Future.value ä¸ºæ„é€ å‡½æ•°å‘½åï¼Œæ„å»ºç¼“å­˜æœåŠ¡æ—¶å¯ä»¥ç”¨è¿™ä¸ª</p></li><li><p>Future.error<br>å®ƒéœ€è¦ä¸€ä¸ªå¼‚å¸¸å¯¹è±¡å’Œä¸€ä¸ªå¯é€‰çš„å †æ ˆè·Ÿè¸ª</p></li><li><p>Future.delayed<br>åœ¨è¿è¡Œå‡½æ•°å’Œ Future å®Œæˆä¹‹å‰ï¼ŒæŒ‡å®šç­‰å¾…æ—¶é•¿ï¼Œå¯ä»¥åˆ›å»ºæµ‹è¯•ç”¨çš„æ¨¡æ‹Ÿç½‘ç»œæœåŠ¡</p></li></ul><link href="https://fonts.googleapis.com/css?family=default" rel=stylesheet type=text/css><div style=font-family:default;font-size:20px;font-style:normal;font-weight:700;color:blue>Streams</div><p>æ¯ä¸ª future å•ä¸€åœ°ä¼ é€’é”™è¯¯ï¼Œæˆ–è€…æ•°æ®ï¼ŒStreamséšç€æ—¶é—´çš„æ¨ç§»ï¼Œå¯ä»¥ä¼ é€é›¶ä¸ªã€å¤šä¸ªå€¼ï¼Œæˆ–è€…æ˜¯é”™è¯¯ã€‚</p><p><link href="https://fonts.googleapis.com/css?family=default" rel=stylesheet type=text/css><div style=font-family:default;font-size:20px;font-style:normal;font-weight:700;color:blue>async await</div>async å’Œ await å®é™…ä¸Šåªæ˜¯ future å’Œ streams çš„æ›¿ä»£è¯­æ³•ï¼Œåœ¨è¿ç»­çš„Futureä¸­ï¼Œæ¯ä¸€å¤„Futureéƒ½éœ€è¦å®šä¹‰ã€thenã€returnï¼Œè€Œä¸”æ‰€æœ‰å†…å®¹æ·»åŠ åˆ°thenä¸‹ä¸æ˜“é˜…è¯»ï¼Œè€Œawaitåªéœ€å¦‚ä¸‹å†™ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>import &#39;dart:io&#39;;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>void main() {
</span></span><span class=line><span class=cl>  createData();
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Future<span class=p>&lt;</span><span class=nt>ProcessedData</span><span class=p>&gt;</span> createData() async {
</span></span><span class=line><span class=cl>  try {
</span></span><span class=line><span class=cl>    final id = await _loadFromDisk();
</span></span><span class=line><span class=cl>    final data = await _fetchNetworkData(id);
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    return ProcessedData(data);
</span></span><span class=line><span class=cl>  } on HttpException catch (err) {
</span></span><span class=line><span class=cl>    print(&#39;Network error: $err&#39;);
</span></span><span class=line><span class=cl>    return ProcessedData.empty();
</span></span><span class=line><span class=cl>  } finally {
</span></span><span class=line><span class=cl>    print(&#39;All done!&#39;);
</span></span><span class=line><span class=cl>  }
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Future<span class=p>&lt;</span><span class=nt>int</span><span class=p>&gt;</span> _loadFromDisk() async {
</span></span><span class=line><span class=cl>  print(&#39;loadFromDisk&#39;);
</span></span><span class=line><span class=cl>  return 0;
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Future<span class=p>&lt;</span><span class=nt>String</span><span class=p>&gt;</span> _fetchNetworkData(int id) async {
</span></span><span class=line><span class=cl>  print(&#39;NetworkData&#39;);
</span></span><span class=line><span class=cl>  return &#39;NetworkData&#39;;
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>class ProcessedData {
</span></span><span class=line><span class=cl>  ProcessedData(this.data);
</span></span><span class=line><span class=cl>  final String data;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  static Future<span class=p>&lt;</span><span class=nt>ProcessedData</span><span class=p>&gt;</span> empty() async {
</span></span><span class=line><span class=cl>    var empty = ProcessedData(&#39;empty&#39;);
</span></span><span class=line><span class=cl>    print(empty);
</span></span><span class=line><span class=cl>    return empty;
</span></span><span class=line><span class=cl>  }
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><p>ä¸Šé¢å®˜æ–¹ç¤ºä¾‹ä»‹ç»äº†è¿ç»­çš„ awaitï¼Œè¿™æ˜¯æ›´æ¸…æ™°çš„ä½¿ç”¨ç¤ºä¾‹ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>void main() async {
</span></span><span class=line><span class=cl>  print(getMeSomeFood());      
</span></span><span class=line><span class=cl>  print(await getMeSomethingBetter());       
</span></span><span class=line><span class=cl>  maybeSomethingSweet().then((String value) {
</span></span><span class=line><span class=cl>    print(value);                    
</span></span><span class=line><span class=cl>  });
</span></span><span class=line><span class=cl>  print(&#39;done&#39;);
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>Future<span class=p>&lt;</span><span class=nt>String</span><span class=p>&gt;</span> getMeSomeFood() async {
</span></span><span class=line><span class=cl>  return &#34;an apple&#34;;
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>Future<span class=p>&lt;</span><span class=nt>String</span><span class=p>&gt;</span> getMeSomethingBetter() async {
</span></span><span class=line><span class=cl>  return &#34;a burger?&#34;;
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>Future<span class=p>&lt;</span><span class=nt>String</span><span class=p>&gt;</span> maybeSomethingSweet() async {
</span></span><span class=line><span class=cl>  return &#34;a chocolate cake!!&#34;;
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>// output: 
</span></span><span class=line><span class=cl>// Instance of â€˜_Future<span class=p>&lt;</span><span class=nt>String</span><span class=p>&gt;</span>â€™      ä¸ç­‰å¾…ï¼Œè¿”å›ä¸€ä¸ªfuture
</span></span><span class=line><span class=cl>// a burger?                          ç­‰å¾…futureå®Œæˆ
</span></span><span class=line><span class=cl>// done                               
</span></span><span class=line><span class=cl>// a chocolate cake!!                 ä¸ç­‰å¾…ï¼Œå…ˆç»§ç»­æ‰§è¡Œprint(&#39;done&#39;)ï¼Œfutureå®Œæˆåå†è°ƒç”¨then
</span></span></code></pre></div><link href="https://fonts.googleapis.com/css?family=default" rel=stylesheet type=text/css><div style=font-family:default;font-size:20px;font-style:normal;font-weight:700;color:blue>Generator</div><div class=table-wrapper><table><thead><tr><th></th><th>Single value</th><th>Zero or more values</th></tr></thead><tbody><tr><td>Sync:</td><td>int</td><td>Iterable<int></td></tr><tr><td>Async:</td><td>Future<int></td><td>Stream<int></td></tr></tbody></table></div><p>å½“æ‚¨éœ€è¦å»¶è¿Ÿç”Ÿæˆä¸€ç³»åˆ—å€¼æ—¶ï¼Œè¯·è€ƒè™‘ä½¿ç”¨<em>ç”Ÿæˆå™¨å‡½æ•°</em>ã€‚Dart å†…ç½®æ”¯æŒä¸¤ç§ç”Ÿæˆå™¨å‡½æ•°ï¼š</p><ul><li><strong>åŒæ­¥</strong>ç”Ÿæˆå™¨ï¼šè¿”å›ä¸€ä¸ª<a class=link href=https://api.dart.dev/stable/dart-core/Iterable-class.html target=_blank rel=noopener><code>Iterable</code></a>å¯¹è±¡ã€‚</li><li><strong>å¼‚æ­¥</strong>ç”Ÿæˆå™¨ï¼šè¿”å›ä¸€ä¸ª<a class=link href=https://api.dart.dev/stable/dart-async/Stream-class.html target=_blank rel=noopener><code>Stream</code></a>å¯¹è±¡ã€‚</li></ul><p>å®ç°ä¸€ä¸ª<strong>åŒæ­¥</strong>ç”Ÿæˆå™¨å‡½æ•°ï¼Œå°†å‡½æ•°ä½“æ ‡è®°ä¸º<code>sync*</code>ï¼Œä½¿ç”¨<code>yield</code>è¯­å¥ä¼ é€’å€¼ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-dart data-lang=dart><span class=line><span class=cl><span class=n>Iterable</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span> <span class=n>naturalsTo</span><span class=p>(</span><span class=kt>int</span> <span class=n>n</span><span class=p>)</span> <span class=kd>sync</span><span class=o>*</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kt>int</span> <span class=n>k</span> <span class=o>=</span> <span class=m>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>while</span> <span class=p>(</span><span class=n>k</span> <span class=o>&lt;</span> <span class=n>n</span><span class=p>)</span> <span class=kd>yield</span> <span class=n>k</span><span class=o>++</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>å®ç°<strong>å¼‚æ­¥</strong>ç”Ÿæˆå™¨å‡½æ•°ï¼Œå°†å‡½æ•°ä½“æ ‡è®°ä¸º<code>async*</code>ï¼Œä½¿ç”¨<code>yield</code>è¯­å¥ä¼ é€’å€¼ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-dart data-lang=dart><span class=line><span class=cl><span class=n>Stream</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span> <span class=n>asynchronousNaturalsTo</span><span class=p>(</span><span class=kt>int</span> <span class=n>n</span><span class=p>)</span> <span class=kd>async</span><span class=o>*</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kt>int</span> <span class=n>k</span> <span class=o>=</span> <span class=m>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>while</span> <span class=p>(</span><span class=n>k</span> <span class=o>&lt;</span> <span class=n>n</span><span class=p>)</span> <span class=kd>yield</span> <span class=n>k</span><span class=o>++</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>å¦‚æœæ‚¨çš„ç”Ÿæˆå™¨æ˜¯é€’å½’çš„ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•æé«˜å…¶æ€§èƒ½<code>yield*</code>ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-dart data-lang=dart><span class=line><span class=cl><span class=n>Iterable</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span> <span class=n>naturalsDownFrom</span><span class=p>(</span><span class=kt>int</span> <span class=n>n</span><span class=p>)</span> <span class=kd>sync</span><span class=o>*</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=p>(</span><span class=n>n</span> <span class=o>&gt;</span> <span class=m>0</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>yield</span> <span class=n>n</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kd>yield</span><span class=o>*</span> <span class=n>naturalsDownFrom</span><span class=p>(</span><span class=n>n</span> <span class=o>-</span> <span class=m>1</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h1 id=flutter>flutter</h1><h2 id=widgetç”Ÿå‘½å‘¨æœŸ>Widgetç”Ÿå‘½å‘¨æœŸ</h2><p><strong>StatelessWidgetç”Ÿå‘½å‘¨æœŸæºç å›¾</strong>
<img src=/p/flutter/6.jpg width=1787 height=966 srcset="/p/flutter/6_hu9df739c1aeb15e1ce9f35dea789d6e83_349244_480x0_resize_q75_box.jpg 480w, /p/flutter/6_hu9df739c1aeb15e1ce9f35dea789d6e83_349244_1024x0_resize_q75_box.jpg 1024w" loading=lazy class=gallery-image data-flex-grow=184 data-flex-basis=443px></p><p>Flutter ä¸­ä¸‡ç‰©çš†ä¸ºWidgetï¼Œ<code>widget</code>ç±»ç»§æ‰¿è‡ª<code>DiagnosticableTree</code>ã€‚</p><p><code>DiagnosticableTree</code>å³â€œè¯Šæ–­æ ‘â€ï¼Œä¸»è¦ä½œç”¨æ˜¯æä¾›è°ƒè¯•ä¿¡æ¯ã€‚</p><p>Flutter ä¸­çš„ UI æˆ–ä¸€å †å°éƒ¨ä»¶ç»„æˆï¼Œé€šå¸¸ç§°ä¸ºå°éƒ¨ä»¶æ ‘ï¼Œæ ¹æ® Widget æ ‘ç”Ÿæˆä¸€ä¸ª Element æ ‘ï¼ŒWidget å’Œ Element æ˜¯ä¸€ä¸€å¯¹åº”çš„ï¼Œæ ¹æ® Element æ ‘ç”Ÿæˆ Render æ ‘ï¼ˆæ¸²æŸ“æ ‘ï¼‰ï¼ŒçœŸæ­£çš„å¸ƒå±€å’Œæ¸²æŸ“é€»è¾‘åœ¨ Render æ ‘ä¸­ã€‚</p><p><code>Widget.createElement()</code> :åˆ›å»ºä¸€ä¸ªElementå®ä¾‹ï¼Œè®°ä¸º<code>element</code>ã€‚</p><p><code>BuildContext</code>æ˜¯widgetå¯¹åº”çš„Elementï¼Œç”¨äºè·Ÿè¸ªæ ‘ä¸­çš„æ¯ä¸ªå°éƒ¨ä»¶å¹¶å®šä½å®ƒä»¬åŠå…¶åœ¨æ ‘ä¸­çš„ä½ç½®ã€‚æ¯ä¸ªå°éƒ¨ä»¶çš„<code>BuildContext</code>éƒ½ä¼ é€’ç»™å®ƒä»¬çš„<code>build</code>æ–¹æ³•ã€‚<code>build</code>æ–¹æ³•è¿”å›å°éƒ¨ä»¶å‘ˆç°çš„å°éƒ¨ä»¶æ ‘ã€‚</p><p><code>context</code>å‚æ•°æ˜¯BuildContextç±»çš„ä¸€ä¸ªå®ä¾‹ï¼Œè¡¨ç¤ºå½“å‰ widget åœ¨ widget æ ‘ä¸­çš„ä¸Šä¸‹æ–‡ï¼Œæ¯ä¸€ä¸ª widget éƒ½ä¼šå¯¹åº”ä¸€ä¸ª context å¯¹è±¡ã€‚åœ¨å¾ˆå¤šæ—¶å€™æˆ‘ä»¬éƒ½éœ€è¦ä½¿ç”¨contextï¼Œæ¯”å¦‚è·å–ä¸»é¢˜ï¼š<code>Theme.of(context).colorScheme.primary</code>ã€‚</p><p><code>Key</code>: [Key]æ˜¯[Widget]ã€[Element]å’Œ[SemanticsNode]çš„æ ‡è¯†ç¬¦ã€‚Keyå¯ä»¥ä¿æŒç»„ä»¶ä¹‹å‰çš„çŠ¶æ€ï¼Œæ¯”å¦‚åœ¨ç”¨æˆ·æ»‘åŠ¨æ—¶æˆ–è€…ä¿®æ”¹é›†åˆæ—¶ï¼Œå†³å®šçš„æ¡ä»¶åœ¨<code>canUpdate()</code>æ–¹æ³•ä¸­ã€‚ä½¿ç”¨ <code>GlobalKey</code>æ—¶ï¼ŒFlutter ä¸ä»…ä¼šåœ¨æ ‘ä¸­æŸ¥æ‰¾ä¸ç‰¹å®šçº§åˆ«åŒ¹é…çš„é”®ï¼Œè¿˜ä¼šåœ¨æ•´ä¸ªåº”ç”¨ç¨‹åºä¸­æŸ¥æ‰¾,GlobalKeyå°±åƒå…¨å±€å˜é‡ã€‚</p><p><code>canUpdate(...)</code>: <code>newWidget</code>ä¸<code>oldWidget</code>çš„<code>runtimeType</code>å’Œ<code>key</code>åŒæ—¶ç›¸ç­‰æ—¶å°±ä¼šç”¨<code>new widget</code>å»æ›´æ–°<code>Element</code>å¯¹è±¡çš„é…ç½®ã€‚å¦‚æœ Type ç›¸åŒä½† Key ä¸åŒï¼Œåˆ™Elementå°†è¢«deactivatedï¼ˆé‡Šæ”¾ï¼Œä½†å®ƒå¯èƒ½ä»ç„¶å­˜åœ¨ï¼‰ã€‚å¦‚æœ Type ä¸åŒï¼Œåˆ™Elementå°†è¢«disposedï¼ˆæ°¸ä¹…åˆ é™¤ï¼‰ã€‚</p><p><code>element.mount()</code> :è°ƒç”¨<code>createRenderObject</code>åˆ›å»ºRenderObjectï¼Œå¹¶ä½¿ç”¨<code>attachRenderObject</code>å°†RenderObjectå…³è”åˆ°Elementä¸Šã€‚</p><h3 id=ä½¿ç”¨>ä½¿ç”¨</h3><p><strong>StatelessWidget</strong> è¦æ±‚æˆ‘ä»¬é‡å†™<code>build</code>æ–¹æ³•,å®ƒå°†<code>state</code>ä½œä¸ºè¾“å…¥å¹¶æä¾›ç›¸åº”çš„ UI æ˜¾ç¤ºåœ¨ç”¨æˆ·å±å¹•ä¸Šï¼šUI = build(state),å½“æˆ‘ä»¬åˆå§‹åŒ–ä¸€ä¸ªStatelessWidgetå¯¹è±¡æ—¶ä¼šè°ƒç”¨ build æ–¹æ³•ã€‚</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>class CounterWidget extends StatelessWidget {
</span></span><span class=line><span class=cl>  final bool isLoading;
</span></span><span class=line><span class=cl>  final int counter;  
</span></span><span class=line><span class=cl>  const CounterWidget({
</span></span><span class=line><span class=cl>    required this.isLoading,
</span></span><span class=line><span class=cl>    required this.counter,
</span></span><span class=line><span class=cl>  });  
</span></span><span class=line><span class=cl>  @override
</span></span><span class=line><span class=cl>  Widget build(BuildContext context) {
</span></span><span class=line><span class=cl>    return isLoading ? CircularProgressIndicator() : Text(&#39;$counter&#39;);
</span></span><span class=line><span class=cl>  }
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><p><strong>StatefulWidget</strong> è¦æ±‚æˆ‘ä»¬é‡å†™<code>createState</code>åŠŸèƒ½:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>class MyHomePage extends StatefulWidget {
</span></span><span class=line><span class=cl>  final bool isLoading;
</span></span><span class=line><span class=cl>  final int counter;  
</span></span><span class=line><span class=cl>  const MyHomePage({
</span></span><span class=line><span class=cl>    required this.isLoading,
</span></span><span class=line><span class=cl>    required this.counter,
</span></span><span class=line><span class=cl>  });  
</span></span><span class=line><span class=cl>  @override
</span></span><span class=line><span class=cl>  State<span class=p>&lt;</span><span class=nt>MyHomePage</span><span class=p>&gt;</span> createState() {
</span></span><span class=line><span class=cl>    return MyHomePageState();
</span></span><span class=line><span class=cl>  }
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><p><code>createState()</code>ä¼šä¸ºæ¯ä¸€ä¸ª<code>StatefulElement</code>åˆ›å»ºä¸€ä¸ªStateå¯¹è±¡ã€‚ç¤ºä¾‹ä¸­åˆ›å»ºäº†<code>MyHomePageState</code>å¯¹è±¡ï¼Œå½“<code>MyHomePageState</code>åˆå§‹åŒ–æ—¶ï¼Œå®ƒä¼šè°ƒç”¨<code>build</code>å‡½æ•°ã€‚</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>class MyHomePageState extends State<span class=p>&lt;</span><span class=nt>MyHomePage</span><span class=p>&gt;</span> {
</span></span><span class=line><span class=cl>  @override
</span></span><span class=line><span class=cl>  Widget build(BuildContext context) {
</span></span><span class=line><span class=cl>    return Scaffold(
</span></span><span class=line><span class=cl>      body: Center(
</span></span><span class=line><span class=cl>        child: CounterWidget(
</span></span><span class=line><span class=cl>          isLoading: widget.isLoading,
</span></span><span class=line><span class=cl>          counter: widget.counter,
</span></span><span class=line><span class=cl>        ),
</span></span><span class=line><span class=cl>      ),
</span></span><span class=line><span class=cl>    );
</span></span><span class=line><span class=cl>  }
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><p><code>widget.isLoading</code>ã€<code>widget.counter</code>å±æ€§ç”¨äºè¡¨ç¤ºå½“å‰é…ç½®ä¿¡æ¯ï¼Œå¹¶ä¸”åœ¨çˆ¶çº§æ›´æ–°å°éƒ¨ä»¶æ—¶ä¼šè¢«è‡ªåŠ¨æ›´æ–°ã€‚<code>setState</code>æ˜¯Stateçš„æ–¹æ³•ã€‚å½“æˆ‘ä»¬è°ƒç”¨setStateæ–¹æ³•æ—¶ï¼Œbuildæ–¹æ³•å°†ç«‹å³å†æ¬¡è¢«è°ƒç”¨ã€‚</p><p>å½“ä½ çš„ç»„ä»¶æ˜¯é™æ€çš„ï¼Œä¸éœ€è¦æ›´æ–°è‡ªèº«çŠ¶æ€,ä½¿ç”¨StatelessWidgetã€‚å½“ä½ çš„ç»„ä»¶éœ€è¦æ ¹æ®äº‹ä»¶æˆ–äº¤äº’æ¥åŠ¨æ€æ›´æ–°è‡ªèº«çŠ¶æ€,ä½¿ç”¨StatefulWidgetã€‚</p><h2 id=getx>Getx</h2><h3 id=çŠ¶æ€ç®¡ç†>çŠ¶æ€ç®¡ç†</h3><h4 id=ä»‹ç»>ä»‹ç»</h4><div class=table-wrapper><table><tr><td>åˆ†ç±»</td><td>çŠ¶æ€ç®¡ç†å™¨</td><td>æ¶ˆè€—RAM</td><td>ç»“è®º</td></tr><tr><td>æ— çŠ¶æ€é¡µé¢</td><td>GetView</td><td>æœ€å°‘</td><td>ç›¸å½“äºStatelessWidget,æ€§èƒ½æœ€å¥½ï¼Œæœ€å¸¸ç”¨</td></tr><tr><td>ç®€å•çš„çŠ¶æ€ç®¡ç†ï¼ˆä¸€ä¸ªé¡µé¢çš„çŠ¶æ€ç®¡ç†ï¼‰</td><td>GetBuilder</td><td>è¾ƒå°‘</td><td>ç›¸å½“äºStatefulWidget,æ€§èƒ½è¾ƒå¥½</td></tr><tr><td rowspan=2>ååº”å¼çŠ¶æ€ç®¡ç†ï¼ˆå…¨å±€çš„çŠ¶æ€ç®¡ç†ï¼‰</td><td>Obx</td><td>ç¨å¤š</td><td>ååº”å¼çš„åŸºç¡€å±‚ï¼Œè¾ƒGetxç®€æ´</td></tr><tr><td>GetX</td><td>è¾ƒå¤š</td><td>å¯ä»¥çµæ´»ä½¿ç”¨çš„ååº”å¼çŠ¶æ€ç®¡ç†</td></tr><tr><td>æ··åˆæ€ç®¡ç†</td><td>MixinBuilder</td><td>æœ€å¤š</td><td>åœ¨GetBuilderä¸­æ’å…¥ä¸€ä¸ªObxï¼Œæ—¢å¯ä»¥å“åº”å¼æ›´æ–°ã€ä¹Ÿå¯ä»¥æ‰‹åŠ¨æ›´æ–°</td></tr></table></div><h4 id=controller>Controller</h4><p>GetxçŠ¶æ€ç®¡ç†çš„ä»£ç ç»“æ„éƒ½å¯ä»¥åˆ†ä¸ºGetXControllerï¼ˆæ§åˆ¶å™¨å±‚ï¼‰å’Œviewï¼ˆç•Œé¢å±‚ï¼‰ï¼ŒGetXController å¯ä»¥è¿›ä¸€æ­¥åˆ†ä¸ºstateï¼ˆçŠ¶æ€å±‚/å˜é‡å±‚ï¼‰ï¼Œlogicï¼ˆé€»è¾‘å±‚ï¼‰ã€‚</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>â””â”€â”€ sinup
</span></span><span class=line><span class=cl>    â”œâ”€â”€ controller.dart    â”€â”€â”¤â”€ â”€ logic.dart
</span></span><span class=line><span class=cl>    â”‚                        â”‚â”€ â”€ state.dart
</span></span><span class=line><span class=cl>    â”œâ”€â”€ view.dart 
</span></span></code></pre></div><p><link href="https://fonts.googleapis.com/css?family=default" rel=stylesheet type=text/css><div style=font-family:default;font-size:20px;font-style:normal;font-weight:700;color:#000>ç”Ÿå‘½å‘¨æœŸ</div>åœ¨ StatefulWidget ä¸­ï¼Œä½¿ç”¨<code>initState</code>æˆ–<code>dispose()</code>ï¼Œè€Œåœ¨ Controller ä¸­æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç›¸å¯¹åº”çš„æ“ä½œï¼š</p><ol><li><code>onStart</code>ï¼ˆå¼€å§‹ï¼‰<strong>[ä¸å¯è¦†ç›–]</strong>ï¼šç»„ä»¶åœ¨å†…å­˜åˆ†é…çš„æ—¶é—´ç‚¹å°±ä¼šè¢«è°ƒç”¨ï¼Œå®Œæˆåä¼šè°ƒç”¨onInitæ–¹æ³•</li><li><code>onInit</code>ï¼ˆåˆå§‹åŒ–ï¼‰ï¼šç»„ä»¶åœ¨å†…å­˜åˆ†é…åä¼šè¢«é©¬ä¸Šè°ƒç”¨ï¼Œé€‚ç”¨äºåˆå§‹åŒ– Controllerï¼ˆä¾‹å¦‚ä¸€äº›æˆå‘˜å±æ€§çš„åˆå§‹åŒ–ï¼‰ï¼Œè¯¦è§Workerså°èŠ‚</li><li><code>onReady</code>ï¼ˆåŠ è½½å®Œæˆï¼‰ï¼šåœ¨ onInit ä¸€å¸§åè¢«è°ƒç”¨ï¼Œé€‚åˆåšä¸€äº›å¯¼èˆªè¿›å…¥çš„äº‹ä»¶ï¼ˆä¾‹å¦‚å¯¹è¯æ¡†æç¤ºã€SnackBarï¼‰æˆ–å¼‚æ­¥ç½‘ç»œè¯·æ±‚</li><li><code>onClose</code>ï¼ˆæ§åˆ¶å™¨è¢«é‡Šæ”¾ï¼‰ï¼šåœ¨ <code>onDelete</code> æ–¹æ³•å‰è°ƒç”¨ã€ç”¨äºé”€æ¯ <code>controller</code> ä½¿ç”¨çš„èµ„æºï¼ˆä¾‹å¦‚å…³é—­äº‹ä»¶ç›‘å¬ï¼Œå…³é—­æµå¯¹è±¡ã€åŠ¨ç”»ï¼‰æˆ–è€…é”€æ¯å¯èƒ½é€ æˆå†…å­˜æ³„éœ²çš„å¯¹è±¡ï¼ˆä¾‹å¦‚ <code>TextEditingController</code>ï¼Œ<code>AniamtionController</code>ï¼‰ã€‚ä¹Ÿé€‚ç”¨äºå°†æ•°æ®è¿›è¡Œç¦»çº¿æŒä¹…åŒ–ã€‚</li><li><code>onDelete</code>ï¼ˆåˆ é™¤ï¼‰<strong>[ä¸å¯è¦†ç›–]</strong>ï¼šåœ¨ <code>controller</code>é”€æ¯å‰è°ƒç”¨ï¼Œå°†æ§åˆ¶å™¨ä»å†…å­˜ä¸­åˆ é™¤</li></ol><h4 id=ååº”çŠ¶æ€ç®¡ç†>ååº”çŠ¶æ€ç®¡ç†</h4><h5 id=ååº”å˜é‡>ååº”å˜é‡</h5><p>ä½¿ç”¨ååº”çŠ¶æ€ç®¡ç†éœ€è¦å£°æ˜ååº”å˜é‡ï¼Œä½ æœ‰3ç§æ–¹æ³•å¯ä»¥æŠŠä¸€ä¸ªå˜é‡å˜æˆæ˜¯ &ldquo;å¯è§‚å¯Ÿçš„&rdquo;ã€‚</p><p>1 - ç¬¬ä¸€ç§æ˜¯ä½¿ç”¨ <strong><code>Rx{Type}</code></strong>ã€‚</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>// å»ºè®®ä½¿ç”¨åˆå§‹å€¼ï¼Œä½†ä¸æ˜¯å¼ºåˆ¶æ€§çš„
</span></span><span class=line><span class=cl>final name = RxString(&#39;&#39;);
</span></span><span class=line><span class=cl>final isLogged = RxBool(false);
</span></span><span class=line><span class=cl>final count = RxInt(0);
</span></span><span class=line><span class=cl>final balance = RxDouble(0.0);
</span></span><span class=line><span class=cl>final items = RxList&lt;String&gt;([]);
</span></span><span class=line><span class=cl>final myMap = RxMap&lt;String, int&gt;({});
</span></span></code></pre></div><p>2 - ç¬¬äºŒç§æ˜¯ä½¿ç”¨ <strong><code>Rx</code></strong>ï¼Œè§„å®šæ³›å‹ <code>Rx&lt;Type></code>ã€‚</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>final name = Rx&lt;String&gt;(&#39;&#39;);
</span></span><span class=line><span class=cl>final isLogged = Rx&lt;Bool&gt;(false);
</span></span><span class=line><span class=cl>final count = Rx&lt;Int&gt;(0);
</span></span><span class=line><span class=cl>final balance = Rx&lt;Double&gt;(0.0);
</span></span><span class=line><span class=cl>final number = Rx&lt;Num&gt;(0)
</span></span><span class=line><span class=cl>final items = Rx&lt;List&lt;String&gt;&gt;([]);
</span></span><span class=line><span class=cl>final myMap = Rx&lt;Map&lt;String, int&gt;&gt;({});
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>// è‡ªå®šä¹‰ç±» - å¯ä»¥æ˜¯ä»»ä½•ç±»
</span></span><span class=line><span class=cl>final user = Rx&lt;User&gt;();
</span></span></code></pre></div><p>3 - ç¬¬ä¸‰ç§æ›´å®ç”¨ã€æ›´ç®€å•å’Œ<strong>é¦–é€‰çš„</strong>æ–¹æ³•ï¼Œåªéœ€æ·»åŠ  <strong><code>.obs</code></strong> ä½œä¸º<code>value</code>çš„å±æ€§ã€‚</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>final name = &#39;&#39;.obs;
</span></span><span class=line><span class=cl>final isLogged = false.obs;
</span></span><span class=line><span class=cl>final count = 0.obs;
</span></span><span class=line><span class=cl>final balance = 0.0.obs;
</span></span><span class=line><span class=cl>final number = 0.obs;
</span></span><span class=line><span class=cl>final items = &lt;String&gt;[].obs;
</span></span><span class=line><span class=cl>final myMap = &lt;String, int&gt;{}.obs;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>// è‡ªå®šä¹‰ç±» - å¯ä»¥æ˜¯ä»»ä½•class, literally
</span></span><span class=line><span class=cl>final user = User().obs;
</span></span></code></pre></div><h5 id=ä½¿ç”¨value>ä½¿ç”¨value</h5><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>// controller
</span></span><span class=line><span class=cl>final count1 = 0.obs;
</span></span><span class=line><span class=cl>final count2 = 0.obs;
</span></span><span class=line><span class=cl>int get sum =&gt; count1.value + count2.value;   // ç”±äº.obsæŠŠå˜é‡æ¢æˆ`Rx{Type}`ç±»å‹ï¼Œæ‰€ä»¥éœ€è¦ç”¨.valueå–å€¼
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>// è§†å›¾
</span></span><span class=line><span class=cl>GetX&lt;Controller&gt;(
</span></span><span class=line><span class=cl>  builder: (controller) {
</span></span><span class=line><span class=cl>    print(&#34;count 1 rebuild&#34;);
</span></span><span class=line><span class=cl>    return Text(&#39;${controller.count1.value}&#39;);
</span></span><span class=line><span class=cl>  },
</span></span><span class=line><span class=cl>),
</span></span><span class=line><span class=cl>GetX&lt;Controller&gt;(
</span></span><span class=line><span class=cl>  builder: (controller) {
</span></span><span class=line><span class=cl>    print(&#34;count 2 rebuild&#34;);
</span></span><span class=line><span class=cl>    return Text(&#39;${controller.count2.value}&#39;);
</span></span><span class=line><span class=cl>  },
</span></span><span class=line><span class=cl>),
</span></span><span class=line><span class=cl>GetX&lt;Controller&gt;(
</span></span><span class=line><span class=cl>  builder: (controller) {
</span></span><span class=line><span class=cl>    print(&#34;count 3 rebuild&#34;);
</span></span><span class=line><span class=cl>    return Text(&#39;${controller.sum}&#39;);
</span></span><span class=line><span class=cl>  },
</span></span><span class=line><span class=cl>),
</span></span></code></pre></div><h5 id=obx>Obx</h5><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>class StateObxView extends StatelessWidget {
</span></span><span class=line><span class=cl>  StateObxView({Key? key}) : super(key: key);
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  final count = 0.obs;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  @override
</span></span><span class=line><span class=cl>  Widget build(BuildContext context) {
</span></span><span class=line><span class=cl>    return Scaffold(
</span></span><span class=line><span class=cl>      appBar: AppBar(
</span></span><span class=line><span class=cl>        title: Text(&#34;Obx(...)&#34;),
</span></span><span class=line><span class=cl>      ),
</span></span><span class=line><span class=cl>      body: Center(
</span></span><span class=line><span class=cl>        child: Column(
</span></span><span class=line><span class=cl>          children: [
</span></span><span class=line><span class=cl>            Obx(() =&gt; Text(&#34;count1 -&gt; &#34; + count.toString())),
</span></span><span class=line><span class=cl>            Obx(() =&gt; Text(&#34;count2 -&gt; &#34; + count.toString())),
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            //
</span></span><span class=line><span class=cl>            Divider(),
</span></span><span class=line><span class=cl>            ElevatedButton(
</span></span><span class=line><span class=cl>              onPressed: () {
</span></span><span class=line><span class=cl>                count.value++;
</span></span><span class=line><span class=cl>              },
</span></span><span class=line><span class=cl>              child: Text(&#39;add&#39;),
</span></span><span class=line><span class=cl>            ),
</span></span><span class=line><span class=cl>          ],
</span></span><span class=line><span class=cl>        ),
</span></span><span class=line><span class=cl>      ),
</span></span><span class=line><span class=cl>    );
</span></span><span class=line><span class=cl>  }
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><h5 id=getx-1>GetX</h5><p>Controller</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>class CountController extends GetxController {
</span></span><span class=line><span class=cl>  final _count = 0.obs;
</span></span><span class=line><span class=cl>  set count(value) =&gt; this._count.value = value;
</span></span><span class=line><span class=cl>  get count =&gt; this._count.value;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  final _count2 = 0.obs;
</span></span><span class=line><span class=cl>  set count2(value) =&gt; this._count2.value = value;
</span></span><span class=line><span class=cl>  get count2 =&gt; this._count2.value;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  add() =&gt; _count.value++;
</span></span><span class=line><span class=cl>  add2() =&gt; _count2.value++;
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><p>View</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>class StateGetxView extends StatelessWidget {
</span></span><span class=line><span class=cl>  StateGetxView({Key? key}) : super(key: key);
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  final controller = CountController();
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  @override
</span></span><span class=line><span class=cl>  Widget build(BuildContext context) {
</span></span><span class=line><span class=cl>    return Scaffold(
</span></span><span class=line><span class=cl>      appBar: AppBar(
</span></span><span class=line><span class=cl>        title: Text(&#34;Getx&#34;),
</span></span><span class=line><span class=cl>      ),
</span></span><span class=line><span class=cl>      body: Center(
</span></span><span class=line><span class=cl>        child: Column(
</span></span><span class=line><span class=cl>          children: [
</span></span><span class=line><span class=cl>            GetX<span class=p>&lt;</span><span class=nt>CountController</span><span class=p>&gt;</span>(
</span></span><span class=line><span class=cl>              init: controller,
</span></span><span class=line><span class=cl>              initState: (_) {},
</span></span><span class=line><span class=cl>              builder: (_) {
</span></span><span class=line><span class=cl>                print(&#34;GetX - 1&#34;);
</span></span><span class=line><span class=cl>                return Text(&#39;value 1 -&gt; ${_.count}&#39;);
</span></span><span class=line><span class=cl>              },
</span></span><span class=line><span class=cl>            ),
</span></span><span class=line><span class=cl>            GetX<span class=p>&lt;</span><span class=nt>CountController</span><span class=p>&gt;</span>(
</span></span><span class=line><span class=cl>              init: controller,
</span></span><span class=line><span class=cl>              initState: (_) {},
</span></span><span class=line><span class=cl>              builder: (_) {
</span></span><span class=line><span class=cl>                print(&#34;GetX - 2&#34;);
</span></span><span class=line><span class=cl>                return Text(&#39;value 2 -&gt; ${_.count}&#39;);
</span></span><span class=line><span class=cl>              },
</span></span><span class=line><span class=cl>            ),
</span></span><span class=line><span class=cl>            Divider(),
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            //
</span></span><span class=line><span class=cl>            GetX<span class=p>&lt;</span><span class=nt>CountController</span><span class=p>&gt;</span>(
</span></span><span class=line><span class=cl>              init: controller,
</span></span><span class=line><span class=cl>              initState: (_) {},
</span></span><span class=line><span class=cl>              builder: (_) {
</span></span><span class=line><span class=cl>                print(&#34;GetX - 3&#34;);
</span></span><span class=line><span class=cl>                return Column(
</span></span><span class=line><span class=cl>                  children: [
</span></span><span class=line><span class=cl>                    Text(&#39;value 3 -&gt; ${_.count}&#39;),
</span></span><span class=line><span class=cl>                    ElevatedButton(
</span></span><span class=line><span class=cl>                      onPressed: () {
</span></span><span class=line><span class=cl>                        _.add();
</span></span><span class=line><span class=cl>                      },
</span></span><span class=line><span class=cl>                      child: Text(&#39;count1&#39;),
</span></span><span class=line><span class=cl>                    )
</span></span><span class=line><span class=cl>                  ],
</span></span><span class=line><span class=cl>                );
</span></span><span class=line><span class=cl>              },
</span></span><span class=line><span class=cl>            ),
</span></span><span class=line><span class=cl>            Divider(),
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            // count2
</span></span><span class=line><span class=cl>            GetX<span class=p>&lt;</span><span class=nt>CountController</span><span class=p>&gt;</span>(
</span></span><span class=line><span class=cl>              init: controller,
</span></span><span class=line><span class=cl>              initState: (_) {},
</span></span><span class=line><span class=cl>              builder: (_) {
</span></span><span class=line><span class=cl>                print(&#34;GetX - 4&#34;);
</span></span><span class=line><span class=cl>                return Text(&#39;value 4 -&gt; ${_.count2}&#39;);
</span></span><span class=line><span class=cl>              },
</span></span><span class=line><span class=cl>            ),
</span></span><span class=line><span class=cl>            Divider(),
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            // æŒ‰é’®
</span></span><span class=line><span class=cl>            ElevatedButton(
</span></span><span class=line><span class=cl>              onPressed: () {
</span></span><span class=line><span class=cl>                controller.add();
</span></span><span class=line><span class=cl>              },
</span></span><span class=line><span class=cl>              child: Text(&#39;count1&#39;),
</span></span><span class=line><span class=cl>            ),
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            ElevatedButton(
</span></span><span class=line><span class=cl>              onPressed: () {
</span></span><span class=line><span class=cl>                controller.add2();
</span></span><span class=line><span class=cl>              },
</span></span><span class=line><span class=cl>              child: Text(&#39;count2&#39;),
</span></span><span class=line><span class=cl>            ),
</span></span><span class=line><span class=cl>          ],
</span></span><span class=line><span class=cl>        ),
</span></span><span class=line><span class=cl>      ),
</span></span><span class=line><span class=cl>    );
</span></span><span class=line><span class=cl>  }
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><h4 id=ç®€å•çŠ¶æ€ç®¡ç†>ç®€å•çŠ¶æ€ç®¡ç†</h4><h5 id=getbuilder>GetBuilder</h5><p>ControlleråŒGetx</p><p>View</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>class StateGetBuilderView extends StatelessWidget {
</span></span><span class=line><span class=cl>  StateGetBuilderView({Key? key}) : super(key: key);
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  final controller = CountController();
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  @override
</span></span><span class=line><span class=cl>  Widget build(BuildContext context) {
</span></span><span class=line><span class=cl>    return Scaffold(
</span></span><span class=line><span class=cl>      appBar: AppBar(
</span></span><span class=line><span class=cl>        title: Text(&#34;GetBuilder&#34;),
</span></span><span class=line><span class=cl>      ),
</span></span><span class=line><span class=cl>      body: Center(
</span></span><span class=line><span class=cl>        child: Column(
</span></span><span class=line><span class=cl>          children: [
</span></span><span class=line><span class=cl>            GetBuilder<span class=p>&lt;</span><span class=nt>CountController</span><span class=p>&gt;</span>(
</span></span><span class=line><span class=cl>              init: controller,
</span></span><span class=line><span class=cl>              initState: (_) {},
</span></span><span class=line><span class=cl>              builder: (_) {
</span></span><span class=line><span class=cl>                print(&#34;GetBuilder - 1&#34;);
</span></span><span class=line><span class=cl>                return Text(&#39;value -&gt; ${_.count}&#39;);
</span></span><span class=line><span class=cl>              },
</span></span><span class=line><span class=cl>            ),
</span></span><span class=line><span class=cl>            GetBuilder<span class=p>&lt;</span><span class=nt>CountController</span><span class=p>&gt;</span>(
</span></span><span class=line><span class=cl>              init: controller,
</span></span><span class=line><span class=cl>              initState: (_) {},
</span></span><span class=line><span class=cl>              builder: (_) {
</span></span><span class=line><span class=cl>                print(&#34;GetBuilder - 2&#34;);
</span></span><span class=line><span class=cl>                return Text(&#39;value -&gt; ${_.count}&#39;);
</span></span><span class=line><span class=cl>              },
</span></span><span class=line><span class=cl>            ),
</span></span><span class=line><span class=cl>            Divider(),
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            //
</span></span><span class=line><span class=cl>            GetBuilder<span class=p>&lt;</span><span class=nt>CountController</span><span class=p>&gt;</span>(
</span></span><span class=line><span class=cl>              init: controller,
</span></span><span class=line><span class=cl>              initState: (_) {},
</span></span><span class=line><span class=cl>              builder: (_) {
</span></span><span class=line><span class=cl>                print(&#34;GetBuilder - 3&#34;);
</span></span><span class=line><span class=cl>                return Column(
</span></span><span class=line><span class=cl>                  children: [
</span></span><span class=line><span class=cl>                    Text(&#39;value -&gt; ${_.count}&#39;),
</span></span><span class=line><span class=cl>                    ElevatedButton(
</span></span><span class=line><span class=cl>                      onPressed: () {
</span></span><span class=line><span class=cl>                        _.add();
</span></span><span class=line><span class=cl>                      },
</span></span><span class=line><span class=cl>                      child: Text(&#39;GetBuilder -&gt; add&#39;),
</span></span><span class=line><span class=cl>                    )
</span></span><span class=line><span class=cl>                  ],
</span></span><span class=line><span class=cl>                );
</span></span><span class=line><span class=cl>              },
</span></span><span class=line><span class=cl>            ),
</span></span><span class=line><span class=cl>            Divider(),
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            // count2
</span></span><span class=line><span class=cl>            GetBuilder<span class=p>&lt;</span><span class=nt>CountController</span><span class=p>&gt;</span>(
</span></span><span class=line><span class=cl>              init: controller,
</span></span><span class=line><span class=cl>              initState: (_) {},
</span></span><span class=line><span class=cl>              builder: (_) {
</span></span><span class=line><span class=cl>                print(&#34;GetBuilder - 4&#34;);
</span></span><span class=line><span class=cl>                return Text(&#39;value count2 -&gt; ${_.count2}&#39;);
</span></span><span class=line><span class=cl>              },
</span></span><span class=line><span class=cl>            ),
</span></span><span class=line><span class=cl>            Divider(),
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            // id2 æ ‡è®°ä¸€ä¸ª `builder` ï¼Œè§¦å‘æ–¹å¼`controller.update([&#34;id2&#34;]);` ï¼Œå¯ä¼ å¤šä¸ª `Array` ç±»å‹ã€‚
</span></span><span class=line><span class=cl>            GetBuilder<span class=p>&lt;</span><span class=nt>CountController</span><span class=p>&gt;</span>(
</span></span><span class=line><span class=cl>              id: &#34;id2&#34;,
</span></span><span class=line><span class=cl>              init: controller,
</span></span><span class=line><span class=cl>              initState: (_) {},
</span></span><span class=line><span class=cl>              builder: (_) {
</span></span><span class=line><span class=cl>                print(&#34;GetBuilder - 4&#34;);
</span></span><span class=line><span class=cl>                return Text(&#39;id2 -&gt; value count2 -&gt; ${_.count2}&#39;);
</span></span><span class=line><span class=cl>              },
</span></span><span class=line><span class=cl>            ),
</span></span><span class=line><span class=cl>            Divider(),
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            // æŒ‰é’®
</span></span><span class=line><span class=cl>            ElevatedButton(
</span></span><span class=line><span class=cl>              onPressed: () {
</span></span><span class=line><span class=cl>                controller.add();
</span></span><span class=line><span class=cl>              },
</span></span><span class=line><span class=cl>              child: Text(&#39;add&#39;),
</span></span><span class=line><span class=cl>            ),
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            ElevatedButton(
</span></span><span class=line><span class=cl>              onPressed: () {
</span></span><span class=line><span class=cl>                controller.add2();
</span></span><span class=line><span class=cl>              },
</span></span><span class=line><span class=cl>              child: Text(&#39;add2&#39;),
</span></span><span class=line><span class=cl>            ),
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            ElevatedButton(
</span></span><span class=line><span class=cl>              onPressed: () {
</span></span><span class=line><span class=cl>                controller.update();
</span></span><span class=line><span class=cl>              },
</span></span><span class=line><span class=cl>              child: Text(&#39;controller.update()&#39;),
</span></span><span class=line><span class=cl>            ),
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            ElevatedButton(
</span></span><span class=line><span class=cl>              onPressed: () {
</span></span><span class=line><span class=cl>                controller.update([&#34;id2&#34;]);
</span></span><span class=line><span class=cl>              },
</span></span><span class=line><span class=cl>              child: Text(&#39;controller.update(id2)&#39;),
</span></span><span class=line><span class=cl>            ),
</span></span><span class=line><span class=cl>          ],
</span></span><span class=line><span class=cl>        ),
</span></span><span class=line><span class=cl>      ),
</span></span><span class=line><span class=cl>    );
</span></span><span class=line><span class=cl>  }
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><h4 id=workers>Workers</h4><p>Workerså¯ä»¥ç²¾ç¡®æ§åˆ¶äº‹ä»¶å‘ç”Ÿæ—¶è§¦å‘å›è°ƒï¼Œå¸¸ç”¨äºControllerçš„onInitä¸­ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>class CountController extends GetxController {
</span></span><span class=line><span class=cl>  final _count = 0.obs;
</span></span><span class=line><span class=cl>  set count(value) =&gt; this._count.value = value;
</span></span><span class=line><span class=cl>  get count =&gt; this._count.value;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  add() =&gt; _count.value++;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  @override
</span></span><span class=line><span class=cl>  void onInit() {
</span></span><span class=line><span class=cl>    super.onInit();
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    // æ¯æ¬¡_countå˜åŒ–æ—¶è°ƒç”¨
</span></span><span class=line><span class=cl>    ever(_count, (value) {
</span></span><span class=line><span class=cl>      print(&#34;ever -&gt; &#34; + value.toString());
</span></span><span class=line><span class=cl>    });
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    // ç¬¬ä¸€æ¬¡è¢«æ”¹å˜æ—¶æ‰ä¼šè¢«è°ƒç”¨ã€‚
</span></span><span class=line><span class=cl>    once(_count, (value) {
</span></span><span class=line><span class=cl>      print(&#34;once -&gt; &#34; + value.toString());
</span></span><span class=line><span class=cl>    });
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    // é˜²DDos - æ¯å½“ç”¨æˆ·åœæ­¢è¾“å…¥1ç§’æ—¶è°ƒç”¨
</span></span><span class=line><span class=cl>    debounce(
</span></span><span class=line><span class=cl>      _count,
</span></span><span class=line><span class=cl>      (value) {
</span></span><span class=line><span class=cl>        print(&#34;debounce -&gt; &#34; + value.toString());
</span></span><span class=line><span class=cl>      },
</span></span><span class=line><span class=cl>      time: Duration(seconds: 1),
</span></span><span class=line><span class=cl>    );
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    // å¿½ç•¥1ç§’å†…çš„æ‰€æœ‰å˜åŒ–ã€‚
</span></span><span class=line><span class=cl>    interval(
</span></span><span class=line><span class=cl>      _count,
</span></span><span class=line><span class=cl>      (value) {
</span></span><span class=line><span class=cl>        print(&#34;interval -&gt; &#34; + value.toString());
</span></span><span class=line><span class=cl>      },
</span></span><span class=line><span class=cl>      time: Duration(seconds: 1),
</span></span><span class=line><span class=cl>    );
</span></span><span class=line><span class=cl>  }
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><h3 id=è·¯ç”±ç®¡ç†>è·¯ç”±ç®¡ç†</h3><h4 id=æ™®é€šè·¯ç”±>æ™®é€šè·¯ç”±</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>// å¯¼èˆªåˆ°æ–°çš„é¡µé¢ã€‚
</span></span><span class=line><span class=cl>Get.to(NextScreen());
</span></span><span class=line><span class=cl>// è¦å¯¼èˆªåˆ°ä¸‹ä¸€æ¡è·¯ç”±ï¼Œå¹¶åœ¨è¿”å›åç«‹å³æ¥æ”¶æˆ–æ›´æ–°æ•°æ®ã€‚
</span></span><span class=line><span class=cl>var data = await Get.to(Payment());
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>// å…³é—­SnackBarsã€Dialogsã€BottomSheetsæˆ–ä»»ä½•ä½ é€šå¸¸ä¼šç”¨Navigator.pop(context)å…³é—­çš„ä¸œè¥¿ã€‚
</span></span><span class=line><span class=cl>Get.back();
</span></span><span class=line><span class=cl>// åœ¨å¦ä¸€ä¸ªé¡µé¢ä¸Šï¼Œå‘é€å‰ä¸€ä¸ªè·¯ç”±çš„æ•°æ®ã€‚å¹¶ä½¿ç”¨å®ƒã€‚
</span></span><span class=line><span class=cl>Get.back(result: &#39;success&#39;);
</span></span><span class=line><span class=cl>if(data == &#39;success&#39;) madeAnything();
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>// è¿›å…¥ä¸‹ä¸€ä¸ªé¡µé¢ï¼Œä½†æ²¡æœ‰è¿”å›ä¸Šä¸€ä¸ªé¡µé¢çš„é€‰é¡¹ï¼ˆç”¨äºSplashScreensï¼Œç™»å½•é¡µé¢ç­‰ï¼‰ã€‚
</span></span><span class=line><span class=cl>Get.off(NextScreen());
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>// è¿›å…¥ä¸‹ä¸€ä¸ªç•Œé¢å¹¶å–æ¶ˆä¹‹å‰çš„æ‰€æœ‰è·¯ç”±ï¼ˆåœ¨è´­ç‰©è½¦ã€æŠ•ç¥¨å’Œæµ‹è¯•ä¸­å¾ˆæœ‰ç”¨ï¼‰ã€‚
</span></span><span class=line><span class=cl>Get.offAll(NextScreen());
</span></span></code></pre></div><h4 id=åˆ«åè·¯ç”±>åˆ«åè·¯ç”±</h4><p>æ™®é€šè·¯ç”±ç®¡ç†èµ·æ¥æ¯”è¾ƒéº»çƒ¦,é€šå¸¸æˆ‘ä»¬ä½¿ç”¨åˆ«åè·¯ç”±ã€‚</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>// å¯¼èˆªåˆ°ä¸‹ä¸€ä¸ªé¡µé¢
</span></span><span class=line><span class=cl>Get.toNamed(&#34;/NextScreen&#34;);
</span></span><span class=line><span class=cl>// ä¼ é€’å‚æ•°
</span></span><span class=line><span class=cl>Get.toNamed(&#34;/NextScreen&#34;, arguments: &#34;Hello&#34;);
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>// æµè§ˆå¹¶åˆ é™¤å‰ä¸€ä¸ªé¡µé¢ã€‚
</span></span><span class=line><span class=cl>Get.offNamed(&#34;/NextScreen&#34;);
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>// æµè§ˆå¹¶åˆ é™¤æ‰€æœ‰ä»¥å‰çš„é¡µé¢ã€‚
</span></span><span class=line><span class=cl>Get.offAllNamed(&#34;/NextScreen&#34;);
</span></span><span class=line><span class=cl>// åŠ¨æ€URL
</span></span><span class=line><span class=cl>Get.offAllNamed(&#34;/NextScreen?device=phone<span class=ni>&amp;id=354&amp;name=Enzo&#34;);</span>
</span></span></code></pre></div><p><strong>ç¤ºä¾‹ 1</strong></p><p>æ³¨å†Œæ—¶è·³åˆ°åˆ°Piné¡µé¢ï¼Œè·¯ç”±ä¼ å‚ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>// RegisterController
</span></span><span class=line><span class=cl>Get.offNamed(
</span></span><span class=line><span class=cl>  RouteNames.systemRegisterPin,
</span></span><span class=line><span class=cl>  arguments: UserRegisterReq(
</span></span><span class=line><span class=cl>    username: userNameController.text,
</span></span><span class=line><span class=cl>    email: emailController.text,
</span></span><span class=line><span class=cl>    password: password,
</span></span><span class=line><span class=cl>  ),
</span></span><span class=line><span class=cl>);
</span></span></code></pre></div><p>ä»è·¯ç”±æ¥æ”¶å‚æ•°ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>// RegisterPinController
</span></span><span class=line><span class=cl>UserRegisterReq? req = Get.arguments;
</span></span></code></pre></div><h3 id=ä¾èµ–æ³¨å…¥>ä¾èµ–æ³¨å…¥</h3><p><strong>Get.put()ï¼š</strong> ä¸ä½¿ç”¨æ§åˆ¶å™¨å®ä¾‹ä¹Ÿä¼šè¢«åˆ›å»º</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>Get.put(CountController());
</span></span></code></pre></div><p><strong>Get.lazyPut()ï¼š</strong> æ‡’åŠ è½½æ–¹å¼åˆ›å»ºå®ä¾‹ï¼Œåªæœ‰åœ¨ä½¿ç”¨æ—¶æ‰åˆ›å»º</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>Get.lazyPut<span class=p>&lt;</span><span class=nt>CountController</span><span class=p>&gt;</span>(() =&gt; CountController());
</span></span></code></pre></div><p><strong>Get.putAsync()ï¼š</strong> <code>Get.put()</code>çš„å¼‚æ­¥ç‰ˆç‰ˆæœ¬</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>Get.putAsync<span class=p>&lt;</span><span class=nt>CountController</span><span class=p>&gt;</span>(() async =&gt; await CountController());
</span></span></code></pre></div><p><strong>Get.create()ï¼š</strong> æ¯æ¬¡ä½¿ç”¨éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å®ä¾‹</p><p><strong>Get.find()ï¼š</strong> ä½ å¯ä»¥å®ä¾‹åŒ–100ä¸‡ä¸ªæ§åˆ¶å™¨ï¼ŒGetæ€»ä¼šæ‰¾åˆ°ä½ æ‰€éœ€çš„æ§åˆ¶å™¨</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>Get.find<span class=p>&lt;</span><span class=nt>CountController</span><span class=p>&gt;</span>();
</span></span></code></pre></div><h3 id=å…¶ä»–>å…¶ä»–</h3><h4 id=getview>GetView</h4><p>ä¸€ä¸ªå·²æ³¨å†ŒControllerçš„<code>const Stateless</code>Widgetã€‚</p><h4 id=getxservice>GetxService</h4><p>è¿™ä¸ªç±»å°±åƒä¸€ä¸ªGetxControllerï¼Œéœ€è¦åœ¨åº”ç”¨ç¨‹åºçš„ç”Ÿå‘½å‘¨æœŸç»å¯¹æŒä¹…åŒ–ç±»å®ä¾‹ï¼Œä½¿ç”¨GetxServiceã€‚</p><h4 id=å…¶ä»–é«˜çº§-api>å…¶ä»–é«˜çº§ API</h4><p><a class=link href=https://github.com/jonataslaw/getx#other-advanced-apis target=_blank rel=noopener>https://github.com/jonataslaw/getx#other-advanced-apis</a></p><h2 id=dio>dio</h2><h3 id=åŸç†>åŸç†</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl># dio_mixin.dart æ–‡ä»¶ä¸­ DioMixin å®ç°äº† Dio
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>abstract class DioMixin implements Dio {
</span></span><span class=line><span class=cl>  @override
</span></span><span class=line><span class=cl>  Future<span class=p>&lt;</span><span class=nt>Response</span><span class=err>&lt;</span><span class=na>T</span><span class=p>&gt;</span>&gt; post<span class=p>&lt;</span><span class=nt>T</span><span class=p>&gt;</span>(
</span></span><span class=line><span class=cl>    String path, {                            # pathï¼š è¯·æ±‚çš„urlé“¾æ¥
</span></span><span class=line><span class=cl>    data,                                     # dataï¼š è¯·æ±‚æ•°æ®ï¼Œä¾‹å¦‚ä¸Šä¼ ç”¨åˆ°çš„FromData
</span></span><span class=line><span class=cl>    Map<span class=p>&lt;</span><span class=nt>String</span><span class=err>,</span> <span class=na>dynamic</span><span class=p>&gt;</span>? queryParameters,    # dataï¼š è¯·æ±‚æ•°æ®ï¼Œä¾‹å¦‚ä¸Šä¼ ç”¨åˆ°çš„FromData
</span></span><span class=line><span class=cl>    Options? options,                         # queryParametersï¼š æŸ¥è¯¢å‚æ•°
</span></span><span class=line><span class=cl>    CancelToken? cancelToken,                 # cancelTokenï¼š ç”¨æ¥å–æ¶ˆå‘é€è¯·æ±‚çš„token
</span></span><span class=line><span class=cl>    ProgressCallback? onSendProgress,         # onSendProgressï¼š ç½‘ç»œè¯·æ±‚å‘é€çš„è¿›åº¦
</span></span><span class=line><span class=cl>    ProgressCallback? onReceiveProgress,      # onSendProgressï¼š ç½‘ç»œè¯·æ±‚å‘é€çš„è¿›åº¦
</span></span><span class=line><span class=cl>  }) {
</span></span><span class=line><span class=cl>    return request<span class=p>&lt;</span><span class=nt>T</span><span class=p>&gt;</span>(                        # è¿”å›requestæ–¹æ³•     
</span></span><span class=line><span class=cl>      path,
</span></span><span class=line><span class=cl>      data: data,
</span></span><span class=line><span class=cl>      options: checkOptions(&#39;POST&#39;, options),
</span></span><span class=line><span class=cl>      queryParameters: queryParameters,
</span></span><span class=line><span class=cl>      cancelToken: cancelToken,
</span></span><span class=line><span class=cl>      onSendProgress: onSendProgress,
</span></span><span class=line><span class=cl>      onReceiveProgress: onReceiveProgress,
</span></span><span class=line><span class=cl>    );
</span></span><span class=line><span class=cl>  }
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><p>get() post() ç­‰è°ƒç”¨æ—¶ï¼Œè¿”å›requestæ–¹æ³•ï¼Œrequest æ–¹æ³•å¯¹è¯·æ±‚å‚æ•°å¤„ç†ï¼Œå¹¶è¿”å› fetch æ–¹æ³•ï¼Œfetch è¿›è¡Œå“åº”æ•°æ®è®¾å®šã€æ„å»ºè¯·æ±‚æµã€æ·»åŠ æ‹¦æˆªå™¨ã€è¯·æ±‚åˆ†å‘ã€‚</p><h2 id=webview>WebView</h2><p>WebViewæ˜¯åº”ç”¨å†…æ˜¾ç¤ºç½‘é¡µçš„åŠŸèƒ½ï¼ŒæŸ¥çœ‹é¡¹ç›®çš„å®˜ç½‘ã€æ–‡æ¡£ã€æ¡æ¬¾ç­‰ç»å¸¸ç”¨åˆ°ã€‚æ¨èä½¿ç”¨flutter_inappwebviewï¼Œæ¯”å®˜æ–¹webview_flutteræœ‰æ›´ä¸°å¯Œçš„åŠŸèƒ½å’Œè¯¦å°½çš„<a class=link href=https://inappwebview.dev/docs/5.x.x/intro target=_blank rel=noopener>æ–‡æ¡£</a>ã€‚ä¸»è¦åŠŸèƒ½ï¼š</p><ul><li><p><a class=link href=https://inappwebview.dev/docs/webview/in-app-webview target=_blank rel=noopener>InAppWebView</a>ï¼šæ˜¯ä¸€ä¸ªå†…åµŒåŸç”Ÿ WebView å°éƒ¨ä»¶ï¼Œé›†æˆåˆ° Flutter å°éƒ¨ä»¶æ ‘ä¸­ã€‚</p><ul><li><a class=link href=https://inappwebview.dev/docs/webview/context-menu target=_blank rel=noopener>ContextMenu</a>ï¼šWebView çš„å¿«æ·èœå•ã€‚ä¾‹å¦‚é•¿æŒ‰ç½‘é¡µæ–‡æœ¬åçš„å¤åˆ¶ã€‚</li><li><a class=link href=https://inappwebview.dev/docs/webview/headless-in-app-webview target=_blank rel=noopener>HeadlessInAppWebView</a>ï¼šæ— å¤´æ¨¡å¼ä¸‹çš„ WebViewã€‚åœ¨æ²¡æœ‰ç•Œé¢æˆ–UIçš„æƒ…å†µä¸‹è¿è¡ŒWebViewã€‚å®ƒå¯ä»¥åœ¨æ²¡æœ‰ç”¨æˆ·ç•Œé¢çš„æƒ…å†µä¸‹æ‰§è¡Œç½‘é¡µåŠ è½½å’Œæ¸²æŸ“æ“ä½œï¼Œè€Œä¸éœ€è¦åœ¨ç”¨æˆ·ç•Œé¢ä¸­æ˜¾ç¤ºç½‘é¡µï¼Œç”¨äºåå°å¤„ç†ç½‘é¡µæ•°æ®ã€è‡ªåŠ¨åŒ–æµ‹è¯•ã€ç½‘ç»œçˆ¬è™«ç­‰ã€‚</li></ul></li><li><p>InAppBrowser</p><ul><li><a class=link href=https://inappwebview.dev/docs/in-app-browsers/in-app-browser target=_blank rel=noopener>InAppBrowser</a>ï¼šæ˜¾ç¤ºåœ¨ Flutter åº”ç”¨ç¨‹åºé¡¶éƒ¨çš„åŸç”Ÿ WebViewï¼Œå®ƒæ²¡æœ‰é›†æˆåˆ° Flutter å°éƒ¨ä»¶æ ‘ä¸­ã€‚</li><li><a class=link href=https://inappwebview.dev/docs/in-app-browsers/chrome-safari-browser target=_blank rel=noopener>ChromeSafariBrowser</a>ï¼šAndroid ä¸Šçš„ <a class=link href=https://developer.chrome.com/docs/android/custom-tabs/overview/ target=_blank rel=noopener>Chrome è‡ªå®šä¹‰é€‰é¡¹å¡</a>å’Œ iOS ä¸Šçš„<a class=link href=https://developer.apple.com/documentation/safariservices/sfsafariviewcontroller target=_blank rel=noopener>SFSafariViewController</a>ã€‚</li></ul></li><li><p><a class=link href=https://inappwebview.dev/docs/in-app-localhost-server target=_blank rel=noopener>InAppLocalhostServer</a>ï¼šè¿™ä¸ªç±»å…è®¸ä½ åœ¨ http://localhost:[port] ä¸Šåˆ›å»ºä¸€ä¸ªç®€å•çš„æœåŠ¡å™¨ã€‚é»˜è®¤ç«¯å£å€¼ä¸º 8080ã€‚èƒ½å¤Ÿåœ¨æœ¬åœ°æœåŠ¡å™¨ä¸Šç¼“å­˜ jsï¼Œhtmlç­‰èµ„äº§æ–‡ä»¶ï¼Œä¼˜åŒ–åŠ è½½æ—¶é—´ã€‚</p></li><li><p><a class=link href=https://inappwebview.dev/docs/cookie-manager target=_blank rel=noopener>CookieManager</a>ï¼šæ­¤ç±»å®ç°äº†ä¸€ä¸ªå•ä¾‹å¯¹è±¡ï¼ˆå…±äº«å®ä¾‹ï¼‰ï¼Œè¯¥å¯¹è±¡ç®¡ç† WebView å®ä¾‹ä½¿ç”¨çš„ cookieã€‚</p></li><li><p><a class=link href=https://inappwebview.dev/docs/http-auth-credential-database target=_blank rel=noopener>HttpAuthCredentialDatabase</a>ï¼šæ­¤ç±»å®ç°ç®¡ç†å…±äº« HTTP èº«ä»½éªŒè¯å‡­æ®ç¼“å­˜çš„å•ä¾‹å¯¹è±¡ï¼ˆå…±äº«å®ä¾‹ï¼‰ã€‚</p></li><li><p><a class=link href=https://inappwebview.dev/docs/web-storage-manager target=_blank rel=noopener>WebStorageManager</a>ï¼šè¿™ä¸ªç±»å®ç°äº†ä¸€ä¸ªå•ä¾‹å¯¹è±¡ï¼ˆå…±äº«å®ä¾‹ï¼‰ï¼Œå®ƒç®¡ç† WebView å®ä¾‹ä½¿ç”¨çš„ Web å­˜å‚¨ã€‚</p></li><li><p><a class=link href=https://inappwebview.dev/docs/service-worker target=_blank rel=noopener>Service Worker</a>ï¼šService Worker æ˜¯ PWA çš„åŸºæœ¬ç»„æˆéƒ¨åˆ†ã€‚å®ƒä»¬æ”¯æŒå¿«é€ŸåŠ è½½ï¼ˆæ— è®ºç½‘ç»œå¦‚ä½•ï¼‰ã€ç¦»çº¿è®¿é—®ã€æ¨é€é€šçŸ¥å’Œå…¶ä»–åŠŸèƒ½ã€‚</p></li></ul><details class=spoiler id=spoiler-21><summary>InAppWebViewå®˜æ–¹ç¤ºä¾‹æ³¨é‡Š</summary><p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>import &#39;dart:async&#39;;
</span></span><span class=line><span class=cl>import &#39;package:flutter/foundation.dart&#39;;
</span></span><span class=line><span class=cl>import &#39;package:flutter/material.dart&#39;;
</span></span><span class=line><span class=cl>import &#39;package:flutter_inappwebview/flutter_inappwebview.dart&#39;;
</span></span><span class=line><span class=cl>import &#39;package:url_launcher/url_launcher.dart&#39;;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Future main() async {
</span></span><span class=line><span class=cl>  WidgetsFlutterBinding.ensureInitialized();
</span></span><span class=line><span class=cl>  // å¦‚æœæ˜¯Androidï¼Œåˆ™å¯¹åŠ è½½åˆ° WebView ä¸­çš„ Webå†…å®¹ï¼ˆHTML/CSS/JavaScriptï¼‰å¯ç”¨è°ƒè¯•
</span></span><span class=line><span class=cl>  if (!kIsWeb <span class=err>&amp;&amp;</span> defaultTargetPlatform == TargetPlatform.android) {
</span></span><span class=line><span class=cl>    await InAppWebViewController.setWebContentsDebuggingEnabled(true);
</span></span><span class=line><span class=cl>  }
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  runApp(const MaterialApp(home: MyApp()));
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>class MyApp extends StatefulWidget {
</span></span><span class=line><span class=cl>  const MyApp({super.key});
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  @override
</span></span><span class=line><span class=cl>  State<span class=p>&lt;</span><span class=nt>MyApp</span><span class=p>&gt;</span> createState() =&gt; _MyAppState();
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>class _MyAppState extends State<span class=p>&lt;</span><span class=nt>MyApp</span><span class=p>&gt;</span> {
</span></span><span class=line><span class=cl>  final GlobalKey webViewKey = GlobalKey();
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  InAppWebViewController? webViewController;
</span></span><span class=line><span class=cl>  InAppWebViewSettings settings = InAppWebViewSettings(
</span></span><span class=line><span class=cl>      // èƒ½å¤Ÿç›‘å¬ WebView.shouldOverrideUrlLoadingï¼ˆURLå³å°†åŠ è½½æ—¶ï¼‰çš„äº‹ä»¶ã€‚
</span></span><span class=line><span class=cl>      useShouldOverrideUrlLoading: true,
</span></span><span class=line><span class=cl>      // è®¾ç½®ä¸º true ä»¥é˜²æ­¢ HTML5 éŸ³é¢‘æˆ–è§†é¢‘è‡ªåŠ¨æ’­æ”¾ã€‚
</span></span><span class=line><span class=cl>      mediaPlaybackRequiresUserGesture: false,
</span></span><span class=line><span class=cl>      // å…è®¸ HTML5 åª’ä½“æ’­æ”¾åœ¨å±å¹•å¸ƒå±€ä¸­å†…åµŒæ˜¾ç¤ºï¼Œå³è®©åª’ä½“æ’­æ”¾å™¨åµŒå…¥åˆ°ç½‘é¡µçš„å…¶ä»–å†…å®¹ä¸­ä¸€èµ·æ˜¾ç¤º
</span></span><span class=line><span class=cl>      allowsInlineMediaPlayback: true,
</span></span><span class=line><span class=cl>      // æ ¹æ®è¯·æ±‚çš„æ¥æºå®šä¹‰äº†å“ªäº›åŠŸèƒ½å¯ä¾›ä½¿ç”¨ï¼ˆä¾‹å¦‚ï¼Œè®¿é—®éº¦å…‹é£ã€æ‘„åƒå¤´ã€ç”µæ± ã€ç½‘ç»œå…±äº«ç­‰ï¼‰
</span></span><span class=line><span class=cl>      iframeAllow: &#34;camera; microphone&#34;,
</span></span><span class=line><span class=cl>      // å¦‚æœ iframe å¯ä»¥é€šè¿‡è°ƒç”¨ requestFullscreen() æ–¹æ³•æ¿€æ´»å…¨å±æ¨¡å¼ï¼Œåˆ™è®¾ç½®ä¸º trueã€‚
</span></span><span class=line><span class=cl>      iframeAllowFullscreen: true
</span></span><span class=line><span class=cl>  );
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  PullToRefreshController? pullToRefreshController;
</span></span><span class=line><span class=cl>  String url = &#34;&#34;;
</span></span><span class=line><span class=cl>  double progress = 0;
</span></span><span class=line><span class=cl>  final urlController = TextEditingController();
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  @override
</span></span><span class=line><span class=cl>  void initState() {
</span></span><span class=line><span class=cl>    super.initState();
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    // åœ¨ WebView ä¸­å¼€å¯ä¸‹æ‹‰åˆ·æ–°
</span></span><span class=line><span class=cl>    pullToRefreshController = kIsWeb ? null : PullToRefreshController(
</span></span><span class=line><span class=cl>      settings: PullToRefreshSettings(
</span></span><span class=line><span class=cl>        color: Colors.blue,
</span></span><span class=line><span class=cl>      ),
</span></span><span class=line><span class=cl>      onRefresh: () async {
</span></span><span class=line><span class=cl>        if (defaultTargetPlatform == TargetPlatform.android) {
</span></span><span class=line><span class=cl>          webViewController?.reload();
</span></span><span class=line><span class=cl>        } else if (defaultTargetPlatform == TargetPlatform.iOS) {
</span></span><span class=line><span class=cl>          webViewController?.loadUrl(
</span></span><span class=line><span class=cl>              urlRequest: URLRequest(url: await webViewController?.getUrl()));
</span></span><span class=line><span class=cl>        }
</span></span><span class=line><span class=cl>      },
</span></span><span class=line><span class=cl>    );
</span></span><span class=line><span class=cl>  }
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  @override
</span></span><span class=line><span class=cl>  Widget build(BuildContext context) {
</span></span><span class=line><span class=cl>    return Scaffold(
</span></span><span class=line><span class=cl>      appBar: AppBar(title: const Text(&#34;Official InAppWebView website&#34;)),
</span></span><span class=line><span class=cl>      body: SafeArea(
</span></span><span class=line><span class=cl>        child: Column(children: <span class=p>&lt;</span><span class=nt>Widget</span><span class=p>&gt;</span>[
</span></span><span class=line><span class=cl>          TextField(
</span></span><span class=line><span class=cl>            decoration: const InputDecoration(prefixIcon: Icon(Icons.search)),
</span></span><span class=line><span class=cl>            controller: urlController,
</span></span><span class=line><span class=cl>            keyboardType: TextInputType.url,
</span></span><span class=line><span class=cl>            onSubmitted: (value) {
</span></span><span class=line><span class=cl>              var url = WebUri(value);
</span></span><span class=line><span class=cl>              if (url.scheme.isEmpty) {
</span></span><span class=line><span class=cl>                url = WebUri(&#34;https://www.google.com/search?q=$value&#34;);
</span></span><span class=line><span class=cl>              }
</span></span><span class=line><span class=cl>              webViewController?.loadUrl(urlRequest: URLRequest(url: url));
</span></span><span class=line><span class=cl>            },
</span></span><span class=line><span class=cl>          ),
</span></span><span class=line><span class=cl>          Expanded(
</span></span><span class=line><span class=cl>            child: Stack(
</span></span><span class=line><span class=cl>              children: [
</span></span><span class=line><span class=cl>                InAppWebView(
</span></span><span class=line><span class=cl>                  key: webViewKey,
</span></span><span class=line><span class=cl>                  // åˆå§‹åŒ–URL
</span></span><span class=line><span class=cl>                  initialUrlRequest:
</span></span><span class=line><span class=cl>                  URLRequest(url: WebUri(&#34;https://inappwebview.dev/&#34;)),
</span></span><span class=line><span class=cl>                  // åˆå§‹åŒ–è®¾ç½®
</span></span><span class=line><span class=cl>                  initialSettings: settings,
</span></span><span class=line><span class=cl>                  // ä¸‹æ‹‰åˆ·æ–°
</span></span><span class=line><span class=cl>                  pullToRefreshController: pullToRefreshController,
</span></span><span class=line><span class=cl>                  // åˆ›å»º WebView æ—¶è§¦å‘çš„äº‹ä»¶
</span></span><span class=line><span class=cl>                  onWebViewCreated: (controller) {
</span></span><span class=line><span class=cl>                    webViewController = controller;
</span></span><span class=line><span class=cl>                  },
</span></span><span class=line><span class=cl>                  // å½“ WebView å¼€å§‹åŠ è½½ url æ—¶è§¦å‘çš„äº‹ä»¶ã€‚
</span></span><span class=line><span class=cl>                  onLoadStart: (controller, url) {
</span></span><span class=line><span class=cl>                    setState(() {
</span></span><span class=line><span class=cl>                      this.url = url.toString();
</span></span><span class=line><span class=cl>                      urlController.text = this.url;
</span></span><span class=line><span class=cl>                    });
</span></span><span class=line><span class=cl>                  },
</span></span><span class=line><span class=cl>                  // è¯·æ±‚æ— è®¿é—®æƒé™èµ„æº æ—¶è§¦å‘çš„äº‹ä»¶ã€‚
</span></span><span class=line><span class=cl>                  onPermissionRequest: (controller, request) async {
</span></span><span class=line><span class=cl>                    return PermissionResponse(
</span></span><span class=line><span class=cl>                        resources: request.resources,
</span></span><span class=line><span class=cl>                        action: PermissionResponseAction.GRANT);
</span></span><span class=line><span class=cl>                  },
</span></span><span class=line><span class=cl>                  // è®©APPæœ‰æœºä¼šåœ¨ URLå³å°†åŠ è½½ æ—¶è¿›è¡Œæ§åˆ¶ã€‚
</span></span><span class=line><span class=cl>                  shouldOverrideUrlLoading:
</span></span><span class=line><span class=cl>                      (controller, navigationAction) async {
</span></span><span class=line><span class=cl>                    var uri = navigationAction.request.url!;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>                    if (![
</span></span><span class=line><span class=cl>                      &#34;http&#34;,
</span></span><span class=line><span class=cl>                      &#34;https&#34;,
</span></span><span class=line><span class=cl>                      &#34;file&#34;,
</span></span><span class=line><span class=cl>                      &#34;chrome&#34;,
</span></span><span class=line><span class=cl>                      &#34;data&#34;,
</span></span><span class=line><span class=cl>                      &#34;javascript&#34;,
</span></span><span class=line><span class=cl>                      &#34;about&#34;
</span></span><span class=line><span class=cl>                    ].contains(uri.scheme)) {
</span></span><span class=line><span class=cl>                      if (await canLaunchUrl(uri)) {
</span></span><span class=line><span class=cl>                        // Launch the App
</span></span><span class=line><span class=cl>                        await launchUrl(
</span></span><span class=line><span class=cl>                          uri,
</span></span><span class=line><span class=cl>                        );
</span></span><span class=line><span class=cl>                        // and cancel the request
</span></span><span class=line><span class=cl>                        return NavigationActionPolicy.CANCEL;
</span></span><span class=line><span class=cl>                      }
</span></span><span class=line><span class=cl>                    }
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>                    return NavigationActionPolicy.ALLOW;
</span></span><span class=line><span class=cl>                  },
</span></span><span class=line><span class=cl>                  // å®ŒæˆåŠ è½½ url æ—¶è§¦å‘çš„äº‹ä»¶ã€‚
</span></span><span class=line><span class=cl>                  onLoadStop: (controller, url) async {
</span></span><span class=line><span class=cl>                    pullToRefreshController?.endRefreshing();
</span></span><span class=line><span class=cl>                    setState(() {
</span></span><span class=line><span class=cl>                      this.url = url.toString();
</span></span><span class=line><span class=cl>                      urlController.text = this.url;
</span></span><span class=line><span class=cl>                    });
</span></span><span class=line><span class=cl>                  },
</span></span><span class=line><span class=cl>                  // åŠ è½½è¯·æ±‚æ—¶é‡åˆ°é”™è¯¯ æ—¶è§¦å‘çš„äº‹ä»¶ã€‚
</span></span><span class=line><span class=cl>                  onReceivedError: (controller, request, error) {
</span></span><span class=line><span class=cl>                    pullToRefreshController?.endRefreshing();
</span></span><span class=line><span class=cl>                  },
</span></span><span class=line><span class=cl>                  // æ›´æ”¹æ­£åœ¨åŠ è½½çš„é¡µé¢ æ—¶è§¦å‘çš„äº‹ä»¶ã€‚
</span></span><span class=line><span class=cl>                  onProgressChanged: (controller, progress) {
</span></span><span class=line><span class=cl>                    if (progress == 100) {
</span></span><span class=line><span class=cl>                      pullToRefreshController?.endRefreshing();
</span></span><span class=line><span class=cl>                    }
</span></span><span class=line><span class=cl>                    setState(() {
</span></span><span class=line><span class=cl>                      this.progress = progress / 100;
</span></span><span class=line><span class=cl>                      urlController.text = url;
</span></span><span class=line><span class=cl>                    });
</span></span><span class=line><span class=cl>                  },
</span></span><span class=line><span class=cl>                  // APPæ›´æ–°å…¶è®¿é—®çš„é“¾æ¥ æ—¶è§¦å‘çš„äº‹ä»¶ã€‚
</span></span><span class=line><span class=cl>                  onUpdateVisitedHistory: (controller, url, androidIsReload) {
</span></span><span class=line><span class=cl>                    setState(() {
</span></span><span class=line><span class=cl>                      this.url = url.toString();
</span></span><span class=line><span class=cl>                      urlController.text = this.url;
</span></span><span class=line><span class=cl>                    });
</span></span><span class=line><span class=cl>                  },
</span></span><span class=line><span class=cl>                  // WebViewæ”¶åˆ°æ§åˆ¶å°æŠ¥é”™ æ—¶è§¦å‘çš„äº‹ä»¶ã€‚
</span></span><span class=line><span class=cl>                  onConsoleMessage: (controller, consoleMessage) {
</span></span><span class=line><span class=cl>                    if (kDebugMode) {
</span></span><span class=line><span class=cl>                      print(consoleMessage);
</span></span><span class=line><span class=cl>                    }
</span></span><span class=line><span class=cl>                  },
</span></span><span class=line><span class=cl>                ),
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>                // è¿›åº¦æŒ‡ç¤ºå™¨
</span></span><span class=line><span class=cl>                progress <span class=p>&lt;</span> <span class=nt>1.0</span>
</span></span><span class=line><span class=cl>                    <span class=err>?</span> <span class=na>LinearProgressIndicator</span><span class=err>(</span><span class=na>value:</span> <span class=na>progress</span><span class=err>)</span>
</span></span><span class=line><span class=cl>                    <span class=na>:</span> <span class=na>Container</span><span class=err>(),</span>
</span></span><span class=line><span class=cl>              <span class=err>],</span>
</span></span><span class=line><span class=cl>            <span class=err>),</span>
</span></span><span class=line><span class=cl>          <span class=err>),</span>
</span></span><span class=line><span class=cl>          <span class=na>ButtonBar</span><span class=err>(</span>
</span></span><span class=line><span class=cl>            <span class=na>alignment:</span> <span class=na>MainAxisAlignment</span><span class=err>.</span><span class=na>center</span><span class=err>,</span>
</span></span><span class=line><span class=cl>            <span class=na>children:</span> <span class=err>&lt;</span><span class=na>Widget</span><span class=p>&gt;</span>[
</span></span><span class=line><span class=cl>              // åé€€æŒ‰é’®
</span></span><span class=line><span class=cl>              ElevatedButton(
</span></span><span class=line><span class=cl>                child: const Icon(Icons.arrow_back),
</span></span><span class=line><span class=cl>                onPressed: () {
</span></span><span class=line><span class=cl>                  webViewController?.goBack();
</span></span><span class=line><span class=cl>                },
</span></span><span class=line><span class=cl>              ),
</span></span><span class=line><span class=cl>              // å‰è¿›æŒ‰é’®
</span></span><span class=line><span class=cl>              ElevatedButton(
</span></span><span class=line><span class=cl>                child: const Icon(Icons.arrow_forward),
</span></span><span class=line><span class=cl>                onPressed: () {
</span></span><span class=line><span class=cl>                  webViewController?.goForward();
</span></span><span class=line><span class=cl>                },
</span></span><span class=line><span class=cl>              ),
</span></span><span class=line><span class=cl>              // åˆ·æ–°æŒ‰é’®
</span></span><span class=line><span class=cl>              ElevatedButton(
</span></span><span class=line><span class=cl>                child: const Icon(Icons.refresh),
</span></span><span class=line><span class=cl>                onPressed: () {
</span></span><span class=line><span class=cl>                  webViewController?.reload();
</span></span><span class=line><span class=cl>                },
</span></span><span class=line><span class=cl>              ),
</span></span><span class=line><span class=cl>            ],
</span></span><span class=line><span class=cl>          ),
</span></span><span class=line><span class=cl>        ])
</span></span><span class=line><span class=cl>      )
</span></span><span class=line><span class=cl>    );
</span></span><span class=line><span class=cl>  }
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div></p></details><h2 id=flexcolorpicker>FlexColorPicker</h2><p>FlexColorPicker æ˜¯ Flâ€‹â€‹utter çš„å¯å®šåˆ¶é¢œè‰²é€‰æ‹©å™¨ã€‚å¯ä»¥ä½¿ç”¨ Material 2 å’Œ Material 3ã€‚</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>// å±æ€§
</span></span><span class=line><span class=cl>ColorPicker(
</span></span><span class=line><span class=cl>    color: selectedColor,
</span></span><span class=line><span class=cl>    // å¯ç”¨tabæ é€‰æ‹©å™¨:both, primary, accent, bw, custom, wheel
</span></span><span class=line><span class=cl>    pickersEnabled: const <span class=p>&lt;</span><span class=nt>ColorPickerType</span><span class=err>,</span> <span class=na>bool</span><span class=p>&gt;</span>{
</span></span><span class=line><span class=cl>      ColorPickerType.both: true,
</span></span><span class=line><span class=cl>      ColorPickerType.primary: false,
</span></span><span class=line><span class=cl>      ColorPickerType.accent: false,
</span></span><span class=line><span class=cl>      ColorPickerType.bw: false,
</span></span><span class=line><span class=cl>      ColorPickerType.custom: false,
</span></span><span class=line><span class=cl>      ColorPickerType.wheel: true,
</span></span><span class=line><span class=cl>    },
</span></span><span class=line><span class=cl>    // è‡ªå®šä¹‰é¢œè‰²
</span></span><span class=line><span class=cl>    // customColorSwatchesAndNames: customSwatches,
</span></span><span class=line><span class=cl>    // å®šåˆ¶tabæ ‡ç­¾
</span></span><span class=line><span class=cl>    pickerTypeLabels: <span class=p>&lt;</span><span class=nt>ColorPickerType</span><span class=err>,</span> <span class=na>String</span><span class=p>&gt;</span>{
</span></span><span class=line><span class=cl>      ColorPickerType.both: &#39;preset&#39;.tr,
</span></span><span class=line><span class=cl>      ColorPickerType.wheel: &#39;custom&#39;.tr,
</span></span><span class=line><span class=cl>    },
</span></span><span class=line><span class=cl>    // åœ¨é€‰æ‹©ä¸»è¦é¢œè‰²åï¼ŒåŸºäºæ‰€é€‰é¢œè‰²ä¸ºæ‚¨æä¾›ä¸€ç»„å®ƒçš„æ·±æµ…é¢œè‰²,ç¦ç”¨æ—¶æ‰éœ€è¦æ­¤å±æ€§
</span></span><span class=line><span class=cl>    // enableShadesSelection:false,
</span></span><span class=line><span class=cl>    // ç”Ÿæˆæ‰€é€‰é¢œè‰²çš„ 15 ç§è‰²è°ƒçš„ Material 3 è‰²è°ƒè°ƒè‰²æ¿
</span></span><span class=line><span class=cl>    enableTonalPalette: true,
</span></span><span class=line><span class=cl>    // é¢œè‰²ä¸é€æ˜åº¦æ»‘å—
</span></span><span class=line><span class=cl>    enableOpacity: true,
</span></span><span class=line><span class=cl>    // æ˜¾ç¤ºæ‰€é€‰é¢œè‰²åç§°
</span></span><span class=line><span class=cl>    showMaterialName: true,
</span></span><span class=line><span class=cl>    materialNameTextStyle: Theme.of(context).textTheme.bodySmall,
</span></span><span class=line><span class=cl>    showColorName: true,
</span></span><span class=line><span class=cl>    colorNameTextStyle: Theme.of(context).textTheme.bodySmall,
</span></span><span class=line><span class=cl>    // æ˜¾ç¤ºæ‰€é€‰é¢œè‰²çš„ RGB é¢œè‰²å€¼
</span></span><span class=line><span class=cl>    showColorCode: true,
</span></span><span class=line><span class=cl>    // colorCodeHasColor: true,
</span></span><span class=line><span class=cl>    // showColorValue: true,
</span></span><span class=line><span class=cl>    colorCodeTextStyle: Theme.of(context).textTheme.bodyMedium,
</span></span><span class=line><span class=cl>    colorCodePrefixStyle: Theme.of(context).textTheme.bodySmall,
</span></span><span class=line><span class=cl>    // æ˜¾ç¤ºæœ€è¿‘é€‰æ‹©çš„é¢œè‰²
</span></span><span class=line><span class=cl>    // showRecentColors: true,
</span></span><span class=line><span class=cl>    // maxRecentColors: 8, 
</span></span><span class=line><span class=cl>    // recentColors: ,
</span></span><span class=line><span class=cl>    // onRecentColorsChanged: ,
</span></span><span class=line><span class=cl>    // æ ‡é¢˜
</span></span><span class=line><span class=cl>    title: Text(
</span></span><span class=line><span class=cl>    &#39;ColorPicker&#39;,
</span></span><span class=line><span class=cl>    style: Theme.of(context).textTheme.headline6,
</span></span><span class=line><span class=cl>    ),
</span></span><span class=line><span class=cl>    heading: Text(
</span></span><span class=line><span class=cl>    &#39;Select color&#39;,
</span></span><span class=line><span class=cl>    style: Theme.of(context).textTheme.headline5,
</span></span><span class=line><span class=cl>    ),
</span></span><span class=line><span class=cl>    subheading: Text(
</span></span><span class=line><span class=cl>    &#39;Select color shade&#39;,
</span></span><span class=line><span class=cl>    style: Theme.of(context).textTheme.headline1,
</span></span><span class=line><span class=cl>    ),
</span></span><span class=line><span class=cl>    wheelSubheading: Text(
</span></span><span class=line><span class=cl>    &#39;Selected color and its shades&#39;,
</span></span><span class=line><span class=cl>    style: Theme.of(context).textTheme.headline1,
</span></span><span class=line><span class=cl>    ),
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    opacitySubheading: Text(
</span></span><span class=line><span class=cl>    &#39;Opacity&#39;,
</span></span><span class=line><span class=cl>    style: Theme.of(context).textTheme.headline1,
</span></span><span class=line><span class=cl>    ),
</span></span><span class=line><span class=cl>    recentColorsSubheading: Text(
</span></span><span class=line><span class=cl>    &#39;Selected color and its color swatch&#39;,
</span></span><span class=line><span class=cl>    style: Theme.of(context).textTheme.headline1,
</span></span><span class=line><span class=cl>    ),
</span></span><span class=line><span class=cl>    // å„ä¸ªé¢œè‰²å°éƒ¨ä»¶çš„å¤§å°ã€å½¢çŠ¶å’Œé—´è·ä»¥åŠè‰²è½®å’Œä¸é€æ˜åº¦æ»‘å—å¤§å°çš„å±æ€§ã€‚
</span></span><span class=line><span class=cl>    width: 40,
</span></span><span class=line><span class=cl>    height: 40,
</span></span><span class=line><span class=cl>    borderRadius: 4,
</span></span><span class=line><span class=cl>    spacing: 5,
</span></span><span class=line><span class=cl>    runSpacing: 5,
</span></span><span class=line><span class=cl>    hasBorder: false,
</span></span><span class=line><span class=cl>    // borderColor: Theme.of(context).dividerColor,
</span></span><span class=line><span class=cl>    elevation: 0,
</span></span><span class=line><span class=cl>    // è½®ç›˜ç›´å¾„ã€å®½åº¦å’Œè¾¹æ¡†
</span></span><span class=line><span class=cl>    wheelDiameter: 155,
</span></span><span class=line><span class=cl>    wheelWidth: 16,
</span></span><span class=line><span class=cl>    wheelHasBorder: false,
</span></span><span class=line><span class=cl>    // borderColor: Theme.of(context).dividerColor,
</span></span><span class=line><span class=cl>    // é¢œè‰²å…ƒç´ çš„é—´è·ã€å¯¹é½æ–¹å¼å’Œå¡«å……
</span></span><span class=line><span class=cl>    crossAxisAlignment: CrossAxisAlignment.center,
</span></span><span class=line><span class=cl>    padding: const EdgeInsets.all(16),
</span></span><span class=line><span class=cl>    columnSpacing: 0,
</span></span><span class=line><span class=cl>    // å¤åˆ¶æŒ‰é’®,ç¡®å®šæŒ‰é’®,å–æ¶ˆæŒ‰é’®,å…³é—­æŒ‰é’®
</span></span><span class=line><span class=cl>    enableTooltips: ture,
</span></span><span class=line><span class=cl>    // Dialogâ€œç¡®å®šâ€å’Œâ€œå–æ¶ˆâ€æ“ä½œæŒ‰é’®ä»¥åŠæ ·å¼
</span></span><span class=line><span class=cl>    actionButtons: const ColorPickerActionButtons(...),
</span></span><span class=line><span class=cl>    // é¢œè‰²çš„å¤åˆ¶ç²˜è´´è¡Œä¸º
</span></span><span class=line><span class=cl>    copyPasteBehavior: const ColorPickerCopyPasteBehavior(
</span></span><span class=line><span class=cl>        // é¢œè‰²ä»£ç åç¼€å¤åˆ¶æŒ‰é’®
</span></span><span class=line><span class=cl>        editFieldCopyButton: ture,
</span></span><span class=line><span class=cl>        // é”®ç›˜å¿«æ·é”®
</span></span><span class=line><span class=cl>        ctrlC: ture,
</span></span><span class=line><span class=cl>        ctrlV: ture,
</span></span><span class=line><span class=cl>        // å·¥å…·æ æŒ‰é’®
</span></span><span class=line><span class=cl>        copyButton: ture,
</span></span><span class=line><span class=cl>        copyIcon: ture,
</span></span><span class=line><span class=cl>        copyTooltip: MaterialLocalizations.of(context).copyButtonLabel,
</span></span><span class=line><span class=cl>        pasteButton: ture,
</span></span><span class=line><span class=cl>        pasteIcon: ture,
</span></span><span class=line><span class=cl>        pasteTooltip: MaterialLocalizations.of(context).pasteButtonLabel,
</span></span><span class=line><span class=cl>        // ä»é€‰å–å™¨å¤åˆ¶é¢œè‰²å¹¶å°†é¢œè‰²ç²˜è´´
</span></span><span class=line><span class=cl>        longPressMenu: ture,
</span></span><span class=line><span class=cl>        secondaryMenu: ture,
</span></span><span class=line><span class=cl>        secondaryOnDesktopLongOnDevice: ture,
</span></span><span class=line><span class=cl>        // é¢œè‰²ä»£ç æ ¼å¼å’Œç²˜è´´è§£æ
</span></span><span class=line><span class=cl>        copyFormat: ColorPickerCopyFormat.dartCodeï¼Œ
</span></span><span class=line><span class=cl>        parseShortHexCode: ture,
</span></span><span class=line><span class=cl>        editUsesParsedPaste: ture,
</span></span><span class=line><span class=cl>        snackBarParseError: ture,
</span></span><span class=line><span class=cl>        snackBarMessage: ture,
</span></span><span class=line><span class=cl>        snackBarDuration: const Duration(milliseconds: 1800),
</span></span><span class=line><span class=cl>        feedbackParseError: false,
</span></span><span class=line><span class=cl>    ),
</span></span><span class=line><span class=cl>    // å›è°ƒ
</span></span><span class=line><span class=cl>    // å½“é€‰æ‹©å…·æœ‰æ‰€é€‰æ–°é¢œè‰²å€¼çš„æ–°é¢œè‰²æ—¶è°ƒç”¨
</span></span><span class=line><span class=cl>    onColorChanged: (Color color) {
</span></span><span class=line><span class=cl>      selectedColor = color;
</span></span><span class=line><span class=cl>    },
</span></span><span class=line><span class=cl>    // å¼€å§‹é¢œè‰²é€‰æ‹©æ—¶è°ƒç”¨
</span></span><span class=line><span class=cl>    onColorChangeStart: ,
</span></span><span class=line><span class=cl>    // ç»“æŸé¢œè‰²é€‰æ‹©æ—¶è°ƒç”¨
</span></span><span class=line><span class=cl>    onColorChangeEnd: ,
</span></span><span class=line><span class=cl>    // è¿”å›æœ€è¿‘é€‰æ‹©çš„é¢œè‰²çš„å½“å‰åˆ—è¡¨
</span></span><span class=line><span class=cl>    onRecentColorsChanged: ,
</span></span><span class=line><span class=cl>  ),
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>// dialogæ–¹æ³•ï¼š
</span></span><span class=line><span class=cl>// åœ¨å¯¹è¯æ¡†æ‰“å¼€æ—¶è·Ÿè¸ª ColorPicker çš„ä¸åŒonChangeå›è°ƒ
</span></span><span class=line><span class=cl>ColorPicker(...).showPickerDialog;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>// dialogå‡½æ•°ï¼š
</span></span><span class=line><span class=cl>// åªéœ€ä¼ å…¥å¯¹è¯æ¡†çš„æ„å»ºä¸Šä¸‹æ–‡ä»¥åŠæ‰€éœ€çš„èµ·å§‹é¢œè‰²å€¼ï¼Œå¹¶ç­‰å¾…å®ƒåœ¨å¯¹è¯æ¡†å…³é—­æ—¶è¿”å›é€‰å®šçš„é¢œè‰²
</span></span><span class=line><span class=cl>showColorPickerDialog(...)
</span></span></code></pre></div><h2 id=widgetbookä»…ä½œäº†è§£>Widgetbook(ä»…ä½œäº†è§£)</h2><p>ä½¿ç”¨Widgetbookå¯ä»¥ç®¡ç†ç»„ä»¶ã€ä½¿ç”¨ä¸åŒè®¾å¤‡å°ºå¯¸æµ‹è¯•ç»„ä»¶ã€å®æ—¶ä¿®æ”¹ç»„ä»¶å‚æ•°ã€åä½œå…±äº«ã€‚</p><h3 id=windowsé…ç½®>Windowsé…ç½®</h3><p>ç¡®ä¿å®‰è£…Visual Studioï¼ŒåŠå…¶åº”ç”¨ï¼š
<img src=/p/flutter/7.png width=1085 height=312 srcset="/p/flutter/7_hu4fa1ec2a00219a167f5b56770646289b_37010_480x0_resize_box_3.png 480w, /p/flutter/7_hu4fa1ec2a00219a167f5b56770646289b_37010_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=347 data-flex-basis=834px></p><p>ä»<a class=link href=https://www.nuget.org/downloads target=_blank rel=noopener>https://www.nuget.org/downloads</a>ä¸‹è½½æœ€æ–°çš„nuget.exe,å¹¶æ”¾å…¥ä»»æ„æ–‡ä»¶å¤¹ï¼ˆæˆ‘çš„åœ¨C:\Program Files\Microsoft Visual Studioï¼‰ï¼Œé…ç½®ç³»ç»Ÿç¯å¢ƒå˜é‡ã€‚</p><h3 id=ä½¿ç”¨-1>ä½¿ç”¨</h3><ul><li>åœ¨pubspec.yamlå®‰è£… widgetbook ç»„ä»¶</li></ul><div class="box info"><span class="icon-box baseline"><svg><use href="#info-box"/></svg></span><p>æ³¨æ„æ˜¯æ”¾åœ¨ dev_dependencies ä¸‹é¢</p></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>dev_dependencies:
</span></span><span class=line><span class=cl>  flutter_test:
</span></span><span class=line><span class=cl>    sdk: flutter
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  flutter_lints: ^2.0.0
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  widgetbook: ^3.0.0-beta.14
</span></span></code></pre></div><ul><li>æ–°å»ºlib/app.widgetbook.dart</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>import &#39;package:flutter/material.dart&#39;;
</span></span><span class=line><span class=cl>// ignore: depend_on_referenced_packages
</span></span><span class=line><span class=cl>import &#39;package:widgetbook/widgetbook.dart&#39;;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>import &#39;ä½ çš„ç»„ä»¶&#39;;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>void main() {
</span></span><span class=line><span class=cl>  runApp(const HotReload());
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>class HotReload extends StatelessWidget {
</span></span><span class=line><span class=cl>  const HotReload({Key? key}) : super(key: key);
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  @override
</span></span><span class=line><span class=cl>  Widget build(BuildContext context) {
</span></span><span class=line><span class=cl>    return Widgetbook.material(
</span></span><span class=line><span class=cl>      // Widgetbook å±æ€§é€‰æ‹©
</span></span><span class=line><span class=cl>      addons: [
</span></span><span class=line><span class=cl>        // ä¸»é¢˜
</span></span><span class=line><span class=cl>        // buildMaterialThemeAddon(),
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        // å­—ä½“å¤§å°
</span></span><span class=line><span class=cl>        // buildTextScaleAddon(),
</span></span><span class=line><span class=cl>      ],
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>      // å¯ä»¥å®¹çº³åŒ…ã€æ–‡ä»¶å¤¹ã€ç±»åˆ«ã€ç»„ä»¶å’Œç”¨ä¾‹
</span></span><span class=line><span class=cl>      directories: [
</span></span><span class=line><span class=cl>        //
</span></span><span class=line><span class=cl>        buildWidgetbookCategory(),
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        //
</span></span><span class=line><span class=cl>        //buildWidgetbookCategory2(),
</span></span><span class=line><span class=cl>      ],
</span></span><span class=line><span class=cl>    );
</span></span><span class=line><span class=cl>  }
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  TextScaleAddon buildTextScaleAddon() {
</span></span><span class=line><span class=cl>    return TextScaleAddon(
</span></span><span class=line><span class=cl>        setting: TextScaleSetting.firstAsSelected(
</span></span><span class=line><span class=cl>            textScales: [1.0, 1.25, 1.5, 1.75, 2]));
</span></span><span class=line><span class=cl>  }
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  MaterialThemeAddon buildMaterialThemeAddon() {
</span></span><span class=line><span class=cl>    return MaterialThemeAddon(
</span></span><span class=line><span class=cl>        setting: MaterialThemeSetting.firstAsSelected(themes: [
</span></span><span class=line><span class=cl>      WidgetbookTheme(name: &#34;dark&#34;, data: ThemeData.dark()),
</span></span><span class=line><span class=cl>      WidgetbookTheme(name: &#34;light&#34;, data: ThemeData.light()),
</span></span><span class=line><span class=cl>    ]));
</span></span><span class=line><span class=cl>  }
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  WidgetbookCategory buildWidgetbookCategory() {
</span></span><span class=line><span class=cl>    return WidgetbookCategory(
</span></span><span class=line><span class=cl>      // åˆ†ç±»å
</span></span><span class=line><span class=cl>      name: &#39;å…¬å…±ç»„ä»¶&#39;,
</span></span><span class=line><span class=cl>      children: [
</span></span><span class=line><span class=cl>        WidgetbookComponent(
</span></span><span class=line><span class=cl>          // ç»„ä»¶å
</span></span><span class=line><span class=cl>          name: &#39;SpinkitåŠ è½½&#39;,
</span></span><span class=line><span class=cl>          useCases: [
</span></span><span class=line><span class=cl>            WidgetbookUseCase.center(
</span></span><span class=line><span class=cl>              // ç»„ä»¶ç”¨ä¾‹å
</span></span><span class=line><span class=cl>              name: &#34;SpinKitFadingCircle&#34;,
</span></span><span class=line><span class=cl>              child: mySpinkit(),
</span></span><span class=line><span class=cl>            ),
</span></span><span class=line><span class=cl>          ],
</span></span><span class=line><span class=cl>        ),
</span></span><span class=line><span class=cl>      ],
</span></span><span class=line><span class=cl>    );
</span></span><span class=line><span class=cl>  }
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><h2 id=plugin>Plugin</h2><p>Flutter Pluginæ˜¯å¯ä»¥æ’å…¥åˆ°ä¸»ç¨‹åºä¸­ï¼Œæ‰©å±•åŠŸèƒ½çš„ç‹¬ç«‹ç»„ä»¶ï¼Œæˆ‘ä»¬å®ç°åŸç”Ÿå¹³å°çš„åŠŸèƒ½å°±éœ€è¦ç”¨åˆ°ã€‚</p><p><strong>åˆ›å»º</strong></p><p>ä½¿ç”¨ Android Studio åˆ›å»º Flutter é¡¹ç›®ï¼Œé¡¹ç›®ç±»å‹é€‰ plugin ã€‚ç›®å½•å¦‚ä¸‹</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>project
</span></span><span class=line><span class=cl>â”œâ”€â”€ android       // åŸç”Ÿ
</span></span><span class=line><span class=cl>â”œâ”€â”€ example       // è¿è¡Œè°ƒè¯•
</span></span><span class=line><span class=cl>â”œâ”€â”€ ios           // åŸç”Ÿ
</span></span><span class=line><span class=cl>â”œâ”€â”€ lib           
</span></span></code></pre></div><h3 id=flutter-1>Flutter</h3><p><img src=/p/flutter/PlatformChannels.png width=580 height=647 srcset="/p/flutter/PlatformChannels_hu9187f560825b219b5824e0b76846e06f_23082_480x0_resize_box_3.png 480w, /p/flutter/PlatformChannels_hu9187f560825b219b5824e0b76846e06f_23082_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=89 data-flex-basis=215px></p><p><strong>Flutteræœ‰ä¸‰ç§ç±»å‹çš„Channel:</strong></p><ul><li>BasicMessageChannel:ç”¨äºä¼ é€’å­—ç¬¦ä¸²å’ŒåŠç»“æ„åŒ–çš„ä¿¡æ¯ã€‚æŒç»­é€šä¿¡ï¼Œæ”¶åˆ°æ¶ˆæ¯åå¯ä»¥å›å¤æ­¤æ¬¡æ¶ˆæ¯ï¼Œå¦‚ï¼šNativeå°†éå†åˆ°çš„æ–‡ä»¶ä¿¡æ¯é™†ç»­ä¼ é€’åˆ°Dartã€‚</li><li>MethodChannel:ç”¨äºä¼ é€’æ–¹æ³•è°ƒç”¨(method invocation)ã€‚ä¸€æ¬¡æ€§é€šä¿¡ï¼šå¦‚Flutteriè°ƒç”¨Nativeæ‹ç…§ï¼›</li><li>EventChannel:ç”¨äºæ•°æ®æµ(event streams)çš„é€šä¿¡ã€‚æŒç»­é€šä¿¡ï¼Œæ”¶åˆ°æ¶ˆæ¯åæ— æ³•å›å¤æ­¤æ¬¡æ¶ˆæ¯ï¼Œé€šè¿‡é•¿ç”¨äºNativeå‘Datçš„é€šä¿¡ï¼Œå¦‚ï¼šæ‰‹æœºç”µé‡å˜åŒ–ï¼Œç½‘ç»œè¿æ¥å˜åŒ–ï¼Œé™€èºä»ªï¼Œä¼ æ„Ÿå™¨ç­‰ï¼›</li></ul><p><strong>Channelæ”¯æŒçš„æ•°æ®ç±»å‹ï¼š</strong></p><div class=table-wrapper><table><thead><tr><th>Dart</th><th>Android</th><th>ios</th></tr></thead><tbody><tr><td>null</td><td>null</td><td>nil (NSNull when nested)</td></tr><tr><td>bool</td><td>java.lang.Boolean</td><td>NSNumber numberWithBool:</td></tr><tr><td>int</td><td>java.lang.Integer</td><td>NSNumber numberWithInt:</td></tr><tr><td>int, if 32 bits notenough</td><td>java.lang.Long</td><td>NSNumber numberWithLong:</td></tr><tr><td>double</td><td>java.lang.Double</td><td>NSNumber numberWithDouble:</td></tr><tr><td>String</td><td>java.lang.String</td><td>NSString</td></tr><tr><td>Uint8List</td><td>byte[]</td><td>FlutterStandardTypedData typedDataWithBytes:</td></tr><tr><td>Int32List</td><td>int][]</td><td>FlutterStandardTypedData typedDataWithInt32:</td></tr><tr><td>Int64List</td><td>long[]</td><td>FlutterStandardTypedData typedDataWithInt64:</td></tr><tr><td>Float64List</td><td>double[]</td><td>FlutterStandardTypedData typedDataWithFloat64:</td></tr><tr><td>List</td><td>java.util.ArrayList</td><td>NSArray</td></tr><tr><td>Map</td><td>java.util.HashMap</td><td>NSDictionary</td></tr></tbody></table></div><h3 id=android>Android</h3><h4 id=java>Java</h4><p><img src=/p/flutter/10.jpg width=757 height=292 srcset="/p/flutter/10_hu9850a35ccc7cfd8280aafa0e3eada853_24691_480x0_resize_q75_box.jpg 480w, /p/flutter/10_hu9850a35ccc7cfd8280aafa0e3eada853_24691_1024x0_resize_q75_box.jpg 1024w" loading=lazy class=gallery-image data-flex-grow=259 data-flex-basis=622px></p><ul><li>è®¿é—®ä¿®é¥°ç¬¦</li></ul><div class=table-wrapper><table><thead><tr><th>è®¿é—®èŒƒå›´</th><th>private</th><th>default</th><th>protected</th><th>public</th></tr></thead><tbody><tr><td>åŒä¸€ç±»ä¸­</td><td>âˆš</td><td>âˆš</td><td>âˆš</td><td>âˆš</td></tr><tr><td>åŒä¸€åŒ…ä¸­(å­ç±»å’Œéå­ç±»)</td><td>Ã—</td><td>âˆš</td><td>âˆš</td><td>âˆš</td></tr><tr><td>ä¸åŒåŒ…ä¸­çš„å­ç±»</td><td>Ã—</td><td>Ã—</td><td>âˆš</td><td>âˆš</td></tr><tr><td>ä¸åŒåŒ…ä¸­çš„éå­ç±»</td><td>Ã—</td><td>Ã—</td><td>Ã—</td><td>âˆš</td></tr></tbody></table></div><h4 id=è¿›ç¨‹å’Œçº¿ç¨‹>è¿›ç¨‹å’Œçº¿ç¨‹</h4><p><strong>è¿›ç¨‹</strong></p><ul><li>Androidç³»ç»Ÿä¼šä¸ºæ¯ä¸ªåº”ç”¨ç¨‹åºåˆ›å»ºä¸€ä¸ªè¿›ç¨‹</li><li>å¦‚æœè¯¥åº”ç”¨ç¨‹åºçš„è¿›ç¨‹å·²ç»å­˜åœ¨ï¼ˆå·²æœ‰ç»„ä»¶å·²ç»åœ¨è¿è¡Œï¼‰ï¼Œé‚£ä¹ˆåˆšå¯åŠ¨çš„ç»„ä»¶ä¼šåœ¨å·²æœ‰çš„è¿›ç¨‹å’Œçº¿ç¨‹ä¸­å¯åŠ¨è¿è¡Œ</li><li>ç»„ä»¶å¯ä»¥è¿è¡Œåœ¨æŒ‡å®šçš„å…¶ä»–çº¿ç¨‹ï¼Œåœ¨AndroidManifestæ–‡ä»¶ä¸­çš„æ¯ç§ç»„ä»¶æ ‡ç­¾éƒ½æ”¯æŒè®¾ç½® android:process å±æ€§</li><li>ç³»ç»Ÿä¼šä¾æ®è¿›ç¨‹çš„â€œimportance hierarchyâ€ç­‰çº§æ¸…é™¤è¿›ç¨‹ï¼Œè¿™æ˜¯ä¸ºäº†å›æ”¶ç³»ç»Ÿèµ„æºå’Œæ–°å»ºè¿›ç¨‹</li><li>Binder/Socketç”¨äºè¿›ç¨‹é—´é€šä¿¡</li></ul><p><strong>çº¿ç¨‹</strong></p><ul><li>ç³»ç»Ÿä¼šä¸ºåº”ç”¨ç¨‹åºåˆ›å»ºä¸€ä¸ªåä¸ºâ€œmainâ€çš„ä¸»çº¿ç¨‹ï¼Œä¸ä¼šä¸ºæ¯ä¸ªç»„ä»¶çš„å®ä¾‹åˆ›å»ºå•ç‹¬çš„çº¿ç¨‹</li><li>é€šå¸¸å®ç°Runnableæ¥å£æ¥å®šä¹‰çº¿ç¨‹çš„æ‰§è¡Œé€»è¾‘ï¼Œç„¶åå°†å…¶ä¼ é€’ç»™Threadç±»æ¥å¯åŠ¨çº¿ç¨‹</li><li>Handlerç”¨äºåŒè¿›ç¨‹çš„çº¿ç¨‹é—´é€šä¿¡ï¼Œå­çº¿ç¨‹è¿è¡Œå¹¶ç”ŸæˆMessageï¼ŒLooperè·å–messageå¹¶ä¼ é€’ç»™Handlerï¼ŒHandleré€ä¸ªè·å–å­çº¿ç¨‹ä¸­çš„Message</li></ul><div class=table-wrapper><table><thead><tr><th>æ¦‚å¿µ</th><th>å®šä¹‰</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>ä¸»çº¿ç¨‹ (UIçº¿ç¨‹ã€Main Thread)</td><td>å½“åº”ç”¨ç¨‹åºå¯åŠ¨æ—¶ï¼Œä¼šè‡ªåŠ¨å¼€å¯1æ¡ä¸»çº¿ç¨‹</td><td>å¤„ç†ä¸UIç›¸å…³çš„äº‹ä»¶(å¦‚æ›´æ–°ã€æ“ä½œç­‰)</td></tr><tr><td>å­çº¿ç¨‹ (å·¥ä½œçº¿ç¨‹)</td><td>äººä¸ºæ‰‹åŠ¨å¼€å¯çš„çº¿ç¨‹</td><td>æ‰§è¡Œè€—æ—¶æ“ä½œ(å¦‚ç½‘ç»œè¯·æ±‚ã€æ•°æ®åŠ è½½ç­‰)</td></tr><tr><td>æ¶ˆæ¯ (Message)</td><td>çº¿ç¨‹é—´é€šè®¯çš„æ•°æ®å•å…ƒ (å³Handleræ¥å—&å¤„ç†çš„æ¶ˆæ¯å¯¹è±¡)</td><td>å­˜å‚¨éœ€æ“ä½œçš„é€šä¿¡ä¿¡æ¯</td></tr><tr><td>æ¶ˆæ¯é˜Ÿåˆ— (Message Queue)</td><td>ä¸€ç§æ•°æ®ç»“æ„(å­˜å‚¨ç‰¹ç‚¹ï¼šå…ˆè¿›å…ˆå‡º)</td><td>å­˜å‚¨Handlerå‘é€è¿‡æ¥çš„æ¶ˆæ¯(Message)</td></tr><tr><td>å¤„ç†è€… (Handler)</td><td>ä¸»çº¿ç¨‹ä¸å­çº¿ç¨‹çš„é€šä¿¡åª’ä»‹çº¿ç¨‹æ¶ˆæ¯çš„ä¸»è¦å¤„ç†è€…</td><td>* æ·»åŠ æ¶ˆæ¯(Message)åˆ°æ¶ˆæ¯é˜Ÿåˆ—(Message Queue)<br>*å¤„ç†å¾ªç¯å™¨(Looper)åˆ†æ´¾è¿‡æ¥çš„æ¶ˆæ¯(Message)</td></tr><tr><td>å¾ªç¯å™¨ (Looper)</td><td>æ¶ˆæ¯é˜Ÿåˆ—(Message Queue)ä¸å¤„ç†è€…(Handler)çš„é€šä¿¡åª’ä»‹<br>æ¯ä¸ªçº¿ç¨‹ä¸­åªèƒ½æ‹¥æœ‰1ä¸ªLooperï¼Œå¤šä¸ªçº¿ç¨‹å¯å¾€1ä¸ªLooperæ‰€æŒæœ‰çš„MessageQueue ä¸­å‘é€æ¶ˆæ¯ï¼Œæä¾›äº†çº¿ç¨‹é—´é€šä¿¡çš„å¯èƒ½</td><td>* æ¶ˆæ¯è·å–ï¼šå¾ªç¯å–å‡ºæ¶ˆæ¯é˜Ÿåˆ—(Message Queue)çš„æ¶ˆæ¯(Message)<br>* æ¶ˆæ¯åˆ†å‘ï¼šå°†å–å‡ºçš„æ¶ˆæ¯(Message)å‘é€ç»™å¯¹åº”çš„å¤„ç†è€…(Handler)</td></tr><tr><td>View.post()</td><td>Viewç±»ä¸­çš„æ–¹æ³•ï¼Œé€‚ç”¨äºä»»ä½•Viewå¯¹è±¡</td><td>* å°†Runnableå¯¹è±¡æ·»åŠ åˆ°Viewçš„äº‹ä»¶é˜Ÿåˆ—ä¸­<br>* è·å–Viewçš„å®½é«˜ç­‰å±æ€§å€¼</td></tr><tr><td>ThreadLocal</td><td>æä¾›çº¿ç¨‹æœ¬åœ°å˜é‡</td><td>ThreadLocalä¸ºæ¯ä¸€ä¸ªçº¿ç¨‹å¼€è¾Ÿäº†ä¸€ä¸ªç‹¬ç«‹çš„å­˜å‚¨å™¨ï¼Œåªæœ‰å¯¹åº”çš„çº¿ç¨‹æ‰èƒ½å¤Ÿè®¿é—®å…¶æ•°æ®</td></tr><tr><td>runOnUiThread()</td><td>Activityç±»ä¸­çš„æ–¹æ³•ï¼Œä»…é€‚ç”¨äºActivity</td><td>å°†Runnableå¯¹è±¡æ·»åŠ åˆ°Activityçš„äº‹ä»¶é˜Ÿåˆ—ä¸­ï¼Œå¯ä»¥ç¡®ä¿å…¶åœ¨å½“å‰ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œ</td></tr></tbody></table></div><p>å‚è€ƒï¼š<a class=link href=https://blog.csdn.net/qq_32907491/article/details/132645806 target=_blank rel=noopener>Handler</a>ã€<a class=link href=https://www.cnblogs.com/andy-songwei/category/1609976.html target=_blank rel=noopener>Androidå¤šçº¿ç¨‹</a></p><h4 id=ç”Ÿå‘½å‘¨æœŸ>ç”Ÿå‘½å‘¨æœŸ</h4><p><strong>Viewçš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•</strong></p><p><a class=link href=https://developer.android.com/develop/ui/views/layout/custom-views/custom-components#extend-ondraw-and-onmeasure target=_blank rel=noopener>è‹±æ–‡åŸè¡¨</a></p><html><head><meta charset=utf-8></head><body><table border=2 width=85% align=center cellpadding=5><thead><tr><th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç±»åˆ«</font></font></th><th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ–¹æ³•</font></font></th><th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æè¿°</font></font></th></tr></thead><tbody><tr><td rowspan=2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åˆ›å»º</font></font></td><td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ„é€ å‡½æ•°</font></font></td><td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ„é€ å‡½æ•°æœ‰ä¸¤ç§å½¢å¼ï¼Œä¸€ç§æ˜¯åœ¨é€šè¿‡ä»£ç åˆ›å»ºè§†å›¾æ—¶è°ƒç”¨çš„ï¼Œå¦ä¸€ç§æ˜¯åœ¨é€šè¿‡å¸ƒå±€æ–‡ä»¶å¡«å……è§†å›¾æ—¶è°ƒç”¨çš„ã€‚ç¬¬äºŒç§å½¢å¼è§£æå¹¶åº”ç”¨å¸ƒå±€æ–‡ä»¶ä¸­å®šä¹‰çš„å±æ€§ã€‚</font></font></td></tr><tr><td><code translate=no dir=ltr><code translate=no dir=ltr><a href=file:///C:/reference/android/view/View#onFinishInflate()>onFinishInflate()</a></code></code></td><td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åœ¨è§†å›¾åŠå…¶æ‰€æœ‰å­è§†å›¾éƒ½ä» XML ä¸­æ˜ å°„åè°ƒç”¨ã€‚</font></font></td></tr><tr><td rowspan=3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¸ƒå±€</font></font></td><td><code translate=no dir=ltr><code translate=no dir=ltr><a href=file:///C:/reference/android/view/View#onMeasure(int,%20int)>onMeasure(<wbr>int,<wbr> int)</a></code></code></td><td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è°ƒç”¨æ¥ç¡®å®šæ­¤è§†å›¾åŠå…¶æ‰€æœ‰å­è§†å›¾çš„å°ºå¯¸è¦æ±‚ã€‚</font></font></td></tr><tr><td><code translate=no dir=ltr><code translate=no dir=ltr><a href=file:///C:/reference/android/view/View#onLayout(boolean,%20int,%20int,%20int,%20int)>onLayout(<wbr>boolean,<wbr> int,<wbr> int,<wbr> int,<wbr> int)</a></code></code></td><td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å½“æ­¤è§†å›¾å¿…é¡»ä¸ºå…¶æ‰€æœ‰å­è§†å›¾åˆ†é…å¤§å°å’Œä½ç½®æ—¶è°ƒç”¨ã€‚</font></font></td></tr><tr><td><code translate=no dir=ltr><code translate=no dir=ltr><a href=file:///C:/reference/android/view/View#onSizeChanged(int,%20int,%20int,%20int)>onSizeChanged(<wbr>int,<wbr> int,<wbr> int,<wbr> int)</a></code></code></td><td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å½“æ­¤è§†å›¾çš„å¤§å°æ”¹å˜æ—¶è°ƒç”¨ã€‚</font></font></td></tr><tr><td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç»˜ç”»</font></font></td><td><code translate=no dir=ltr><code translate=no dir=ltr><a href=file:///C:/reference/android/view/View#onDraw(android.graphics.Canvas)>onDraw(<wbr>Canvas)</a></code></code></td><td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å½“è§†å›¾å¿…é¡»å‘ˆç°å…¶å†…å®¹æ—¶è°ƒç”¨ã€‚</font></font></td></tr><tr><td rowspan=4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">äº‹ä»¶å¤„ç†</font></font></td><td><code translate=no dir=ltr><code translate=no dir=ltr><a href=file:///C:/reference/android/view/View#onKeyDown(int,%20android.view.KeyEvent)>onKeyDown(<wbr>int,<wbr> KeyEvent)</a></code></code></td><td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å½“å‘ç”ŸæŒ‰é”®äº‹ä»¶æ—¶è°ƒç”¨ã€‚</font></font></td></tr><tr><td><code translate=no dir=ltr><code translate=no dir=ltr><a href=file:///C:/reference/android/view/View#onKeyUp(int,%20android.view.KeyEvent)>onKeyUp(<wbr>int,<wbr> KeyEvent)</a></code></code></td><td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å½“å‘ç”ŸæŒ‰é”®é‡Šæ”¾äº‹ä»¶æ—¶è°ƒç”¨ã€‚</font></font></td></tr><tr><td><code translate=no dir=ltr><code translate=no dir=ltr><a href=file:///C:/reference/android/view/View#onTrackballEvent(android.view.MotionEvent)>onTrackballEvent(<wbr>MotionEvent)</a></code></code></td><td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å½“è½¨è¿¹çƒè¿åŠ¨äº‹ä»¶å‘ç”Ÿæ—¶è°ƒç”¨ã€‚</font></font></td></tr><tr><td><code translate=no dir=ltr><code translate=no dir=ltr><a href=file:///C:/reference/android/view/View#onTouchEvent(android.view.MotionEvent)>onTouchEvent(<wbr>MotionEvent)</a></code></code></td><td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å½“å‘ç”Ÿè§¦æ‘¸å±è¿åŠ¨äº‹ä»¶æ—¶è°ƒç”¨ã€‚</font></font></td></tr><tr><td rowspan=2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç„¦ç‚¹</font></font></td><td><code translate=no dir=ltr><code translate=no dir=ltr><a href=file:///C:/reference/android/view/View#onFocusChanged(boolean,%20int,%20android.graphics.Rect)>onFocusChanged(<wbr>boolean,<wbr> int,<wbr> Rect)</a></code></code></td><td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å½“è§†å›¾è·å¾—æˆ–å¤±å»ç„¦ç‚¹æ—¶è°ƒç”¨ã€‚</font></font></td></tr><tr><td><code translate=no dir=ltr><code translate=no dir=ltr><a href=file:///C:/reference/android/view/View#onWindowFocusChanged(boolean)>onWindowFocusChanged(<wbr>boolean)</a></code></code></td><td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å½“åŒ…å«è§†å›¾çš„çª—å£è·å¾—æˆ–å¤±å»ç„¦ç‚¹æ—¶è°ƒç”¨ã€‚</font></font></td></tr><tr><td rowspan=3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é™„åŠ </font></font></td><td><code translate=no dir=ltr><code translate=no dir=ltr><a href=file:///C:/reference/android/view/View#onAttachedToWindow()>onAttachedToWindow()</a></code></code></td><td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å½“è§†å›¾é™„åŠ åˆ°çª—å£æ—¶è°ƒç”¨ã€‚</font></font></td></tr><tr><td><code translate=no dir=ltr><code translate=no dir=ltr><a href=file:///C:/reference/android/view/View#onDetachedFromWindow()>onDetachedFromWindow()</a></code></code></td><td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å½“è§†å›¾ä¸å…¶çª—å£åˆ†ç¦»æ—¶è°ƒç”¨ã€‚</font></font></td></tr><tr><td><code translate=no dir=ltr><code translate=no dir=ltr><a href=file:///C:/reference/android/view/View#onWindowVisibilityChanged(int)>onWindowVisibilityChanged(<wbr>int)</a></code></code></td><td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å½“åŒ…å«è§†å›¾çš„çª—å£çš„å¯è§æ€§å‘ç”Ÿæ”¹å˜æ—¶è°ƒç”¨ã€‚</font></font></td></tr></tbody></table></body></html><p><strong>Activityç”Ÿå‘½å‘¨æœŸ</strong></p><p><img src=/p/flutter/14.png width=1030 height=1250 srcset="/p/flutter/14_huc8ed9721ed893a209efda528a311345b_26410_480x0_resize_box_3.png 480w, /p/flutter/14_huc8ed9721ed893a209efda528a311345b_26410_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=82 data-flex-basis=197px></p><p><strong>Activityçš„å¯åŠ¨</strong></p><ol><li><strong>Activity</strong> è°ƒç”¨<strong>onCreate</strong>æ–¹æ³•ï¼Œå°†èµ„æº ID <code>R.layout.main_activity</code> æ›´æ”¹ä¸º <code>setContentView()</code></li><li><strong>Activity</strong> è°ƒç”¨onWindowAttributesChanged æ–¹æ³•ï¼Œè€Œä¸”è¿™ä¸ªæ–¹æ³•è¿ç»­è°ƒç”¨å¤šæ¬¡</li><li><code>View</code> è°ƒç”¨æ„é€ æ–¹æ³•</li><li><code>View</code> è°ƒç”¨onFinishInflateæ–¹æ³•ï¼Œè¯´æ˜è¿™ä¸ªæ—¶å€™Viewå·²ç»å¡«å……å®Œæ¯•ï¼Œä½†æ˜¯è¿˜æ²¡å¼€å§‹è§¦å‘ç»˜åˆ¶è¿‡ç¨‹</li><li><strong>Activity</strong> è°ƒç”¨<strong>onstart</strong>æ–¹æ³•ï¼Œ è¿›å…¥â€œå·²å¯åŠ¨â€çŠ¶æ€</li><li><strong>Activity</strong> å†æ¬¡è°ƒç”¨ onWindowAttributesChanged æ–¹æ³•</li><li><strong>Activity</strong> è°ƒç”¨<strong>onResume</strong>ï¼Œâ€œå·²æ¢å¤â€çŠ¶æ€ï¼Œè¿›è¡Œåé¢åˆå§‹åŒ–æ­¥éª¤ï¼Œå¹¶è¿›å…¥ä¸ç”¨æˆ·äº’åŠ¨çš„çŠ¶æ€</li><li><strong>Activity</strong> è°ƒç”¨onAttachedToWindowï¼ŒActivityè·ŸWindowè¿›è¡Œç»‘å®š</li><li><code>View</code> è°ƒç”¨onAttachedToWindowï¼ŒViewè·ŸWindowè¿›è¡Œç»‘å®š</li><li><code>View</code> è°ƒç”¨ onWindowVisibilityChanged(int visibility)ï¼Œå‚æ•°å˜ä¸º <code>View.VISIABLE</code></li><li><code>View</code> è°ƒç”¨onMeasureï¼Œå¼€å§‹æµ‹é‡</li><li><code>View</code> è°ƒç”¨onSizeChangedï¼Œè¡¨ç¤ºæµ‹é‡å®Œæˆï¼Œå°ºå¯¸å‘ç”Ÿäº†å˜åŒ–</li><li><code>View</code> è°ƒç”¨onLayoutï¼Œå¼€å§‹æ‘†æ”¾ä½ç½®</li><li><code>View</code> è°ƒç”¨ onDrawï¼Œå¼€å§‹ç»˜åˆ¶</li><li><strong>Activity</strong> è°ƒç”¨onWindowFocusChanged(boolean hasFocus)ï¼Œæ­¤æ—¶ä¸ºtrueï¼Œä»£è¡¨çª—ä½“å·²ç»è·å–äº†ç„¦ç‚¹</li><li><code>View</code> è°ƒç”¨ onWindowFocusChanged(boolean hasWindowFocus)ï¼Œæ­¤æ—¶ä¸ºtrueï¼Œä»£è¡¨å½“å‰çš„æ§ä»¶è·å–äº†Windowç„¦ç‚¹ï¼Œå½“è°ƒç”¨è¿™ä¸ªæ–¹æ³•åè¯´æ˜å½“å‰Activityä¸­çš„Viewæ‰æ˜¯çœŸæ­£çš„å¯è§äº†</li></ol><p><strong>Activityçš„é€€å‡º</strong></p><ol><li><strong>Activity</strong> è°ƒç”¨ <strong>onPause</strong>ï¼Œä¸­æ–­æ—¶çš„æš‚åœçŠ¶æ€</li><li><code>View</code> è°ƒç”¨ onWindowVisibilityChanged(int visibility)ï¼Œå‚æ•°å˜ä¸º <code>View.GONE</code>ï¼ŒViewä¸­å¯¹åº”çš„Windowéšè—</li><li><strong>Activity</strong> è°ƒç”¨onWindowFocusChanged(boolean hasFocus)ï¼Œæ­¤æ—¶ä¸ºfalseï¼Œè¯´æ˜Actvityæ‰€åœ¨çš„Windowå·²ç»å¤±å»ç„¦ç‚¹</li><li><strong>Activity</strong> è°ƒç”¨ onStopï¼Œæ­¤æ—¶Activityå·²ç»åˆ‡æ¢åˆ°åå°</li><li><strong>Activity</strong> è°ƒç”¨ onDestoryï¼Œæ­¤æ—¶Activityå¼€å§‹å‡†å¤‡é”€æ¯ï¼Œå®é™…ä¸Šå¹¶ä¸ä»£è¡¨Activityå·²ç»é”€æ¯</li><li><code>View</code> è°ƒç”¨ onDetachedFromWindowï¼Œæ­¤æ—¶View ä¸Windowè§£é™¤ç»‘å®š</li><li><strong>Activity</strong> è°ƒç”¨ onDetathedFromWindow ï¼Œæ­¤æ—¶Activity ä¸Window è§£é™¤ç»‘å®š</li><li>Viewå³å°†è¢«é”€æ¯ï¼Œå¯ä»¥åœ¨ <code>onDetachedFromWindow</code> æ–¹æ³•ä¸­åšä¸€äº›èµ„æºé‡Šæ”¾ï¼Œé˜²æ­¢å†…å­˜æ³„æ¼</li></ol><h4 id=androidå››å¤§ç»„ä»¶>androidå››å¤§ç»„ä»¶</h4><p>1ã€activity
ï¼ˆ1ï¼‰ä¸€ä¸ªActivityé€šå¸¸å°±æ˜¯ä¸€ä¸ªå•ç‹¬çš„å±å¹•ï¼ˆçª—å£ï¼‰ã€‚</p><p>ï¼ˆ2ï¼‰Activityä¹‹é—´é€šè¿‡Intentè¿›è¡Œé€šä¿¡ã€‚</p><p>ï¼ˆ3ï¼‰androidåº”ç”¨ä¸­æ¯ä¸€ä¸ªActivityéƒ½å¿…é¡»è¦åœ¨AndroidManifest.xmlé…ç½®æ–‡ä»¶ä¸­å£°æ˜ï¼Œå¦åˆ™ç³»ç»Ÿå°†ä¸è¯†åˆ«ä¹Ÿä¸æ‰§è¡Œè¯¥Activityã€‚</p><p>2ã€service
ï¼ˆ1ï¼‰serviceç”¨äºåœ¨åå°å®Œæˆç”¨æˆ·æŒ‡å®šçš„æ“ä½œã€‚serviceåˆ†ä¸ºä¸¤ç§ï¼š</p><p>ï¼ˆaï¼‰startedï¼ˆå¯åŠ¨ï¼‰ï¼šå½“åº”ç”¨ç¨‹åºç»„ä»¶ï¼ˆå¦‚activityï¼‰è°ƒç”¨startService()æ–¹æ³•å¯åŠ¨æœåŠ¡æ—¶ï¼ŒæœåŠ¡å¤„äºstartedçŠ¶æ€ã€‚</p><p>ï¼ˆbï¼‰boundï¼ˆç»‘å®šï¼‰ï¼šå½“åº”ç”¨ç¨‹åºç»„ä»¶è°ƒç”¨bindService()æ–¹æ³•ç»‘å®šåˆ°æœåŠ¡æ—¶ï¼ŒæœåŠ¡å¤„äºboundçŠ¶æ€ã€‚</p><p>ï¼ˆ2ï¼‰startService()ä¸bindService()åŒºåˆ«ï¼š</p><p>ï¼ˆaï¼‰started serviceï¼ˆå¯åŠ¨æœåŠ¡ï¼‰æ˜¯ç”±å…¶ä»–ç»„ä»¶è°ƒç”¨startService()æ–¹æ³•å¯åŠ¨çš„ï¼Œè¿™å¯¼è‡´æœåŠ¡çš„onStartCommand()æ–¹æ³•è¢«è°ƒç”¨ã€‚å½“æœåŠ¡æ˜¯startedçŠ¶æ€æ—¶ï¼Œå…¶ç”Ÿå‘½å‘¨æœŸä¸å¯åŠ¨å®ƒçš„ç»„ä»¶æ— å…³ï¼Œå¹¶ä¸”å¯ä»¥åœ¨åå°æ— é™æœŸè¿è¡Œï¼Œå³ä½¿å¯åŠ¨æœåŠ¡çš„ç»„ä»¶å·²ç»è¢«é”€æ¯ã€‚å› æ­¤ï¼ŒæœåŠ¡éœ€è¦åœ¨å®Œæˆä»»åŠ¡åè°ƒç”¨stopSelf()æ–¹æ³•åœæ­¢ï¼Œæˆ–è€…ç”±å…¶ä»–ç»„ä»¶è°ƒç”¨stopService()æ–¹æ³•åœæ­¢ã€‚</p><p>ï¼ˆbï¼‰ä½¿ç”¨bindService()æ–¹æ³•å¯ç”¨æœåŠ¡ï¼Œè°ƒç”¨è€…ä¸æœåŠ¡ç»‘å®šåœ¨äº†ä¸€èµ·ï¼Œè°ƒç”¨è€…ä¸€æ—¦é€€å‡ºï¼ŒæœåŠ¡ä¹Ÿå°±ç»ˆæ­¢ï¼Œå¤§æœ‰â€œä¸æ±‚åŒæ—¶ç”Ÿï¼Œå¿…é¡»åŒæ—¶æ­»â€çš„ç‰¹ç‚¹ã€‚</p><p>ï¼ˆ3ï¼‰å¼€å‘äººå‘˜éœ€è¦åœ¨åº”ç”¨ç¨‹åºé…ç½®æ–‡ä»¶ä¸­å£°æ˜å…¨éƒ¨çš„serviceï¼Œä½¿ç”¨<service></service>æ ‡ç­¾ã€‚</p><p>ï¼ˆ4ï¼‰Serviceé€šå¸¸ä½äºåå°è¿è¡Œï¼Œå®ƒä¸€èˆ¬ä¸éœ€è¦ä¸ç”¨æˆ·äº¤äº’ï¼Œå› æ­¤Serviceç»„ä»¶æ²¡æœ‰å›¾å½¢ç”¨æˆ·ç•Œé¢ã€‚Serviceç»„ä»¶éœ€è¦ç»§æ‰¿ServiceåŸºç±»ã€‚Serviceç»„ä»¶é€šå¸¸ç”¨äºä¸ºå…¶ä»–ç»„ä»¶æä¾›åå°æœåŠ¡æˆ–ç›‘æ§å…¶ä»–ç»„ä»¶çš„è¿è¡ŒçŠ¶æ€ã€‚</p><p>3ã€content provider
ï¼ˆ1ï¼‰androidå¹³å°æä¾›äº†Content Providerä½¿ä¸€ä¸ªåº”ç”¨ç¨‹åºçš„æŒ‡å®šæ•°æ®é›†æä¾›ç»™å…¶ä»–åº”ç”¨ç¨‹åºã€‚å…¶ä»–åº”ç”¨å¯ä»¥é€šè¿‡ContentResolverç±»ä»è¯¥å†…å®¹æä¾›è€…ä¸­è·å–æˆ–å­˜å…¥æ•°æ®ã€‚</p><p>ï¼ˆ2ï¼‰åªæœ‰éœ€è¦åœ¨å¤šä¸ªåº”ç”¨ç¨‹åºé—´å…±äº«æ•°æ®æ˜¯æ‰éœ€è¦å†…å®¹æä¾›è€…ã€‚ä¾‹å¦‚ï¼Œé€šè®¯å½•æ•°æ®è¢«å¤šä¸ªåº”ç”¨ç¨‹åºä½¿ç”¨ï¼Œä¸”å¿…é¡»å­˜å‚¨åœ¨ä¸€ä¸ªå†…å®¹æä¾›è€…ä¸­ã€‚å®ƒçš„å¥½å¤„æ˜¯ç»Ÿä¸€æ•°æ®è®¿é—®æ–¹å¼ã€‚</p><p>ï¼ˆ3ï¼‰ContentProviderå®ç°æ•°æ®å…±äº«ã€‚ContentProviderç”¨äºä¿å­˜å’Œè·å–æ•°æ®ï¼Œå¹¶ä½¿å…¶å¯¹æ‰€æœ‰åº”ç”¨ç¨‹åºå¯è§ã€‚è¿™æ˜¯ä¸åŒåº”ç”¨ç¨‹åºé—´å…±äº«æ•°æ®çš„å”¯ä¸€æ–¹å¼ï¼Œå› ä¸ºandroidæ²¡æœ‰æä¾›æ‰€æœ‰åº”ç”¨å…±åŒè®¿é—®çš„å…¬å…±å­˜å‚¨åŒºã€‚</p><p>ï¼ˆ4ï¼‰å¼€å‘äººå‘˜ä¸ä¼šç›´æ¥ä½¿ç”¨ContentProviderç±»çš„å¯¹è±¡ï¼Œå¤§å¤šæ•°æ˜¯é€šè¿‡ContentResolverå¯¹è±¡å®ç°å¯¹ContentProviderçš„æ“ä½œã€‚</p><p>ï¼ˆ5ï¼‰ContentProviderä½¿ç”¨URIæ¥å”¯ä¸€æ ‡è¯†å…¶æ•°æ®é›†ï¼Œè¿™é‡Œçš„URIä»¥content://ä½œä¸ºå‰ç¼€ï¼Œè¡¨ç¤ºè¯¥æ•°æ®ç”±ContentProvideræ¥ç®¡ç†ã€‚</p><p>4ã€broadcast receiver
ï¼ˆ1ï¼‰ä½ çš„åº”ç”¨å¯ä»¥ä½¿ç”¨å®ƒå¯¹å¤–éƒ¨äº‹ä»¶è¿›è¡Œè¿‡æ»¤ï¼Œåªå¯¹æ„Ÿå…´è¶£çš„å¤–éƒ¨äº‹ä»¶(å¦‚å½“ç”µè¯å‘¼å…¥æ—¶ï¼Œæˆ–è€…æ•°æ®ç½‘ç»œå¯ç”¨æ—¶)è¿›è¡Œæ¥æ”¶å¹¶åšå‡ºå“åº”ã€‚å¹¿æ’­æ¥æ”¶å™¨æ²¡æœ‰ç”¨æˆ·ç•Œé¢ã€‚ç„¶è€Œï¼Œå®ƒä»¬å¯ä»¥å¯åŠ¨ä¸€ä¸ªactivityæˆ–sericeæ¥å“åº”å®ƒä»¬æ”¶åˆ°çš„ä¿¡æ¯ï¼Œæˆ–è€…ç”¨NotificationManageræ¥é€šçŸ¥ç”¨æˆ·ã€‚é€šçŸ¥å¯ä»¥ç”¨å¾ˆå¤šç§æ–¹å¼æ¥å¸å¼•ç”¨æˆ·çš„æ³¨æ„åŠ›ï¼Œä¾‹å¦‚é—ªåŠ¨èƒŒç¯ã€éœ‡åŠ¨ã€æ’­æ”¾å£°éŸ³ç­‰ã€‚ä¸€èˆ¬æ¥è¯´æ˜¯åœ¨çŠ¶æ€æ ä¸Šæ”¾ä¸€ä¸ªæŒä¹…çš„å›¾æ ‡ï¼Œç”¨æˆ·å¯ä»¥æ‰“å¼€å®ƒå¹¶è·å–æ¶ˆæ¯ã€‚</p><p>ï¼ˆ2ï¼‰å¹¿æ’­æ¥æ”¶è€…çš„æ³¨å†Œæœ‰ä¸¤ç§æ–¹æ³•ï¼Œåˆ†åˆ«æ˜¯ç¨‹åºåŠ¨æ€æ³¨å†Œå’ŒAndroidManifestæ–‡ä»¶ä¸­è¿›è¡Œé™æ€æ³¨å†Œã€‚</p><p>ï¼ˆ3ï¼‰åŠ¨æ€æ³¨å†Œå¹¿æ’­æ¥æ”¶å™¨ç‰¹ç‚¹æ˜¯å½“ç”¨æ¥æ³¨å†Œçš„Activityå…³æ‰åï¼Œå¹¿æ’­ä¹Ÿå°±å¤±æ•ˆäº†ã€‚é™æ€æ³¨å†Œæ— éœ€æ‹…å¿§å¹¿æ’­æ¥æ”¶å™¨æ˜¯å¦è¢«å…³é—­ï¼Œåªè¦è®¾å¤‡æ˜¯å¼€å¯çŠ¶æ€ï¼Œå¹¿æ’­æ¥æ”¶å™¨ä¹Ÿæ˜¯æ‰“å¼€ç€çš„ã€‚ä¹Ÿå°±æ˜¯è¯´å“ªæ€•appæœ¬èº«æœªå¯åŠ¨ï¼Œè¯¥appè®¢é˜…çš„å¹¿æ’­åœ¨è§¦å‘æ—¶ä¹Ÿä¼šå¯¹å®ƒèµ·ä½œç”¨ã€‚</p><h4 id=builderæ¨¡å¼>builderæ¨¡å¼</h4><p>å½“ä¸€ä¸ªå¯¹è±¡æœ‰å¾ˆå¤šå±æ€§ï¼Œæ¯”å¦‚ç”¨æˆ·å¯¹è±¡æœ‰å¾ˆå¤šå±æ€§ï¼šç”¨æˆ·åã€IDã€æ€§åˆ«ã€åœ°å€ã€å·¥ä½œç±»å‹ã€è”ç³»æ–¹å¼ç­‰ç­‰ï¼Œå†™å¤šä¸ªæ„é€ æ–¹æ³•å’Œsetã€getå°†éš¾ä»¥é˜…è¯»ç»´æŠ¤ï¼Œæˆ‘ä»¬å¯ä»¥é‡‡ç”¨javaé“¾å¼è°ƒç”¨è¿™ç§æ›´ä¼˜é›…çš„æ–¹å¼ã€‚</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>public class User {
</span></span><span class=line><span class=cl>    private final String name;
</span></span><span class=line><span class=cl>    private int age;
</span></span><span class=line><span class=cl>    private String address;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    private User(Builder builder) {
</span></span><span class=line><span class=cl>        // åˆå§‹åŒ–å˜é‡
</span></span><span class=line><span class=cl>        this.name = builder.name;
</span></span><span class=line><span class=cl>        this.age = builder.age;
</span></span><span class=line><span class=cl>        this.address = builder.address;
</span></span><span class=line><span class=cl>    }
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    static class Builder {
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>        // ä¸å¤–éƒ¨Userç±»å±æ€§ä¸€è‡´
</span></span><span class=line><span class=cl>        private final String name;
</span></span><span class=line><span class=cl>        private int age;
</span></span><span class=line><span class=cl>        private String address;
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        // å¿…å¡«å±æ€§
</span></span><span class=line><span class=cl>        public Builder(String name) {
</span></span><span class=line><span class=cl>            this.name = name;
</span></span><span class=line><span class=cl>        }
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        // å¯é€‰å±æ€§
</span></span><span class=line><span class=cl>        public Builder Age(int age) {
</span></span><span class=line><span class=cl>            this.age = age;
</span></span><span class=line><span class=cl>            return this;
</span></span><span class=line><span class=cl>        }
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        // å¯é€‰å±æ€§
</span></span><span class=line><span class=cl>        public Builder Address(String address) {
</span></span><span class=line><span class=cl>            this.address = address;
</span></span><span class=line><span class=cl>            return this;
</span></span><span class=line><span class=cl>        }
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        // æä¾›å¤–éƒ¨ç±»å®ä¾‹å¯¹è±¡
</span></span><span class=line><span class=cl>        public User build() {
</span></span><span class=line><span class=cl>       		 // åˆç†æ€§åšåˆ¤æ–­
</span></span><span class=line><span class=cl>            if (age <span class=err>&lt;</span>= 0) {
</span></span><span class=line><span class=cl>                throw new RuntimeException(&#34;å¹´é¾„ä¸åˆæ³•&#34;);
</span></span><span class=line><span class=cl>            }
</span></span><span class=line><span class=cl>            return new User(this);
</span></span><span class=line><span class=cl>        }
</span></span><span class=line><span class=cl>    }
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>//ä½¿ç”¨
</span></span><span class=line><span class=cl>User user = new User.Builder(&#34;UserName&#34;)
</span></span><span class=line><span class=cl>        .Age(18)
</span></span><span class=line><span class=cl>        .Address(&#34;China&#34;)
</span></span><span class=line><span class=cl>        .build();
</span></span></code></pre></div><p>å¦å¤–ï¼Œå¯ä»¥ä½¿ç”¨IDEä¸­çš„æ’ä»¶InnerBuilderç”Ÿæˆä»£ç ã€‚</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>// åœ¨ç±»ä¸­å³é”®Generateé€‰æ‹©Builder
</span></span><span class=line><span class=cl>public class User {
</span></span><span class=line><span class=cl>    private final String name;
</span></span><span class=line><span class=cl>    private int age;
</span></span><span class=line><span class=cl>    private String address;
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><h4 id=channel>Channel</h4><ol><li><p>åˆ›å»ºChannel</p><p>ä¸‰ç§Channel çš„æ„é€ ååˆ†ç›¸ä¼¼ï¼š</p></li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>// ä¼ é€’å­—ç¬¦ä¸²ã€JSON
</span></span><span class=line><span class=cl>BasicMessageChannel(BinaryMessenger messenger,String name,MessageCodec<span class=p>&lt;</span><span class=nt>T</span><span class=p>&gt;</span> codec)
</span></span><span class=line><span class=cl>// æ–¹æ³•è°ƒç”¨
</span></span><span class=line><span class=cl>MethodChannel(BinaryMessenger messenger,String name,MethodCodec codec)
</span></span><span class=line><span class=cl>// äº‹ä»¶æµç›‘å¬ï¼ŒåŒ…æ‹¬ç”¨æˆ·äº‹ä»¶ç›‘å¬ï¼Œç”µé‡å˜åŒ–ï¼Œç½‘ç»œè¿æ¥å˜åŒ–ï¼Œé™€èºä»ªï¼Œä¼ æ„Ÿå™¨ç­‰
</span></span><span class=line><span class=cl>EventChannel(BinaryMessenger messenger,String name,MethodCodec codec)
</span></span></code></pre></div><ul><li><code>BinaryMessenger messenger</code> æ¶ˆæ¯çš„å‘é€ä¸æ¥æ”¶çš„å·¥å…·ï¼›</li><li><code>String name</code> Channelçš„åå­—ï¼›</li><li><code>MessageCodec&lt;T> codec</code> æ¶ˆæ¯çš„ç¼–è§£ç å™¨ï¼Œå®ƒæœ‰å‡ ç§ä¸åŒç±»å‹çš„å®ç°ï¼š<ul><li><code>BinaryCodec</code> æœ€ä¸ºç®€å•çš„ä¸€ç§Codec,å› ä¸ºå…¶è¿”å›å€¼ç±»å‹å’Œå…¥å‚çš„ç±»å‹ç›¸åŒï¼Œå‡ä¸ºäºŒè¿›åˆ¶æ ¼å¼(Androidä¸­ä¸ºByteBuffer,.iSä¸­ä¸ºNSData)ã€‚å®é™…ä¸Šï¼ŒBinaryCodecåœ¨ç¼–è§£ç è¿‡ç¨‹ä¸­ä»€ä¹ˆéƒ½æ²¡åšï¼Œåªæ˜¯åŸå°ä¸åŠ¨å°†äºŒè¿›åˆ¶æ•°æ®æ¶ˆæ¯è¿”å›è€Œå·²ã€‚æˆ–è®¸ä½ ä¼šå› æ­¤è§‰å¾—BinaryCodecæ²¡æœ‰æ„ä¹‰ï¼Œä½†æ˜¯åœ¨æŸäº›æƒ…å†µä¸‹å®ƒéå¸¸æœ‰ç”¨ï¼Œæ¯”å¦‚ä½¿ç”¨BinaryCodecå¯ä»¥ä½¿ä¼ é€’å†…å­˜æ•°æ®å—æ—¶åœ¨ç¼–è§£ç é˜¶æ®µå…äºå†…å­˜æ‹·è´ï¼›</li><li><code>StringCodec</code> ç”¨äºå­—ç¬¦ä¸²ä¸äºŒè¿›åˆ¶æ•°æ®ä¹‹é—´çš„ç¼–è§£ç ï¼Œå…¶ç¼–ç æ ¼å¼ä¸ºUTF-8;</li><li><code>JSONMessageCodec</code> ç”¨äºåŸºç¡€æ•°æ®ä¸äºŒè¿›åˆ¶æ•°æ®ä¹‹é—´çš„ç¼–è§£ç ï¼Œå…¶æ”¯æŒåŸºç¡€æ•°æ®ç±»å‹ä»¥åŠåˆ—è¡¨ã€å­—å…¸ã€‚å…¶åœ¨iOSç«¯ä½¿ç”¨äº†NSJSONSerializationä½œä¸ºåºåˆ—åŒ–çš„å·¥å…·ï¼Œè€Œåœ¨Androidç«¯åˆ™ä½¿ç”¨äº†å…¶è‡ªå®šä¹‰çš„JSONUtil.ä¸StringCodecä½œä¸ºåºåˆ—åŒ–å·¥å…·ï¼›</li><li><code>StandardMessageCodec</code> æ˜¯BasicMessageChannelçš„é»˜è®¤ç¼–è§£ç å™¨ï¼Œå…¶æ”¯æŒåŸºç¡€æ•°æ®ç±»å‹ã€äºŒè¿›åˆ¶æ•°æ®ã€åˆ—è¡¨ã€å­—å…¸ã€‚æ¯”JSONMessageCodecæ›´é€šç”¨ã€‚</li></ul></li></ul><ol start=2><li>æ¥æ”¶/å‘é€æ¶ˆæ¯</li></ol><p><strong>æ¥æ”¶Dartå‘æ¥çš„æ¶ˆæ¯ï¼š</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>// BasicMessageChannel
</span></span><span class=line><span class=cl>setMessageHandler(MessageHandler<span class=p>&lt;</span><span class=nt>T</span><span class=p>&gt;</span> handler)
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>// MethodChannel
</span></span><span class=line><span class=cl>setMethodCallHandler(MethodCallHandler handler)
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>// EventChannel
</span></span><span class=line><span class=cl>void setstreamHandler(EventChannel.StreamHandler handler)
</span></span></code></pre></div><p>å…¶å‚æ•°ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>// BasicMessageChannel
</span></span><span class=line><span class=cl>// var1 æ˜¯æ¶ˆæ¯å†…å®¹
</span></span><span class=line><span class=cl>// var2 æ˜¯å›å¤æ­¤æ¶ˆæ¯çš„å›è°ƒå‡½æ•°
</span></span><span class=line><span class=cl>public interface MessageHandler<span class=p>&lt;</span><span class=nt>T</span><span class=p>&gt;</span> {
</span></span><span class=line><span class=cl>    void onMessage(T var1, BasicMessageChannel.Reply<span class=p>&lt;</span><span class=nt>T</span><span class=p>&gt;</span> var2);
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>// MethodChannel
</span></span><span class=line><span class=cl>// var1.methed è¡¨ç¤º var1æ–¹æ³•åçš„String
</span></span><span class=line><span class=cl>// var1.arguments è¡¨ç¤º var1æ–¹æ³•çš„å‚æ•°
</span></span><span class=line><span class=cl>// var2ï¼šæä¾› var2.successã€ var2.errorã€ var2.notImplemented ä¸‰ç§å›å¤
</span></span><span class=line><span class=cl>public interface MethodCallHandler {
</span></span><span class=line><span class=cl>    void onMethodCall(MethodCall var1,Result var2);
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>// EventChannel
</span></span><span class=line><span class=cl>// args æ˜¯ä¼ é€’çš„å‚æ•°
</span></span><span class=line><span class=cl>// eventSink æä¾› successã€errorã€endOfStream ä¸‰ä¸ªå›è°ƒæ–¹æ³•
</span></span><span class=line><span class=cl>// onCancel å–æ¶ˆç›‘å¬æ—¶è°ƒç”¨
</span></span><span class=line><span class=cl>public interface StreamHandler {
</span></span><span class=line><span class=cl>    void onListen(Object args,EventChannel.Eventsink eventsink);
</span></span><span class=line><span class=cl>    void onCancel(Object o);
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><p><strong>å‘dartå‘é€æ¶ˆæ¯ï¼š</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>void send(T message)                                        // dartä¸å›å¤
</span></span><span class=line><span class=cl>void send(T message,BasicMessageChannel.Reply<span class=p>&lt;</span><span class=nt>T</span><span class=p>&gt;</span> callback)  //dartå›å¤
</span></span></code></pre></div><p><strong>pigeonç”Ÿæˆä»£ç </strong></p><ol><li><p>æ–°å»ºflutter pluginé¡¹ç›®</p></li><li><p>pubspec.yamlæ·»åŠ ä¾èµ–</p></li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>dev_dependencies:
</span></span><span class=line><span class=cl>  pigeon: ^16.0.5
</span></span></code></pre></div><ol start=3><li>ç¼–å†™pigeoné…ç½®æ–‡ä»¶ï¼Œå®šä¹‰é€šä¿¡æ¥å£</li></ol><p>libåŒçº§ç›®å½•åˆ›å»ºä¸€ä¸ªpigeonsæ–‡ä»¶å¤¹ï¼Œæ–°å»º<code>input_message.dart</code>æ–‡ä»¶</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>// ignore_for_file: public_member_api_docs, sort_constructors_first
</span></span><span class=line><span class=cl>import &#39;package:pigeon/pigeon.dart&#39;;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>// è¾“å‡ºé…ç½®
</span></span><span class=line><span class=cl>// https://github.com/flutter/packages/blob/main/packages/pigeon/example/README.md
</span></span><span class=line><span class=cl>@ConfigurePigeon(PigeonOptions(
</span></span><span class=line><span class=cl>  // dartè¾“å‡ºä½ç½®
</span></span><span class=line><span class=cl>  dartOut: &#39;./lib/pigeon/message.dart&#39;,
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  // Androidè¾“å‡ºä½ç½®
</span></span><span class=line><span class=cl>  javaOut:
</span></span><span class=line><span class=cl>      &#39;android/src/main/java/com/example/flutter_plugin/pigeon/Messages.java&#39;,
</span></span><span class=line><span class=cl>  javaOptions: JavaOptions(
</span></span><span class=line><span class=cl>    // åŒ…å
</span></span><span class=line><span class=cl>    package: &#39;com.example.flutter_plugin.pigeon&#39;,
</span></span><span class=line><span class=cl>  ),
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  // // iosè¾“å‡ºä½ç½®
</span></span><span class=line><span class=cl>  // // ios/flutter_pigeon_plugin.podspec -&gt; s.source_files = &#39;Classes/**/*&#39;
</span></span><span class=line><span class=cl>  // objcHeaderOut: &#39;ios/Classes/Pigeon.h&#39;,
</span></span><span class=line><span class=cl>  // objcSourceOut: &#39;ios/Classes/Pigeon.m&#39;,
</span></span><span class=line><span class=cl>  // objcOptions: ObjcOptions(
</span></span><span class=line><span class=cl>  //   // é»˜è®¤å‰ç¼€
</span></span><span class=line><span class=cl>  //   prefix: &#39;FLT&#39;,
</span></span><span class=line><span class=cl>  // ),
</span></span><span class=line><span class=cl>))
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>// è¯·æ±‚å‚æ•°ç±»å‹
</span></span><span class=line><span class=cl>class SearchRequest {
</span></span><span class=line><span class=cl>  SearchRequest({required this.query});
</span></span><span class=line><span class=cl>  String query;
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>// è¿”å›å‚æ•°ç±»å‹
</span></span><span class=line><span class=cl>class SearchReply {
</span></span><span class=line><span class=cl>  SearchReply({required this.result});
</span></span><span class=line><span class=cl>  String result;
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>// flutter è°ƒç”¨ native
</span></span><span class=line><span class=cl>@HostApi()
</span></span><span class=line><span class=cl>abstract class FlutterCallNativeApi {
</span></span><span class=line><span class=cl>  SearchReply search(SearchRequest request);
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>// native è°ƒç”¨ flutter
</span></span><span class=line><span class=cl>@FlutterApi()
</span></span><span class=line><span class=cl>abstract class NativeCallFlutterApi {
</span></span><span class=line><span class=cl>  SearchReply query(SearchRequest request);
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><p><strong>ç”Ÿæˆä»£ç ï¼š</strong></p><p>é¡¹ç›®ç›®å½•ä¸‹è¿è¡Œ<code>dart run pigeon --input pigeons/input_message.dart</code></p><p><strong>ä¾èµ–ï¼š</strong>
ç”±äºè¯¥é¡¹ç›®ä½œä¸º Flutter æ’ä»¶åŠ è½½ï¼Œä¸èƒ½è¯†åˆ«Androidä¾èµ–ï¼Œå¦‚æœæ‰“å¼€Androidç›®å½•è¯·åœ¨build.gradleæ·»åŠ ä»¥ä¸‹ä¾èµ–ã€‚</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>    def flutterRoot = &#34;C:\\flutter&#34;
</span></span><span class=line><span class=cl>    dependencies {
</span></span><span class=line><span class=cl>        compileOnly files(&#34;$flutterRoot/bin/cache/artifacts/engine/android-arm/flutter.jar&#34;)
</span></span><span class=line><span class=cl>        compileOnly &#39;androidx.annotation:annotation:1.9.1&#39;
</span></span><span class=line><span class=cl>    }
</span></span></code></pre></div><ol start=4><li>Androidç«¯å…·ä½“å®ç°</li></ol><p>ç¼–è¾‘Androidç›®å½•ä¸‹flutterpluginPlugin.java</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>package com.example.flutterplugin;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>import android.content.Context;
</span></span><span class=line><span class=cl>import android.widget.Toast;
</span></span><span class=line><span class=cl>import androidx.annotation.NonNull;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>import com.example.flutterplugin.pigeon.Messages;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>import io.flutter.embedding.engine.plugins.FlutterPlugin;
</span></span><span class=line><span class=cl>import io.flutter.plugin.common.MethodCall;
</span></span><span class=line><span class=cl>import io.flutter.plugin.common.MethodChannel;
</span></span><span class=line><span class=cl>import io.flutter.plugin.common.MethodChannel.MethodCallHandler;
</span></span><span class=line><span class=cl>import io.flutter.plugin.common.MethodChannel.Result;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>// 1. ç»§æ‰¿FlutterCallNativeApi
</span></span><span class=line><span class=cl>/** FlutterPigeonPlugin */
</span></span><span class=line><span class=cl>public class FlutterpluginPlugin implements FlutterPlugin, Messages.FlutterCallNativeApi {
</span></span><span class=line><span class=cl>  private Messages.NativeCallFlutterApi nativeApi;
</span></span><span class=line><span class=cl>  private Context context;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  @Override
</span></span><span class=line><span class=cl>  public void onAttachedToEngine(@NonNull FlutterPlugin.FlutterPluginBinding flutterPluginBinding) {
</span></span><span class=line><span class=cl>    context = flutterPluginBinding.getApplicationContext();
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    // 2. setupåˆå§‹åŒ–FlutterCallNativeApi
</span></span><span class=line><span class=cl>    Messages.FlutterCallNativeApi.setUp(flutterPluginBinding.getBinaryMessenger(), this);
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    nativeApi = new Messages.NativeCallFlutterApi(flutterPluginBinding.getBinaryMessenger());
</span></span><span class=line><span class=cl>  }
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  @Override
</span></span><span class=line><span class=cl>  public void onDetachedFromEngine(@NonNull FlutterPlugin.FlutterPluginBinding binding) {
</span></span><span class=line><span class=cl>    Messages.FlutterCallNativeApi.setUp(binding.getBinaryMessenger(), null);
</span></span><span class=line><span class=cl>  }
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  // 3. è‡ªå®šä¹‰å…·ä½“searchæ–¹æ³•
</span></span><span class=line><span class=cl>  // flutterè°ƒç”¨native
</span></span><span class=line><span class=cl>  @Override
</span></span><span class=line><span class=cl>  public Messages.SearchReply search(Messages.SearchRequest arg) {
</span></span><span class=line><span class=cl>    Messages.SearchReply reply = new Messages.SearchReply.Builder()
</span></span><span class=line><span class=cl>            .setResult(arg.getQuery() + &#34;-nativeResult&#34;)
</span></span><span class=line><span class=cl>            .build();
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    // nativeè°ƒç”¨flutter
</span></span><span class=line><span class=cl>    nativeApi.query(arg, new Messages.Result<span class=p>&lt;</span><span class=nt>Messages.SearchReply</span><span class=p>&gt;</span>() {
</span></span><span class=line><span class=cl>      @Override
</span></span><span class=line><span class=cl>      public void success(Messages.SearchReply result) {
</span></span><span class=line><span class=cl>        Toast.makeText(context, result.getResult(), Toast.LENGTH_SHORT).show();
</span></span><span class=line><span class=cl>      }
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>      @Override
</span></span><span class=line><span class=cl>      public void error(Throwable error) {
</span></span><span class=line><span class=cl>        // å¤„ç†é”™è¯¯
</span></span><span class=line><span class=cl>      }
</span></span><span class=line><span class=cl>    });
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    return reply;
</span></span><span class=line><span class=cl>  }
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><ol start=5><li>flutterè°ƒç”¨channel</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>class _MyAppState extends State<span class=p>&lt;</span><span class=nt>MyApp</span><span class=p>&gt;</span> {
</span></span><span class=line><span class=cl>  String _platformVersion = &#39;Unknown&#39;;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  // è°ƒç”¨
</span></span><span class=line><span class=cl>  Future<span class=p>&lt;</span><span class=nt>void</span><span class=p>&gt;</span> getNativeResult() async{
</span></span><span class=line><span class=cl>    FlutterCallNativeApi api = FlutterCallNativeApi();
</span></span><span class=line><span class=cl>    SearchRequest request = SearchRequest(query: &#34;Zero&#34;);
</span></span><span class=line><span class=cl>    SearchReply reply = await api.search(request);
</span></span><span class=line><span class=cl>    setState(() {
</span></span><span class=line><span class=cl>      _platformVersion = reply.result;
</span></span><span class=line><span class=cl>    });
</span></span><span class=line><span class=cl>  }
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  @override
</span></span><span class=line><span class=cl>  Widget build(BuildContext context) {
</span></span><span class=line><span class=cl>    return MaterialApp(
</span></span><span class=line><span class=cl>      home: Scaffold(
</span></span><span class=line><span class=cl>        appBar: AppBar(
</span></span><span class=line><span class=cl>          title: const Text(&#39;Plugin example app&#39;),
</span></span><span class=line><span class=cl>        ),
</span></span><span class=line><span class=cl>        body: Center(
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>          child: Column(
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            children: [
</span></span><span class=line><span class=cl>              Text(&#39;Running on: $_platformVersion\n&#39;),
</span></span><span class=line><span class=cl>              MaterialButton(
</span></span><span class=line><span class=cl>                  height: 40,
</span></span><span class=line><span class=cl>                  color: Colors.blue,
</span></span><span class=line><span class=cl>                  textColor: Colors.white,
</span></span><span class=line><span class=cl>                  elevation: 5,
</span></span><span class=line><span class=cl>                  splashColor: Colors.teal,
</span></span><span class=line><span class=cl>                  padding: EdgeInsets.all(8),
</span></span><span class=line><span class=cl>                  child: Text(&#34;ç‚¹å‡»è°ƒç”¨ native&#34;),
</span></span><span class=line><span class=cl>                  onPressed: ()=&gt;{
</span></span><span class=line><span class=cl>                    getNativeResult()
</span></span><span class=line><span class=cl>                  })
</span></span><span class=line><span class=cl>            ],
</span></span><span class=line><span class=cl>          ),
</span></span><span class=line><span class=cl>        ),
</span></span><span class=line><span class=cl>      ),
</span></span><span class=line><span class=cl>    );
</span></span><span class=line><span class=cl>  }
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><h4 id=androidmanifestxml>AndroidManifest.xml</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=cp>&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>manifest</span> <span class=na>xmlns:android</span><span class=o>=</span><span class=s>&#34;http://schemas.android.com/apk/res/android&#34;</span>
</span></span><span class=line><span class=cl>	<span class=err>&lt;!</span><span class=na>--</span> <span class=err>åº”ç”¨çš„åŒ…åã€ç‰ˆæœ¬</span> <span class=na>--</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    package=&#34;com.example.app&#34;
</span></span><span class=line><span class=cl>    android:versionCode=&#34;1&#34;
</span></span><span class=line><span class=cl>    android:versionName=&#34;1.0.1&#34;&gt;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c>&lt;!-- æƒé™è®¾ç½® ---&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>uses-permission</span> <span class=na>android:name</span><span class=o>=</span><span class=s>&#34;android.permission.INTERNET&#34;</span><span class=p>/&gt;</span>           <span class=c>&lt;!---è®¿é—®ç½‘ç»œ&gt;  
</span></span></span><span class=line><span class=cl><span class=c>    &lt;uses-permission android:name=&#34;android.permission.ACCESS_NETWORK_STATE&#34;/&gt; &lt;!---ç½‘ç»œè¿æ¥æ˜¯å¦æœ‰æ•ˆ&gt;
</span></span></span><span class=line><span class=cl><span class=c>    &lt;uses-permission android:name=&#34;android.permission.WRITE_EXTERNAL_STORAGE&#34;/&gt; &lt;!--è¯»å†™å¤–éƒ¨å­˜å‚¨å™¨&gt;
</span></span></span><span class=line><span class=cl><span class=c>
</span></span></span><span class=line><span class=cl><span class=c>    &lt;application
</span></span></span><span class=line><span class=cl><span class=c>    	&lt;!---å‚è€ƒï¼šhttps://juejin.cn/post/7006296858494500877--&gt;</span>
</span></span><span class=line><span class=cl>        android:allowBackup=&#34;true&#34;                <span class=c>&lt;!---å…è®¸appæ•°æ®å¤‡ä»½--&gt;</span>
</span></span><span class=line><span class=cl>        android:icon=&#34;@mipmap/ic_launcher&#34;        <span class=c>&lt;!--å›¾æ ‡--&gt;</span>
</span></span><span class=line><span class=cl>        android:label=&#34;@string/app_name&#34;          <span class=c>&lt;!--æ ‡é¢˜--&gt;</span>
</span></span><span class=line><span class=cl>        android:name=&#34;.App&#34;                       <span class=c>&lt;!--åº”ç”¨ç¨‹åºå¼€å§‹çš„ç±»å--&gt;</span>
</span></span><span class=line><span class=cl>        android:theme=&#34;@style/AppTheme&#34; &gt;         <span class=c>&lt;!--ä¸»é¢˜--&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>activity</span>
</span></span><span class=line><span class=cl>            <span class=na>android:name</span><span class=o>=</span><span class=s>&#34;.ui.activities.MainActivity&#34;</span>   <span class=err>&lt;!</span><span class=na>--activity</span><span class=err>åç§°</span><span class=na>--</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>            android:screenOrientation=&#34;portrait&#34;         <span class=c>&lt;!--é™åˆ¶æ­¤é¡µä¸ºç«–å±æ˜¾ç¤º--&gt;</span>
</span></span><span class=line><span class=cl>            android:label=&#34;@string/app_name&#34; &gt;           <span class=c>&lt;!--æ ‡ç­¾åç§°--&gt;</span>
</span></span><span class=line><span class=cl>            <span class=p>&lt;</span><span class=nt>intent-filter</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>                <span class=p>&lt;</span><span class=nt>action</span> <span class=na>android:name</span><span class=o>=</span><span class=s>&#34;android.intent.action.MAIN&#34;</span> <span class=p>/&gt;</span>        <span class=c>&lt;!--Main point--&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>                <span class=p>&lt;</span><span class=nt>category</span> <span class=na>android:name</span><span class=o>=</span><span class=s>&#34;android.intent.category.LAUNCHER&#34;</span> <span class=p>/&gt;</span>  <span class=c>&lt;!--å¯åŠ¨æ—¶æœ‰æ•ˆ--&gt;</span>
</span></span><span class=line><span class=cl>            <span class=p>&lt;/</span><span class=nt>intent-filter</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;/</span><span class=nt>activity</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>activity</span>
</span></span><span class=line><span class=cl>                <span class=na>android:name</span><span class=o>=</span><span class=s>&#34;.ui.activities.LoginActivity&#34;</span>
</span></span><span class=line><span class=cl>                <span class=na>android:screenOrientation</span><span class=o>=</span><span class=s>&#34;portrait&#34;</span>
</span></span><span class=line><span class=cl>                <span class=na>android:label</span><span class=o>=</span><span class=s>&#34;@string/app_name&#34;</span> <span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;/</span><span class=nt>activity</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>service</span>
</span></span><span class=line><span class=cl>            <span class=na>android:name</span><span class=o>=</span><span class=s>&#34;com.csr.csrmesh2.MeshService&#34;</span>
</span></span><span class=line><span class=cl>            <span class=na>android:enabled</span><span class=o>=</span><span class=s>&#34;true&#34;</span>
</span></span><span class=line><span class=cl>            <span class=na>android:exported</span><span class=o>=</span><span class=s>&#34;false&#34;</span> <span class=p>&gt;</span>      <span class=c>&lt;!--ç¦æ­¢æ­¤æœåŠ¡è¢«å…¶ä»–ç»„ä»¶è°ƒç”¨å’Œäº¤äº’--&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;/</span><span class=nt>service</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>receiver</span> <span class=na>android:name</span><span class=o>=</span><span class=s>&#34;.events.ConnectionChangeReceiver&#34;</span>
</span></span><span class=line><span class=cl>                  <span class=na>android:label</span><span class=o>=</span><span class=s>&#34;ConnectionChangeReceiver&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>            <span class=p>&lt;</span><span class=nt>intent-filter</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>                <span class=p>&lt;</span><span class=nt>action</span> <span class=na>android:name</span><span class=o>=</span><span class=s>&#34;android.net.conn.CONNECTIVITY_CHANGE&#34;</span> <span class=p>/&gt;</span>    <span class=c>&lt;!--ç½‘ç»œè¿æ¥å‘ç”Ÿå˜åŒ–--&gt;</span>
</span></span><span class=line><span class=cl><span class=c>&lt;!--                &lt;action android:name=&#34;android.net.wifi.WIFI_STATE_CHANGED&#34; /&gt;--&gt;</span>
</span></span><span class=line><span class=cl>            <span class=p>&lt;/</span><span class=nt>intent-filter</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;/</span><span class=nt>receiver</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>         <span class=c>&lt;!--ç»„ä»¶ç›¸å…³é…ç½®--&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>meta-data</span> <span class=na>android:name</span><span class=o>=</span><span class=s>&#34;com.facebook.sdk.ApplicationId&#34;</span> <span class=na>android:value</span><span class=o>=</span><span class=s>&#34;@string/facebook_app_id&#34;</span><span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>meta-data</span> <span class=na>android:name</span><span class=o>=</span><span class=s>&#34;com.facebook.sdk.ApplicationName&#34;</span> <span class=na>android:value</span><span class=o>=</span><span class=s>&#34;@string/app_name&#34;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>application</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>manifest</span><span class=p>&gt;</span>
</span></span></code></pre></div><p><strong>å¸¸ç”¨æƒé™ï¼ˆ<a class=link href=https://www.ecjson.com/android/ target=_blank rel=noopener>æŸ¥çœ‹æƒé™å¤§å…¨</a>ï¼‰</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>    <span class=c>&lt;!--ç½‘ç»œ--&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>uses-permission</span> <span class=na>android:name</span><span class=o>=</span><span class=s>&#34;android.permission.INTERNET&#34;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>uses-permission</span> <span class=na>android:name</span><span class=o>=</span><span class=s>&#34;android.permission.ACCESS_NETWORK_STATE&#34;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>uses-permission</span> <span class=na>android:name</span><span class=o>=</span><span class=s>&#34;android.permission.ACCESS_WIFI_STATE&#34;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>uses-permission</span> <span class=na>android:name</span><span class=o>=</span><span class=s>&#34;android.permission.CHANGE_WIFI_STATE&#34;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>uses-permission</span> <span class=na>android:name</span><span class=o>=</span><span class=s>&#34;android.permission.MODIFY_AUDIO_SETTINGS&#34;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>    <span class=c>&lt;!--æ–‡ä»¶è¯»å†™--&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>uses-permission</span> <span class=na>android:name</span><span class=o>=</span><span class=s>&#34;android.permission.READ_EXTERNAL_STORAGE&#34;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>uses-permission</span> <span class=na>android:name</span><span class=o>=</span><span class=s>&#34;android.permission.WRITE_EXTERNAL_STORAGE&#34;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>    <span class=c>&lt;!--å½•éŸ³æœº--&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>uses-permission</span> <span class=na>android:name</span><span class=o>=</span><span class=s>&#34;android.permission.RECORD_AUDIO&#34;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>    <span class=c>&lt;!--è¯»å–æ‰‹æœºçŠ¶æ€ï¼Œè·å–IMEI --&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>uses-permission</span> <span class=na>android:name</span><span class=o>=</span><span class=s>&#34;android.permission.READ_PHONE_STATE&#34;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>uses-permission</span> <span class=na>android:name</span><span class=o>=</span><span class=s>&#34;android.permission.MANAGE_EXTERNAL_STORAGE&#34;</span><span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>    <span class=c>&lt;!--è“ç‰™--&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>uses-permission</span> <span class=na>android:name</span><span class=o>=</span><span class=s>&#34;android.permission.BLUETOOTH&#34;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>uses-permission</span> <span class=na>android:name</span><span class=o>=</span><span class=s>&#34;android.permission.BLUETOOTH_ADMIN&#34;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>    <span class=c>&lt;!--ç›¸æœºï¼ŒåŠç¡¬ä»¶æ”¯æŒ--&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>uses-permission</span> <span class=na>android:name</span><span class=o>=</span><span class=s>&#34;android.permission.CAMERA&#34;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>uses-feature</span> <span class=na>android:name</span><span class=o>=</span><span class=s>&#34;android.hardware.camera&#34;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>uses-feature</span> <span class=na>android:name</span><span class=o>=</span><span class=s>&#34;android.hardware.camera.autofocus&#34;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>    <span class=c>&lt;!--æ¥æ”¶å½©ä¿¡--&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>uses-permission</span> <span class=na>android:name</span><span class=o>=</span><span class=s>&#34;android.permission.RECEIVE_MMS&#34;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>    <span class=c>&lt;!--è®¿é—®GMailè´¦æˆ·åˆ—è¡¨--&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>uses-permission</span> <span class=na>android:name</span><span class=o>=</span><span class=s>&#34;android.permission.GET_ACCOUNTS&#34;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>    <span class=c>&lt;!--ç²¾ç¡®ä½ç½®ã€ç²—ç•¥ä½ç½®--&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>uses-permission</span> <span class=na>android:name</span><span class=o>=</span><span class=s>&#34;android.permission.ACCESS_FINE_LOCATION&#34;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>uses-permission</span> <span class=na>android:name</span><span class=o>=</span><span class=s>&#34;android.permission.ACCESS_COARSE_LOCATION&#34;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>  	
</span></span><span class=line><span class=cl>    <span class=c>&lt;!--ä»¥ä¸‹ä¸å¤ªå¸¸ç”¨--&gt;</span>
</span></span><span class=line><span class=cl>    <span class=c>&lt;!--è¯»å†™æ—¥å†--&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>uses-permission</span> <span class=na>android:name</span><span class=o>=</span><span class=s>&#34;android.permission.READ_CALENDAR&#34;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>uses-permission</span> <span class=na>android:name</span><span class=o>=</span><span class=s>&#34;android.permission.WRITE_CALENDAR&#34;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>    <span class=c>&lt;!--è¯»å†™é€šè®¯å½•--&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>uses-permission</span> <span class=na>android:name</span><span class=o>=</span><span class=s>&#34;android.permission.READ_CONTACTS&#34;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>uses-permission</span> <span class=na>android:name</span><span class=o>=</span><span class=s>&#34;android.permission.WRITE_CONTACTS&#34;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>    <span class=c>&lt;!--è¯»å–ç”µè¯å·ç ï¼ŒAndroid11åŠä»¥ä¸Šä½¿ç”¨READ_PHONE_NUMBERS--&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>uses-permission</span> <span class=na>android:name</span><span class=o>=</span><span class=s>&#34;android.permission.READ_PHONE_STATE&#34;</span>
</span></span><span class=line><span class=cl>                     <span class=na>android:maxSdkVersion</span><span class=o>=</span><span class=s>&#34;29&#34;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>uses-permission</span> <span class=na>android:name</span><span class=o>=</span><span class=s>&#34;android.permission.READ_PHONE_NUMBERS&#34;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>    <span class=c>&lt;!--è·å–ä¼ æ„Ÿå™¨ï¼ˆå¿ƒç‡ç­‰ï¼‰ä¿¡æ¯--&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>uses-permission</span> <span class=na>android:name</span><span class=o>=</span><span class=s>&#34;android.permission.BODY_SENSORS&#34;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>    <span class=c>&lt;!--æ”¶å‘çŸ­ä¿¡--&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>uses-permission</span> <span class=na>android:name</span><span class=o>=</span><span class=s>&#34;android.permission.RECEIVE_SMS&#34;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>uses-permission</span> <span class=na>android:name</span><span class=o>=</span><span class=s>&#34;android.permission.SEND_SMS&#34;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>    <span class=c>&lt;!--æ‚¬æµ®çª—ã€åœ¨å…¶ä»–åº”ç”¨ä¸Šæ˜¾ç¤º--&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>uses-permission</span> <span class=na>android:name</span><span class=o>=</span><span class=s>&#34;android.permission.SYSTEM_ALERT_WINDOW&#34;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>uses-permission</span> <span class=na>android:name</span><span class=o>=</span><span class=s>&#34;android.permission.SYSTEM_OVERLAY_WINDOW&#34;</span> <span class=p>/&gt;</span>
</span></span></code></pre></div><p><strong>å­˜å‚¨æƒé™</strong>ï¼ˆAndroid 10 ç‰ˆæœ¬å¼•å…¥äº†åˆ†åŒºå­˜å‚¨æœºåˆ¶ï¼‰</p><p><a class=link href="https://juejin.cn/post/7306815404562137128?from=search-suggest#heading-6" target=_blank rel=noopener>å‚è€ƒ</a></p><p><img src=/p/flutter/11.png width=4790 height=1559 srcset="/p/flutter/11_hu2dbc4b639928f45267efbc5a735e5ee6_617115_480x0_resize_box_3.png 480w, /p/flutter/11_hu2dbc4b639928f45267efbc5a735e5ee6_617115_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=307 data-flex-basis=737px></p><h4 id=xmlè§†å›¾>XMLè§†å›¾</h4><p><img src=/p/flutter/layout-editor.png width=3788 height=2182 srcset="/p/flutter/layout-editor_hu7509936c93e21b6fdf351cf9effaac61_485398_480x0_resize_box_3.png 480w, /p/flutter/layout-editor_hu7509936c93e21b6fdf351cf9effaac61_485398_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=173 data-flex-basis=416px></p><p><strong>å¸¸è§å±æ€§</strong></p><p><img src=/p/flutter/12.png width=980 height=1881 srcset="/p/flutter/12_hue237523be3f464234383965a561bdf14_119818_480x0_resize_box_3.png 480w, /p/flutter/12_hue237523be3f464234383965a561bdf14_119818_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=52 data-flex-basis=125px></p><div class=table-wrapper><table><thead><tr><th>gravityå±æ€§å€¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>top</td><td>ä¸æ”¹å˜æ§ä»¶å¤§å°ï¼Œå¯¹é½åˆ°å®¹å™¨é¡¶éƒ¨</td></tr><tr><td>bottom</td><td>ä¸æ”¹å˜æ§ä»¶å¤§å°ï¼Œå¯¹é½åˆ°å®¹å™¨åº•éƒ¨</td></tr><tr><td>left</td><td>ä¸æ”¹å˜æ§ä»¶å¤§å°ï¼Œå¯¹é½åˆ°å®¹å™¨å·¦ä¾§</td></tr><tr><td>right</td><td>ä¸æ”¹å˜æ§ä»¶å¤§å°ï¼Œå¯¹é½åˆ°å®¹å™¨å³ä¾§</td></tr><tr><td>center_vertical</td><td>ä¸æ”¹å˜æ§ä»¶å¤§å°ï¼Œå¯¹é½åˆ°å®¹å™¨çºµå‘ä¸­å¤®ä½ç½®</td></tr><tr><td>center_horizontal</td><td>ä¸æ”¹å˜æ§ä»¶å¤§å°ï¼Œå¯¹é½åˆ°å®¹å™¨æ¨ªå‘ä¸­å¤®ä½ç½®</td></tr><tr><td>center</td><td>ä¸æ”¹å˜æ§ä»¶å¤§å°ï¼Œå¯¹é½åˆ°å®¹å™¨ä¸­å¤®ä½ç½®</td></tr><tr><td>fill_vertical</td><td>è‹¥æœ‰å¯èƒ½ï¼Œçºµå‘æ‹‰ä¼¸ä»¥å¡«æ»¡å®¹å™¨</td></tr><tr><td>fill_horizontal</td><td>è‹¥æœ‰å¯èƒ½ï¼Œæ¨ªå‘æ‹‰ä¼¸ä»¥å¡«æ»¡å®¹å™¨</td></tr><tr><td>fill</td><td>è‹¥æœ‰å¯èƒ½ï¼Œçºµå‘æ¨ªå‘åŒæ—¶æ‹‰ä¼¸å¡«æ»¡å®¹å™¨</td></tr></tbody></table></div><p><strong>ç‰¹æ®Šå±æ€§</strong></p><p><img src=/p/flutter/13.png width=1220 height=950 srcset="/p/flutter/13_hu92ff4c80d80fef0ba3551a77eba7b327_183074_480x0_resize_box_3.png 480w, /p/flutter/13_hu92ff4c80d80fef0ba3551a77eba7b327_183074_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=128 data-flex-basis=308px></p><h3 id=å¸¸ç”¨-api>å¸¸ç”¨ APIï¼š</h3><p><a class=link href=https://api.flutter.dev/javadoc/io/flutter/embedding/engine/plugins/FlutterPlugin.FlutterPluginBinding.html target=_blank rel=noopener>FlutterPluginBinding</a>: å‘æ‰€æœ‰ FlutterEngine æ³¨å†Œçš„æ’ä»¶æä¾›å¯ç”¨çš„èµ„æºã€‚</p><p><a class=link href=https://api.flutter.dev/javadoc/io/flutter/embedding/engine/plugins/activity/ActivityPluginBinding.html target=_blank rel=noopener>ActivityPluginBinding</a> : ç»‘å®šä½¿ActivityAwareæ’ä»¶å¯ä»¥è®¿é—®å…³è”çš„Activityå’ŒActivityçš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ã€‚</p><p><a class=link href=https://api.flutter.dev/javadoc/io/flutter/embedding/engine/plugins/activity/ActivityAware.html target=_blank rel=noopener>ActivityAware</a>: FlutterPlugin æŠŠ Activityç”Ÿå‘½å‘¨æœŸäº‹ä»¶ å…³è”åˆ° FlutterEngineä¸­è¿è¡Œçš„Activity</p><p><a class=link href=https://api.flutter-io.cn/javadoc/io/flutter/embedding/android/FlutterView.html target=_blank rel=noopener>FlutterView</a>: åœ¨ Android è®¾å¤‡ä¸Šæ˜¾ç¤º Flutter UI</p><p><a class=link href=https://developer.android.com/reference/android/app/NotificationManager target=_blank rel=noopener>NotificationManager</a>ï¼šç”¨äºé€šçŸ¥ç”¨æˆ·å‘ç”Ÿçš„äº‹ä»¶</p><p><a class=link href=https://developer.android.com/reference/android/content/res/Resources target=_blank rel=noopener>Resources</a>: ç”¨äºè®¿é—®åº”ç”¨ç¨‹åºèµ„æºçš„ç±»ã€‚</p><h2 id=è°ƒè¯•>è°ƒè¯•</h2><h3 id=vs-code-debug>VS Code debug</h3><p><a class=link href="https://www.bilibili.com/video/BV1Jf4y1S7Bw/?spm%5C_id%5C_from=333.788.videocard.0&amp;vd_source=e3bb7819c2465f903aea3ffaa2d0773b" target=_blank rel=noopener>å‚è€ƒ</a></p><p><strong>è¿è¡Œå‰æ</strong></p><ul><li>å½“å‰ç¼–ç¨‹è¯­è¨€ç¯å¢ƒ</li><li>å½“å‰ç¼–ç¨‹è¯­è¨€ç”¨äºè°ƒè¯•çš„æ‰©å±•ï¼Œä¾‹å¦‚Java Extension Pack</li><li>é…ç½®æ–‡ä»¶launch.json</li></ul><p><strong>æŒ‰é’®ä»‹ç»</strong></p><p><img src=/p/flutter/toolbar.png width=216 height=32 srcset="/p/flutter/toolbar_hu7580616d3674f764d0b734204110ef29_439_480x0_resize_box_3.png 480w, /p/flutter/toolbar_hu7580616d3674f764d0b734204110ef29_439_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=675 data-flex-basis=1620px></p><p>ç»§ç»­ï¼šè·³åˆ°ä¸‹ä¸€ä¸ªæ–­ç‚¹</p><p>å•æ­¥è·³è¿‡ï¼šè·³è¿‡å½“å‰è¯­å¥ï¼ˆè°ƒç”¨å…¶ä»–æ–‡ä»¶å¤¹çš„æ‰€æœ‰è¯­å¥ï¼‰ï¼Œè¿è¡Œä¸‹ä¸€è¡Œ</p><p>å•æ­¥è°ƒè¯•ï¼šè¿›å…¥å½“å‰å‡½æ•°å†…ï¼Œè¿è¡Œä¸‹ä¸€è¡Œ</p><p>å•æ­¥è·³å‡ºï¼šå½“debugé™·å…¥æŸä¸ªå¾ªç¯æ—¶ï¼Œè·³å‡ºå¾ªç¯å¹¶æ‰§è¡Œå¾ªç¯å¤–çš„è¯­å¥</p><p>é‡å¯</p><p><strong>é…ç½®æ–‡ä»¶</strong></p><p>launch.jsonæ˜¯ç”¨äºè°ƒè¯•çš„é…ç½®æ–‡ä»¶ï¼Œä½äº<code>.vscode</code>æ–‡ä»¶å¤¹ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹ä¼šè‡ªåŠ¨åˆ›å»ºï¼Œä¹Ÿå¯ä»¥åœ¨å·¦ä¾§è¾¹æ <code>Run and Debug</code>ç‚¹å‡»<code>create a launch.json file</code>
<details class=spoiler id=spoiler-23><summary>launch.jsonæ³¨é‡Šï¼ˆæ— éœ€äº†è§£ï¼‰</summary><p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>    &#34;configurations&#34;: [
</span></span><span class=line><span class=cl>        {
</span></span><span class=line><span class=cl>            // æ­£åœ¨è°ƒè¯•çš„é¡¹ç›®åç§°ï¼ˆå·¦ä¾§è¾¹æ ä¸‹æ‹‰èœå•ï¼‰
</span></span><span class=line><span class=cl>            &#34;name&#34;: &#34;flutter_project&#34;,   
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            // æŒ‡å®šè°ƒè¯•æ¨¡å¼
</span></span><span class=line><span class=cl>            // launchæ¨¡å¼ï¼šæ”¯æŒæ–­ç‚¹è°ƒè¯•
</span></span><span class=line><span class=cl>            // attachæ¨¡å¼ï¼šæ”¯æŒå¯¹è¿è¡Œä¸­çš„ç¨‹åºï¼ˆå¤šä¸ºè¿œç¨‹æœåŠ¡å™¨)æ–­ç‚¹è°ƒè¯•ï¼Œç‚¹å‡»Add Configurationï¼Œé€‰æ‹©Attach to Process
</span></span><span class=line><span class=cl>            &#34;request&#34;: &#34;launch&#34;,
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            // ç¼–ç¨‹è¯­è¨€                    
</span></span><span class=line><span class=cl>            &#34;type&#34;: &#34;dart&#34;
</span></span><span class=line><span class=cl>        },
</span></span><span class=line><span class=cl>    ]
</span></span></code></pre></div></p></details></p><p><strong>æ–­ç‚¹ç±»å‹</strong></p><p>åœ¨ä»£ç è¡Œå·¦ä¾§æ–­ç‚¹å‡ºå³é”®çœ‹åˆ°3ç§ç±»å‹ï¼š</p><ul><li>Add Breakpointï¼šåœ¨æ–­ç‚¹å¤„é˜»å¡ç¨‹åº</li><li>Add Conditional Breakpointï¼šåœ¨æ¡ä»¶ä¸ºtrueæ—¶æ–­ç‚¹ç”Ÿæ•ˆ</li><li>Add Logpointï¼šç¨‹åºè¿è¡Œä¸­ï¼Œä»¥éé˜»å¡çš„æ–¹å¼ï¼Œè®°å½•è°ƒè¯•æ—¥å¿—</li><li>Inline Breakpointï¼šå½“ä¸€è¡Œä»£ç ä¸­æœ‰å¤šä¸ªå‡½æ•°ï¼Œå…‰æ ‡å®šä½åœ¨å‡½æ•°å‰ï¼ŒRun -> New Breakpoint -> Inline Breakpointï¼Œæ–­ç‚¹åœ¨å½“å‰å‡½æ•°ä¹‹å‰ç”Ÿæ•ˆï¼Œç‚¹å‡»å•æ­¥è°ƒè¯•å¯ä»¥è¿›å…¥å½“å‰å‡½æ•°</li></ul><h3 id=å¸ƒå±€è°ƒè¯•>å¸ƒå±€è°ƒè¯•</h3><p><a class=link href="https://www.bilibili.com/video/BV1qN4y1M7nR/?spm_id_from=888.80997.embed_other.whitelist&amp;t=48.359897&amp;bvid=BV1qN4y1M7nR&amp;vd_source=e3bb7819c2465f903aea3ffaa2d0773b" target=_blank rel=noopener>å‚è€ƒ</a></p><p><img src=/p/flutter/8.png width=1988 height=1660 srcset="/p/flutter/8_hud8585a5925bc821c6f6926c73e3a70ba_436204_480x0_resize_box_3.png 480w, /p/flutter/8_hud8585a5925bc821c6f6926c73e3a70ba_436204_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=119 data-flex-basis=287px></p><h3 id=æ¨¡æ‹Ÿå™¨>æ¨¡æ‹Ÿå™¨</h3><p><strong>å¼€å¯hyper-v</strong></p><p>Windowsæœç´¢ -> å¯ç”¨ä¸å…³é—­WindowsåŠŸèƒ½ -> hyper-v</p><p>æ¨¡æ‹Ÿå™¨æŠ¥é”™ï¼šæ‰¾ä¸åˆ°libandroid-emu-metrics.dllï¼Œé‡å¯hyper-v</p><p><strong>vscodeè¿æ¥ç¬¬ä¸‰æ–¹æ¨¡æ‹Ÿå™¨</strong></p><p>é¡¹ç›®ç›®å½•ä¸‹æ‰§è¡Œï¼š<code>adb connect 127.0.0.1:[port]</code></p><h2 id=aiç”»å›¾>AIç”»å›¾</h2><p>Ai è®¾ç½®ï¼šè§†å›¾->æ˜¾ç¤ºç½‘æ ¼</p><p>å¤šè¾¹å½¢å˜æ¢ï¼šå¤šè¾¹å½¢å·¥å…·->è‡ªå®šä¹‰å˜æ¢å·¥å…·</p><p>ç¼©æ”¾ï¼šé¼ æ ‡å·¦é”®å‘å³åˆ’æ”¾å¤§ã€å‘å·¦åˆ’ç¼©å°</p><p>å½¢çŠ¶åˆæˆï¼šé€‰ä¸­åŒºåŸŸ->å½¢çŠ¶ç”Ÿæˆå™¨å·¥å…·->ç©¿è¿‡éœ€è¦çš„åŒºåŸŸ->æŒ‰ä½Altç©¿è¿‡ä¸è¦çš„åŒºåŸŸ</p><p>æ¸å˜ï¼šåŒå‡»åœ†åœˆå¼¹å‡ºè°ƒè‰²æ¿</p><h2 id=åŠ¨ç”»>åŠ¨ç”»</h2><p><img src=/p/flutter/donghua.png width=1396 height=785 srcset="/p/flutter/donghua_hub3ab5e6cde8a9a4aeac5a591ce269148_435997_480x0_resize_box_3.png 480w, /p/flutter/donghua_hub3ab5e6cde8a9a4aeac5a591ce269148_435997_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=177 data-flex-basis=426px></p><p>lottieéœ€è¦ç”¨åˆ°Aeï¼Œriveæ˜¯åœ¨çº¿ç¼–è¾‘ã€‚</p><h2 id=ä¸Šæ¶>ä¸Šæ¶</h2><h3 id=åŒ…å>åŒ…å</h3><ul><li>Android æ˜¯åœ¨ <code>android</code> â–¸ <code>app</code> â–¸ <code>src</code> â–¸ <code>main</code> â–¸ <code>AndroidManifest.xml</code></li><li>iOS åœ¨ <code>ios</code> â–¸ <code>Runner</code> â–¸ <code>Info.plist</code></li></ul><h3 id=åº”ç”¨åç§°>åº”ç”¨åç§°</h3><ul><li>Android æ˜¯åœ¨ <code>android</code> â–¸ <code>app</code> â–¸ <code>src</code> â–¸ <code>main</code> â–¸ <code>AndroidManifest.xml</code> ä¸­ä¿®æ”¹<code>android:label="XXX"</code>;</li><li>iOS åœ¨ <code>ios</code> â–¸ <code>Runner</code> â–¸ <code>Info.plist</code> ä¸­ä¿®æ”¹<code>CFBundleName</code>å¯¹åº”çš„Value</li></ul><h3 id=å›¾æ ‡>å›¾æ ‡</h3><ul><li>Android åœ¨<code>android</code> â–¸ <code>app</code> â–¸ <code>src</code> â–¸ <code>res</code> â–¸ <code>mipmap-...</code> æ–‡ä»¶å¤¹ä¸­æ›¿æ¢ç›¸åº”å›¾ç‰‡</li><li>iOS åœ¨ <code>ios</code> â–¸ <code>Runner</code> â–¸ <code>Assets.xcassets</code> â–¸ <code>AppIcon.appiconset</code>æ–‡ä»¶å¤¹ä¸­æ›¿æ¢ç›¸åº”å°ºå¯¸çš„å›¾ç‰‡ï¼Œ å¦‚æœä½¿ç”¨ä¸åŒçš„æ–‡ä»¶åï¼Œé‚£è¿˜å¿…é¡»æ›´æ–°åŒä¸€ç›®å½•ä¸­çš„<code>Contents.json</code>æ–‡ä»¶ã€‚</li></ul><h3 id=å¯åŠ¨å›¾ç‰‡>å¯åŠ¨å›¾ç‰‡</h3><ul><li>Android åœ¨<code>android</code> â–¸ <code>app</code> â–¸ <code>src</code> â–¸ <code>res</code> â–¸ <code>drawable</code> â–¸ <code>launch_background.xml</code> é€šè¿‡è‡ªå®šä¹‰drawableæ¥å®ç°è‡ªå®šä¹‰å¯åŠ¨ç•Œé¢ã€‚</li><li>iOS åœ¨ <code>ios</code> â–¸ <code>Runner</code> â–¸ <code>Assets.xcassets</code> â–¸ <code>LaunchImage.imageset</code>æ–‡ä»¶å¤¹ä¸­æ›¿æ¢ç›¸åº”å°ºå¯¸çš„å›¾ç‰‡ï¼Œ å¦‚æœä½¿ç”¨ä¸åŒçš„æ–‡ä»¶åï¼Œé‚£è¿˜å¿…é¡»æ›´æ–°åŒä¸€ç›®å½•ä¸­çš„<code>Contents.json</code>æ–‡ä»¶ã€‚</li></ul><h3 id=ç­¾åå®‰å“>ç­¾åï¼ˆå®‰å“ï¼‰</h3><ol><li>åˆ›å»º</li></ol><ul><li>android studioæ–¹æ³•</li></ul><p>ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œ android studio -> æ‰“å¼€é¡¹ç›®ä¸‹çš„Androidæ–‡ä»¶å¤¹ -> Build -> Generate Signed Bundle / APK -> é€‰æ‹© APK ç‚¹å‡» Next -> Create new</p><p><img src=/p/flutter/keystore.png width=658 height=669 srcset="/p/flutter/keystore_hu9e11625d68bcb57a0089d116b2122c43_27301_480x0_resize_box_3.png 480w, /p/flutter/keystore_hu9e11625d68bcb57a0089d116b2122c43_27301_1024x0_resize_box_3.png 1024w" loading=lazy class=gallery-image data-flex-grow=98 data-flex-basis=236px></p><ul><li><strong>å‘½ä»¤è¡Œketoolæ–¹æ³•ï¼ˆæ¨èï¼‰</strong></li></ul><p>ketoolå®¹æ˜“ä¿®æ”¹å¯†é’¥ï¼Œå‚è€ƒ<a class=link href=https://docs.oracle.com/javase/8/docs/technotes/tools/windows/keytool.html#keytool_option_gencert target=_blank rel=noopener>Java8ç‰ˆå®˜æ–¹æ–‡æ¡£</a>æˆ–<a class=link href=https://docs.oracle.com/en/java/javase/index.html target=_blank rel=noopener>æ›´å¤šç‰ˆæœ¬</a>ã€‚</p><p><strong>ä½¿ç”¨ï¼š</strong></p><p>é¡¹ç›®ä¸‹çš„Android/appæ–‡ä»¶å¤¹æ‰“å¼€cmd</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>// åˆ›å»ºkeystoreå’Œå¯†é’¥å¯¹
</span></span><span class=line><span class=cl>keytool -genkeypair -alias key -keyalg RSA -keysize 2048 -validity 10000 -keystore ./release.keystore.jks
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>// åˆ—å‡ºå¯ç”¨çš„è¯ä¹¦åˆ«åï¼ˆæŒ‡å®šè·¯å¾„ï¼‰
</span></span><span class=line><span class=cl>keytool -list -v -keystore ./release.keystore.jks
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>// åˆ é™¤è¯ä¹¦ï¼ˆæŒ‡å®šåˆ«åã€è·¯å¾„ï¼‰                    
</span></span><span class=line><span class=cl>keytool -delete -alias key -keystore ./release.keystore.jks
</span></span></code></pre></div><details class=spoiler id=spoiler-24><summary>è¯¦ç»†å‚æ•°</summary><p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>-genkeypair ç”Ÿæˆå¯†é’¥å¯¹ï¼ˆå…¬é’¥å’Œå…³è”çš„ç§é’¥ï¼‰ã€‚å°†è¯¥è¯ä¹¦é“¾å’Œç§é’¥å­˜å‚¨åœ¨ç”±aliasæ ‡è¯†çš„æ–°å¯†é’¥åº“æ¡ç›®ä¸­
</span></span><span class=line><span class=cl>-alias åˆ«åï¼Œæ¯ä¸ªkeystoreéƒ½å…³è”è¿™ä¸€ä¸ªç‹¬ä¸€æ— äºŒçš„aliasï¼Œè¿™ä¸ªaliasé€šå¸¸ä¸åŒºåˆ†å¤§å°å†™
</span></span><span class=line><span class=cl>-keystore å¯†é’¥åº“ä½ç½®
</span></span><span class=line><span class=cl>-keyalg æŒ‡å®šå¯†é’¥çš„ç®—æ³• (é»˜è®¤å€¼ï¼šDSA)
</span></span><span class=line><span class=cl>-keysize æŒ‡å®šå¯†é’¥é•¿åº¦ ï¼ˆé»˜è®¤å€¼å–å†³äºkeyalgï¼šRSAä¸º2048ï¼ŒDSAä¸º1024ï¼‰
</span></span><span class=line><span class=cl>-validity æŒ‡å®šåˆ›å»ºçš„è¯ä¹¦æœ‰æ•ˆæœŸå¤šå°‘å¤©(é»˜è®¤ 90)
</span></span><span class=line><span class=cl>-storepass æŒ‡å®šå¯†é’¥åº“çš„å¯†ç (è·å–keystoreä¿¡æ¯æ‰€éœ€çš„å¯†ç )
</span></span><span class=line><span class=cl>-keypass æŒ‡å®šåˆ«åæ¡ç›®çš„å¯†ç (ç§é’¥çš„å¯†ç )
</span></span><span class=line><span class=cl>-dname æŒ‡å®šè¯ä¹¦å‘è¡Œè€…ä¿¡æ¯ å…¶ä¸­ï¼š â€œCN=åå­—ä¸å§“æ°,OU=ç»„ç»‡å•ä½åç§°,O=ç»„ç»‡åç§°,L=åŸå¸‚æˆ–åŒºåŸŸå ç§°,ST=å·æˆ–çœä»½åç§°,C=å•ä½çš„ä¸¤å­—æ¯å›½å®¶ä»£ç â€
</span></span><span class=line><span class=cl>-list æ˜¾ç¤ºå¯†é’¥åº“ä¸­çš„è¯ä¹¦ä¿¡æ¯ 
</span></span><span class=line><span class=cl>-export å°†åˆ«åæŒ‡å®šçš„è¯ä¹¦å¯¼å‡ºåˆ°æ–‡ä»¶ keytool -export -alias éœ€è¦å¯¼å‡ºçš„åˆ«å -keystore æŒ‡å®škeystore -file æŒ‡å®šå¯¼å‡ºçš„è¯ä¹¦ä½ç½®åŠè¯ä¹¦åç§° -storepass å¯†ç 
</span></span><span class=line><span class=cl>-file å‚æ•°æŒ‡å®šå¯¼å‡ºåˆ°æ–‡ä»¶çš„æ–‡ä»¶å
</span></span><span class=line><span class=cl>-delete åˆ é™¤å¯†é’¥åº“ä¸­æŸæ¡ç›® keytool -delete -alias æŒ‡å®šéœ€åˆ é™¤çš„åˆ« -keystore æŒ‡å®škeystore â€“ storepass å¯†ç 
</span></span><span class=line><span class=cl>-printcert æŸ¥çœ‹å¯¼å‡ºçš„è¯ä¹¦ä¿¡æ¯ keytool -printcert -file g:\sso\michael.crt
</span></span><span class=line><span class=cl>-keypasswd ä¿®æ”¹å¯†é’¥åº“ä¸­æŒ‡å®šæ¡ç›®å£ä»¤ keytool -keypasswd -alias éœ€ä¿®æ”¹çš„åˆ«å -keypass æ—§å¯†ç  -new æ–°å¯†ç  -storepass keystoreå¯†ç  -keystore sage
</span></span><span class=line><span class=cl>-storepasswd ä¿®æ”¹keystoreå£ä»¤ keytool -storepasswd -keystore g:\sso\michael.keystore(éœ€ä¿®æ”¹å£ä»¤çš„keystore) -storepass pwdold(åŸå§‹å¯†ç ) -new pwdnew(æ–°å¯†ç )
</span></span><span class=line><span class=cl>-import å°†å·²ç­¾åæ•°å­—è¯ä¹¦å¯¼å…¥å¯†é’¥åº“ keytool -import -alias æŒ‡å®šå¯¼å…¥æ¡ç›®çš„åˆ«å -keystore æŒ‡å®škeystore -file éœ€å¯¼å…¥çš„è¯ä¹¦
</span></span><span class=line><span class=cl>ä¸­åˆ›å»ºä¸€ä¸ªé»˜è®¤æ–‡ä»¶â€.keystoreâ€,è¿˜ä¼šäº§ç”Ÿä¸€ä¸ªmykeyçš„åˆ«åï¼Œmykeyä¸­åŒ…å«ç”¨æˆ·çš„å…¬é’¥ã€ç§é’¥å’Œè¯ä¹¦(åœ¨æ²¡æœ‰æŒ‡å®šç”Ÿæˆä½ç½®çš„æƒ…å†µä¸‹,keystoreä¼šå­˜åœ¨ç”¨æˆ·ç³»ç»Ÿé»˜è®¤ç›®å½•)
</span></span></code></pre></div></p></details><ol start=2><li><strong>é…ç½®</strong></li></ol><ul><li>ä¸ºé˜²æ­¢ build.gradle åä½œæ—¶è¢«ä¿®æ”¹ã€ä¸Šçº¿ååç¼–è¯‘æ³„éœ²ï¼ŒæŠŠå¯†é’¥ä¿¡æ¯ä¿å­˜åˆ° android/local.propertiesï¼š</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>storePassword=12345678
</span></span><span class=line><span class=cl>keyPassword=12345678
</span></span><span class=line><span class=cl>keyAlias=key
</span></span><span class=line><span class=cl>storeFile=./release.keystore.jks
</span></span></code></pre></div><p>local.propertiesé»˜è®¤ä¸ä¼šè¢«æ·»åŠ åˆ°Gitæäº¤åˆ°è¿œç¨‹ä»“åº“ã€‚</p><ul><li>åœ¨android/app/build.gradleæ·»åŠ ï¼š</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>// è¯»å– local.properties
</span></span><span class=line><span class=cl>def mystoreFile = file(localProperties.getProperty(&#39;storeFile&#39;))
</span></span><span class=line><span class=cl>def mystorePassword = localProperties.getProperty(&#39;storePassword&#39;)
</span></span><span class=line><span class=cl>def mykeyAlias = localProperties.getProperty(&#39;keyAlias&#39;)
</span></span><span class=line><span class=cl>def mykeyPassword = localProperties.getProperty(&#39;keyPassword&#39;)
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>    // ç­¾åé…ç½®
</span></span><span class=line><span class=cl>    signingConfigs {
</span></span><span class=line><span class=cl>        release {
</span></span><span class=line><span class=cl>            keyAlias mykeyAlias
</span></span><span class=line><span class=cl>            keyPassword mykeyPassword
</span></span><span class=line><span class=cl>            storeFile mystoreFile
</span></span><span class=line><span class=cl>            storePassword mystorePassword
</span></span><span class=line><span class=cl>        }
</span></span><span class=line><span class=cl>        // // debugæ¨¡å¼ä½¿ç”¨é»˜è®¤çš„ C:\Users<span class=err>&lt;</span>ç”¨æˆ·å&gt;.Android\debug.keystore è¿›è¡Œç­¾åï¼Œå¯†ç æ˜¯ android
</span></span><span class=line><span class=cl>        // debug {
</span></span><span class=line><span class=cl>        //     keyAlias &#39;androiddebugkey&#39;
</span></span><span class=line><span class=cl>        //     keyPassword &#39;android&#39;
</span></span><span class=line><span class=cl>        //     storeFile file(&#39;C:\\Users\\90487\\.android\\debug.keystore&#39;)
</span></span><span class=line><span class=cl>        //     storePassword &#39;android&#39;
</span></span><span class=line><span class=cl>        // }
</span></span><span class=line><span class=cl>    }
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    buildTypes {
</span></span><span class=line><span class=cl>        release {
</span></span><span class=line><span class=cl>            // TODO: Add your own signing config for the release build.
</span></span><span class=line><span class=cl>            // Signing with the debug keys for now, so `flutter run --release` works.
</span></span><span class=line><span class=cl>            signingConfig signingConfigs.release
</span></span><span class=line><span class=cl>            // // æ··æ·†
</span></span><span class=line><span class=cl>            // minifyEnabled false
</span></span><span class=line><span class=cl>            // // æ··æ·†æ–‡ä»¶
</span></span><span class=line><span class=cl>            // proguardFiles getDefaultProguardFile(&#39;proguard-android-optimize.txt&#39;), &#39;proguard-rules.pro&#39;
</span></span><span class=line><span class=cl>        }
</span></span><span class=line><span class=cl>        // debug {
</span></span><span class=line><span class=cl>        //     signingConfig signingConfigs.debug
</span></span><span class=line><span class=cl>        //     // // åŒ…ååæ·»åŠ .debugï¼Œå¯ä»¥åŒæ—¶å®‰è£…å¤šä¸ªåº”ç”¨
</span></span><span class=line><span class=cl>        //     // applicationIdSuffix &#39;.debug&#39;
</span></span><span class=line><span class=cl>        // }
</span></span><span class=line><span class=cl>    }
</span></span></code></pre></div><p>android studioéªŒè¯é…ç½®ï¼šFile -> Project Structure -> Modules -> Signing Configs</p><p>å‚è€ƒï¼š<a class=link href=https://developer.android.com/studio/publish/app-signing#generate-key target=_blank rel=noopener>å®˜æ–¹æ–‡æ¡£</a> <a class=link href=https://juejin.cn/post/6844903942007029773#heading-5 target=_blank rel=noopener>buildTypes</a></p><ol start=3><li><strong>ç”Ÿæˆç­¾åæŠ¥å‘Šï¼ˆå¯ä»¥è·å¾—md5ï¼‰</strong></li></ol><p>ç‚¹å‡»å³ä¾§Gradleé€‰é¡¹å¡ï¼Œandroid -> app -> Tasks -> android -> signingReportã€‚</p><p>å¦‚æœ Gradle é¢æ¿ç›®å½•ä¸­æ²¡æœ‰ signingReport æ–‡ä»¶ï¼Œè¿›å…¥è®¾ç½®é¡¹ï¼šFile -> Settings -> Experimental -> å–æ¶ˆé€‰ä¸­ Only include&mldr;during Gradle Syncã€‚ç„¶ååŒæ­¥ä¸€ä¸‹ï¼šFile -> Sync Project with Gradle Filesã€‚</p><h3 id=ç¼–è¯‘>ç¼–è¯‘</h3><ul><li>apk</li></ul><p>é¡¹ç›®æ ¹ç›®å½•ä¸‹æ‰§è¡Œ</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>flutter build apk --split-per-abi
</span></span></code></pre></div><ul><li>bundlesï¼ˆgoogle å¹³å°éœ€è¦ bundle æ–‡ä»¶æ ¼å¼ï¼‰</li></ul><p>é¡¹ç›®æ ¹ç›®å½•ä¸‹æ‰§è¡Œ</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>flutter build appbundle
</span></span></code></pre></div><p>è¾“å‡º build/app/outputs/bundle/release/app-release.aab</p><h2 id=å…¶ä»–-1>å…¶ä»–</h2><p>double width = MediaQuery.of(context).size.width; å±å¹•å®½åº¦</p><p>double height = MediaQuery.of(context).size.height; å±å¹•é«˜åº¦</p></section><footer class=article-footer><section class=article-copyright><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg><span>Licensed under CC BY-NC-SA 4.0</span></section><section class=article-lastmod><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round" style="margin:0 5px"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg><span>æœ€åæ›´æ–°äº 2024-11-30</span></section></footer><div class=article-details></div></article><script src=//unpkg.com/@waline/client@v2/dist/waline.js></script>
<link href=//unpkg.com/@waline/client@v2/dist/waline.css rel=stylesheet><div id=waline class=waline-container></div><style>.waline-container{background-color:var(--card-background);border-radius:var(--card-border-radius);box-shadow:var(--shadow-l1);padding:var(--card-padding);--waline-font-size:var(--article-font-size)}.waline-container .wl-count{color:var(--card-text-color-main)}</style><script>Waline.init({dark:'html[data-scheme="dark"]',el:"#waline",emoji:["https://cdn.jsdelivr.net/gh/walinejs/emojis/weibo"],locale:{admin:"Admin",placeholder:null},requiredMeta:["name","email","url"],serverURL:"https://myblog-rho-ebon.vercel.app/"})</script><footer class=site-footer><section class=copyright>&copy;
2021 -
2025 Janus</section><section class=powerby>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>ä¸»é¢˜ <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.16.0>Stack</a></b> ç”± <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a> è®¾è®¡</section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script type=text/javascript src=/ts/main.js defer></script>
<script>function adsenseDelay(){var t=document.getElementsByTagName("head")[0],e=document.createElement("script");e.type="text/javascript",e.src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1748363845231571",e.setAttribute("crossorigin","anonymous"),t.appendChild(e)}function analyticsDelay(){var t=document.getElementsByTagName("head")[0],e=document.createElement("script");e.type="text/javascript",e.src="https://www.googletagmanager.com/gtag/js?id=UA-124746836-1",t.appendChild(e)}function gtag(){dataLayer.push(arguments)}setTimeout(adsenseDelay,1500),setTimeout(analyticsDelay,1500),window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-124746836-1")</script></body></html>