<!doctype html><html lang=zh-cn dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="安装 配置 JDK、安装配置Android Studio flutter(windows) flutter安装 set PUB_HOSTED_URL=&amp;#34;https://mirrors.tuna.tsinghua.edu.cn/dart-pub&amp;#34; #配置国内镜像 set FLUTTER_STORAGE_BASE_URL=&amp;#34;https://mirrors.tuna.tsinghua.edu.cn/flutter&amp;#34; 安装遇坑 //配置build.gradle(project:"><title>flutter基础备忘录</title><link rel=canonical href=https://www.jiangdaoli.cf/p/flutter/><link rel=stylesheet href=/scss/style.min.d41860860756ab9c450238ff299dc8627d464cd484019706d7090e378ee95bf0.css><meta property="og:title" content="flutter基础备忘录"><meta property="og:description" content="安装 配置 JDK、安装配置Android Studio flutter(windows) flutter安装 set PUB_HOSTED_URL=&amp;#34;https://mirrors.tuna.tsinghua.edu.cn/dart-pub&amp;#34; #配置国内镜像 set FLUTTER_STORAGE_BASE_URL=&amp;#34;https://mirrors.tuna.tsinghua.edu.cn/flutter&amp;#34; 安装遇坑 //配置build.gradle(project:"><meta property="og:url" content="https://www.jiangdaoli.cf/p/flutter/"><meta property="og:site_name" content="xiaoxian"><meta property="og:type" content="article"><meta property="article:section" content="Post"><meta property="article:published_time" content="2022-04-30T00:00:00+00:00"><meta property="article:modified_time" content="2021-04-30T00:00:00+00:00"><meta name=twitter:title content="flutter基础备忘录"><meta name=twitter:description content="安装 配置 JDK、安装配置Android Studio flutter(windows) flutter安装 set PUB_HOSTED_URL=&amp;#34;https://mirrors.tuna.tsinghua.edu.cn/dart-pub&amp;#34; #配置国内镜像 set FLUTTER_STORAGE_BASE_URL=&amp;#34;https://mirrors.tuna.tsinghua.edu.cn/flutter&amp;#34; 安装遇坑 //配置build.gradle(project:"><link rel=icon type=image/svg+xml href=/favicon.svg><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#00aba9"><meta name=msapplication-TileImage content="/mstile-144x144.png"><meta name=theme-color content="#ffffff"><meta name=apple-mobile-web-app-title content="rmdhnreza.my.id - Blog Tutorial For Linux & Windows"><meta name=application-name content="rmdhnreza.my.id - Blog Tutorial For Linux & Windows"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","name":"flutter基础备忘录","headline":"flutter基础备忘录","description":"安装 配置 JDK、安装配置Android Studio flutter(windows) flutter安装 set PUB_HOSTED_URL=\u0026#34;https:\/\/mirrors.tuna.tsinghua.edu.cn\/dart-pub\u0026#34; #配置国内镜像 set FLUTTER_STORAGE_BASE_URL=\u0026#34;https:\/\/mirrors.tuna.tsinghua.edu.cn\/flutter\u0026#34; 安装遇坑 \/\/配置build.gradle(project:","inLanguage":"id-ID","isFamilyFriendly":"true","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/www.jiangdaoli.cf\/p\/flutter\/"},"author":{"@type":"Person","name":"rmdhnreza","url":"https://github.com/rmdhnreza"},"creator":{"@type":"Person","name":"rmdhnreza"},"accountablePerson":{"@type":"Person","name":"rmdhnreza"},"copyrightHolder":"xiaoxian","copyrightYear":"2022","datePublished":"2022-04-30T00:00:00+00:00","dateModified":"2021-04-30T00:00:00+00:00","publisher":{"@type":"Organization","name":"xiaoxian","url":"https://www.jiangdaoli.cf","logo":{"@type":"ImageObject","url":"https:\/\/www.jiangdaoli.cf/favicon-96x96.png","width":"112","height":"112"}},"image":"https://www.jiangdaoli.cf","url":"https:\/\/www.jiangdaoli.cf\/p\/flutter\/","wordCount":"6519","tag":[],"keywords":[],"articleSection":["computer"]}</script></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=切换菜单>
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_hu45d9d6b92b0e2c7b760024d72fbde663_30609_300x0_resize_box_3.png width=300 height=263 class=site-logo loading=lazy alt=Avatar></a></figure><div class=site-meta><h1 class=site-name><a href=/>xiaoxian</a></h1><h2 class=site-description>个人杂记</h2></div></header><ul class=menu id=main-menu><li><a href=/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home-2" width="44" height="44" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round" style="stroke-width:2.5px"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><rect x="10" y="12" width="4" height="4"/></svg>首页</a></li><li><a href=/search/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="44" height="44" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round" style="stroke-width:2.5px"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>搜索</a></li><li><a href=/archives/><svg role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" style="fill:currentColor"><title>GitBook icon</title><path d="M10.802 17.77a.703.703.0 11-.002 1.406.703.703.0 01.002-1.406m11.024-4.347a.703.703.0 11.001-1.406.703.703.0 01-.001 1.406m0-2.876a2.176 2.176.0 00-2.174 2.174c0 .233.039.465.115.691l-7.181 3.823a2.165 2.165.0 00-1.784-.937c-.829.0-1.584.475-1.95 1.216l-6.451-3.402c-.682-.358-1.192-1.48-1.138-2.502.028-.533.212-.947.493-1.107.178-.1.392-.092.62.027l.042.023c1.71.9 7.304 3.847 7.54 3.956.363.169.565.237 1.185-.057l11.564-6.014c.17-.064.368-.227.368-.474.0-.342-.354-.477-.355-.477-.658-.315-1.669-.788-2.655-1.25-2.108-.987-4.497-2.105-5.546-2.655-.906-.474-1.635-.074-1.765.006l-.252.125C7.78 6.048 1.46 9.178 1.1 9.397.457 9.789.058 10.57.006 11.539c-.08 1.537.703 3.14 1.824 3.727l6.822 3.518a2.175 2.175.0 002.15 1.862 2.177 2.177.0 002.173-2.14l7.514-4.073c.38.298.853.461 1.337.461A2.176 2.176.0 0024 12.72a2.176 2.176.0 00-2.174-2.174"/></svg>档案</a></li><li><a href=/%E5%85%B3%E4%BA%8E/><svg xmlns="http://www.w3.org/2000/svg" fill="currentcolor" width="24" height="24" xmlns:v="https://vecta.io/nano"><path d="M12 5.9a2.1 2.1.0 110 4.2 2.1 2.1.0 110-4.2m0 9c2.97.0 6.1 1.46 6.1 2.1v1.1H5.9V17c0-.64 3.13-2.1 6.1-2.1M12 4a4 4 0 100 8 4 4 0 100-8zm0 9c-2.67.0-8 1.34-8 4v3h16v-3c0-2.66-5.33-4-8-4z"/></svg>关于</a></li><li id=dark-mode-toggle><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><span>暗色模式</span></li><li class=menu-bottom-section></li></ul></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">目录</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#安装>安装</a></li><li><a href=#更新>更新</a></li><li><a href=#创建-flutter-项目>创建 Flutter 项目</a></li><li><a href=#dart>dart</a><ol><li><a href=#变量>变量</a></li><li><a href=#常量>常量</a></li><li><a href=#类型>类型</a><ol><li><a href=#不常用类型>不常用类型</a></li><li><a href=#几乎不用的类型>几乎不用的类型</a></li><li><a href=#类型转换>类型转换</a></li></ol></li><li><a href=#函数>函数</a><ol><li><a href=#参数>参数</a></li></ol></li><li><a href=#运算符>运算符</a></li><li><a href=#类>类</a><ol><li><a href=#方法>方法</a><ol><li><a href=#实例方法>实例方法</a></li><li><a href=#抽象类抽象方法>抽象类、抽象方法</a></li></ol></li><li><a href=#构造函数>构造函数</a></li><li><a href=#扩展>扩展</a><ol><li><a href=#扩展类>扩展类</a></li><li><a href=#super>super</a></li><li><a href=#扩展方法>扩展方法</a></li></ol></li></ol></li><li><a href=#泛型>泛型</a></li><li><a href=#异步>异步</a></li></ol></li><li><a href=#flutter>flutter</a><ol><li><a href=#生命周期>生命周期</a></li><li><a href=#getx>Getx</a><ol><li><a href=#状态管理>状态管理</a><ol><li><a href=#介绍>介绍</a></li><li><a href=#反应状态管理>反应状态管理</a></li><li><a href=#简单状态管理>简单状态管理</a></li><li><a href=#workers>Workers</a></li></ol></li><li><a href=#路由管理>路由管理</a><ol><li><a href=#普通路由>普通路由</a></li><li><a href=#别名路由>别名路由</a></li></ol></li><li><a href=#依赖注入>依赖注入</a></li><li><a href=#其他高级-api>其他高级 API</a></li></ol></li><li><a href=#dio>dio</a><ol><li><a href=#原理>原理</a></li></ol></li><li><a href=#其他>其他</a></li></ol></li></ol></nav></div></section></aside><main class="main full-width"><article class=main-article><header class=article-header><div class=article-details><header class=article-category><a href=/categories/computer/>计算机</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/p/flutter/>flutter基础备忘录</a></h2></div><footer class=article-time><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg><time class=article-time--published>2022-04-30</time></div></footer></div></header><section class=article-content><h1 id=安装>安装</h1><ol><li><p>配置 JDK、安装配置Android Studio</p></li><li><p>flutter(windows)
<a class=link href=https://docs.flutter.dev/get-started/install/windows target=_blank rel=noopener>flutter安装</a></p></li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>set PUB_HOSTED_URL=&#34;https://mirrors.tuna.tsinghua.edu.cn/dart-pub&#34;   #配置国内镜像
</span></span><span class=line><span class=cl>set FLUTTER_STORAGE_BASE_URL=&#34;https://mirrors.tuna.tsinghua.edu.cn/flutter&#34;
</span></span></code></pre></div><ul><li>安装遇坑</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>//配置build.gradle(project:android)
</span></span><span class=line><span class=cl>allprojects {
</span></span><span class=line><span class=cl>    repositories {
</span></span><span class=line><span class=cl>        google()
</span></span><span class=line><span class=cl>        jcenter()
</span></span><span class=line><span class=cl>        maven { url &#34;https://storage.googleapis.com/download.flutter.io&#34; }
</span></span><span class=line><span class=cl>    }
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><h1 id=更新>更新</h1><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>flutter upgrade
</span></span><span class=line><span class=cl>flutter doctor
</span></span></code></pre></div><h1 id=创建-flutter-项目>创建 Flutter 项目</h1><p><img src=/p/flutter/1.jpg width=1317 height=897 srcset="/p/flutter/1_huff754efb2c95fdbde3860fe3076e21cb_150899_480x0_resize_q75_box.jpg 480w, /p/flutter/1_huff754efb2c95fdbde3860fe3076e21cb_150899_1024x0_resize_q75_box.jpg 1024w" loading=lazy class=gallery-image data-flex-grow=146 data-flex-basis=352px></p><p><img src=/p/flutter/2.jpg width=1279 height=903 srcset="/p/flutter/2_hucf4eac703c21ad8fecf4d8297c8a4909_91996_480x0_resize_q75_box.jpg 480w, /p/flutter/2_hucf4eac703c21ad8fecf4d8297c8a4909_91996_1024x0_resize_q75_box.jpg 1024w" loading=lazy class=gallery-image data-flex-grow=141 data-flex-basis=339px></p><p><img src=/p/flutter/3.jpg width=1234 height=897 srcset="/p/flutter/3_huf5771a4378f496e08370a30e6aea2a57_268237_480x0_resize_q75_box.jpg 480w, /p/flutter/3_huf5771a4378f496e08370a30e6aea2a57_268237_1024x0_resize_q75_box.jpg 1024w" loading=lazy class=gallery-image data-flex-grow=137 data-flex-basis=330px></p><p><img src=/p/flutter/4.jpg width=1738 height=975 srcset="/p/flutter/4_hu749a3588d7f75328d4ce8cfeb04f0fea_609718_480x0_resize_q75_box.jpg 480w, /p/flutter/4_hu749a3588d7f75328d4ce8cfeb04f0fea_609718_1024x0_resize_q75_box.jpg 1024w" loading=lazy class=gallery-image data-flex-grow=178 data-flex-basis=427px></p><h1 id=dart>dart</h1><h2 id=变量>变量</h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl># 创建一个变量并将其初始化
</span></span><span class=line><span class=cl>var name = &#39;Bob&#39;;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl># 指定类型
</span></span><span class=line><span class=cl>String name = &#39;Bob&#39;;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl># 如果对象(name)不局限于单一的类型(String),可以将其指定为 Object（或 dynamic）类型
</span></span><span class=line><span class=cl>Object name = &#39;Bob&#39;;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>? 可空类型
</span></span><span class=line><span class=cl>int? a=123;   // int? 表示a是一个可空类型
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>! 类型断言
</span></span><span class=line><span class=cl>a!    // a不为空
</span></span></code></pre></div><h2 id=常量>常量</h2><ul><li>final 和 const</li></ul><p>final在被使用到的时候才会进行初始化, 如果只是被定义, 而没有被使用到, 那么这个变量一直没有被初始化 (&lsquo;懒加载&rsquo;); 而const修饰的变量, 一经定义就会在编译期间对其进行初始化</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>final name = &#39;Bob&#39;; // Without a type annotation
</span></span><span class=line><span class=cl>final String nickname = &#39;Bobby&#39;;
</span></span></code></pre></div><h2 id=类型>类型</h2><ul><li>内置类型</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>int    整数值
</span></span><span class=line><span class=cl>double 浮点数字
</span></span><span class=line><span class=cl>String 字符串
</span></span><span class=line><span class=cl>bool   布尔类型
</span></span><span class=line><span class=cl>List   集合类型
</span></span><span class=line><span class=cl>Set    无序集合
</span></span><span class=line><span class=cl>Map    字典型
</span></span></code></pre></div><h3 id=不常用类型>不常用类型</h3><ul><li><p><a class=link href=https://dart.dev/guides/language/language-tour#enumerated-types target=_blank rel=noopener>enum</a>　　枚举类型,用于表示固定数量的常量值。在switch语句中运行良好。</p></li><li><p>Object　对象类型，允许任何类型。</p></li><li><p><a class=link href=https://dart.dev/guides/language/effective-dart/design#avoid-using-dynamic-unless-you-want-to-disable-static-checking target=_blank rel=noopener>dynamic</a>　动态类型，不仅接受所有对象，而且还允许所有操作</p></li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>void main() {
</span></span><span class=line><span class=cl>  dynamic foo=&#34;bar&#34;;
</span></span><span class=line><span class=cl>  print(foo); 
</span></span><span class=line><span class=cl>  foo=123;
</span></span><span class=line><span class=cl>  print(foo);
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><ul><li>Set　无序集合，主要的功能就是去除数组重复内容</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>void main(){
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  List myList=[&#39;香蕉&#39;,&#39;苹果&#39;,&#39;西瓜&#39;,&#39;香蕉&#39;,&#39;苹果&#39;,&#39;香蕉&#39;,&#39;苹果&#39;];
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  var s=new Set();
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  s.addAll(myList);
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  print(s);
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  print(s.toList());
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><h3 id=几乎不用的类型>几乎不用的类型</h3><ul><li><p>runes 暴露了字符串的 Unicode 代码点（Unicode 为每个字母、数字和符号定义了一个唯一的数值）。例如，用于表情符号，(😆) 是<code>\u{1f606}</code>。</p></li><li><p>Symbol 表示标识符，例如<code>#</code>。</p></li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>void main() {
</span></span><span class=line><span class=cl>  assert(Symbol(&#39;bar&#39;)==#bar);
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>// true
</span></span></code></pre></div><h3 id=类型转换>类型转换</h3><ul><li>String -> int</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>myint = int.parse(myString);
</span></span></code></pre></div><ul><li>String -> double</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>mydouble = double.parse(myString);
</span></span></code></pre></div><ul><li>int -> String</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>myString = myint.toString();
</span></span></code></pre></div><ul><li>double -> String</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>myString = 3.14159.toStringAsFixed(2);
</span></span><span class=line><span class=cl>// myString = &#39;3.14&#39;
</span></span></code></pre></div><ul><li>将 list <a class=link href=https://dart.dev/codelabs/iterables#mapping target=_blank rel=noopener>映射</a>为 widget List</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>MyList.map((item) =&gt; SomeWidget(item)).toList();
</span></span></code></pre></div><h2 id=函数>函数</h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>bool isNoble(int atomicNumber) {                 // bool:返回类型
</span></span><span class=line><span class=cl>  return _nobleGases[atomicNumber] != null;
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><ul><li><p>箭头函数 =></p><p><code>=> expr</code> 是 <code>{ return expr; }</code>的简写</p></li></ul><h3 id=参数>参数</h3><ul><li>命名参数（可传可不传）</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>  String printUserInfo(String username, {int age = 0, String sex = &#39;男&#39;}) {//行参，用大括号    
</span></span><span class=line><span class=cl>    if (age != 0) {
</span></span><span class=line><span class=cl>      return &#34;姓名:$username---性别:$sex--年龄:$age&#34;;
</span></span><span class=line><span class=cl>    }
</span></span><span class=line><span class=cl>    return &#34;姓名:$username---性别:$sex--年龄保密&#34;;
</span></span><span class=line><span class=cl>  }
</span></span><span class=line><span class=cl>  print(printUserInfo(&#39;张三&#39;));                         //实参 
</span></span><span class=line><span class=cl>  print(printUserInfo(&#39;张三&#39;, age: 20, sex: &#39;未知&#39;));   //实参,命名参数的实参必须传入参数名age: sex: 
</span></span></code></pre></div><ul><li>位置参数（可传可不传）</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>  String printUserInfo(String username,[String sex=&#39;男&#39;,int age=0]){  //行参，用中括号
</span></span><span class=line><span class=cl>    if(age!=0){
</span></span><span class=line><span class=cl>      return &#34;姓名:$username---性别:$sex--年龄:$age&#34;;
</span></span><span class=line><span class=cl>    }
</span></span><span class=line><span class=cl>    return &#34;姓名:$username---性别:$sex--年龄保密&#34;;
</span></span><span class=line><span class=cl>  }
</span></span><span class=line><span class=cl>  print(printUserInfo(&#39;张三&#39;));           //实参
</span></span><span class=line><span class=cl>  print(printUserInfo(&#39;小李&#39;,&#39;女&#39;,30));   //实参
</span></span></code></pre></div><h2 id=运算符>运算符</h2><ul><li><p>算术运算符</p><p><code>+</code>(加)　　<code>–</code>(减)　　<code>-</code>(负)　　<code>*</code>(乘)　　<code>/</code>(除)　　<code>~/</code>(取整)　　<code>%</code>（取余）</p></li><li><p>关系运算符</p><p><code>==</code>　　<code>！=</code>　　<code>></code>　　<code>&lt;</code>　　<code>>=</code>　　<code>&lt;=</code></p></li><li><p>逻辑运算符</p><p><code>!</code>(取反)　　<code>&&</code>(与)　　<code>||</code>(或)</p></li><li><p>赋值运算符</p><p>基础赋值运算符　　<code>=</code>　　<code>??=</code>(为 null 的变量赋值)</p><p>复合赋值运算符　　<code>+=</code>　　<code>-=</code>　　<code>*=</code>　　<code>/=</code>　　<code>%=</code>　　<code>~/=</code></p></li><li><p>其他运算符
<code>()</code>　　使用一个方法</p><p><code>[]</code>　　访问 List</p><p><code>?[]</code>　　访问 List,左侧可以为null</p><p><code>.</code>　　访问成员</p><p><code>?.</code>　　访问成员,左侧可以为null</p></li><li><p>if-else的表达式：</p><ul><li>condition <code>?</code> expr1 <code>:</code> expr2</li></ul><p>如果条件为真，则计算expr1（并返回其值）；否则，计算并返回expr2的值。</p><ul><li>expr1 <code>??</code> expr2</li></ul><p>如果expr1不为 null，则返回其值；否则，计算并返回expr2的值。</p></li></ul><h2 id=类>类</h2><h3 id=方法>方法</h3><h4 id=实例方法>实例方法</h4><p>实例方法可以访问实例变量和 this</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>import &#39;dart:math&#39;;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>class Point {
</span></span><span class=line><span class=cl>  final double x;
</span></span><span class=line><span class=cl>  final double y;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  Point(this.x, this.y);
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  double distanceTo(Point other) {
</span></span><span class=line><span class=cl>    var dx = x - other.x;
</span></span><span class=line><span class=cl>    var dy = y - other.y;
</span></span><span class=line><span class=cl>    return sqrt(dx * dx + dy * dy);
</span></span><span class=line><span class=cl>  }
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><h5 id=get-和-set>get 和 set</h5><p>特殊方法:实例对象的每一个属性都有一个隐式的 Getter 方法，非 final 属性还会有一个 Setter 方法</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>class Rectangle {
</span></span><span class=line><span class=cl>  double left, top, width, height;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  Rectangle(this.left, this.top, this.width, this.height);
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  // Define two calculated properties: right and bottom.
</span></span><span class=line><span class=cl>  double get right =&gt; left + width;
</span></span><span class=line><span class=cl>  set right(double value) =&gt; left = value - width;
</span></span><span class=line><span class=cl>  double get bottom =&gt; top + height;
</span></span><span class=line><span class=cl>  set bottom(double value) =&gt; top = value - height;
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><h4 id=抽象类抽象方法>抽象类、抽象方法</h4><p>抽象类常用于定义接口，抽象类常常会包含抽象方法</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>abstract class Doer {
</span></span><span class=line><span class=cl>  // Define instance variables and methods...
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  void doSomething(); // Define an abstract method.
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>class EffectiveDoer extends Doer {
</span></span><span class=line><span class=cl>  void doSomething() {
</span></span><span class=line><span class=cl>    // Provide an implementation, so the method is not abstract here...
</span></span><span class=line><span class=cl>  }
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><h3 id=构造函数>构造函数</h3><link href="https://fonts.googleapis.com/css?family=monoton" rel=stylesheet type=text/css><div style=font-family:monoton;font-size:20px;font-style:normal;font-weight:700;color:blue>特点：</div><ol><li><p>实例化类时会被自动触发</p></li><li><p>一般用于初始化操作</p></li><li><p>没有返回值</p></li></ol><link href="https://fonts.googleapis.com/css?family=monoton" rel=stylesheet type=text/css><div style=font-family:monoton;font-size:20px;font-style:normal;font-weight:700;color:blue>普通构造函数</div><p>构造函数方法名和类名相同</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>class Point {
</span></span><span class=line><span class=cl>  num x, y;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  Point(num x, num y) {
</span></span><span class=line><span class=cl>    // There&#39;s a better way to do this, stay tuned.
</span></span><span class=line><span class=cl>    this.x = x;
</span></span><span class=line><span class=cl>    this.y = y;
</span></span><span class=line><span class=cl>  }
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><p>简化形式：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>class Point {
</span></span><span class=line><span class=cl>  num x, y;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  // Syntactic sugar for setting x and y
</span></span><span class=line><span class=cl>  // before the constructor body runs.
</span></span><span class=line><span class=cl>  Point(this.x, this.y);
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><link href="https://fonts.googleapis.com/css?family=monoton" rel=stylesheet type=text/css><div style=font-family:monoton;font-size:20px;font-style:normal;font-weight:700;color:blue>命名构造函数</div><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>class Point {
</span></span><span class=line><span class=cl>  num x, y;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  Point(this.x, this.y);
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  // 命名构造函数，新增代码
</span></span><span class=line><span class=cl>  Point.origin() {
</span></span><span class=line><span class=cl>    x = 0;
</span></span><span class=line><span class=cl>    y = 0;
</span></span><span class=line><span class=cl>  }
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><p>请记住，命名构造函数不可继承，如果子类想要有 和父类一样的命名构造函数，那就写个同名的（通常也会在子类的命名构造函数里，调用父类的同名命名构造函数）</p><link href="https://fonts.googleapis.com/css?family=monoton" rel=stylesheet type=text/css><div style=font-family:monoton;font-size:20px;font-style:normal;font-weight:700;color:blue>调用父类构造函数</div><p>如果你的类，继承于父类，那么子类的构造函数，势必要调用父类的构造函数，这时候就要分两种情况：</p><ul><li>Dart语言帮你调用父类的无参数构造函数</li><li>代码中显式调用父类的构造函数</li></ul><ol><li>默认调用调用父类的无参数构造函数</li></ol><p>如果你没有显式调用父类的构造函数，并且父类有一个无参数构造函数，那么Dart就会帮你在子类的构造函数方法体的最前面，调用父类的无参数构造函数。当然，后面我们会说道，构造函数分成好几部分来初始化成员变量，调用的顺序如下：</p><ul><li>初始化列表</li><li>父类的无参数构造函数</li><li>子类的无参数构造函数</li></ul><p>当然，如果父类没有无参数构造函数，或者Dart这种隐式调用无法满足你的要求，那就需要显式调用父类的构造函数了</p><ol start=2><li>显式调用父类构造函数</li></ol><p>显式调用父类构造函数，应该在初始化列表中完成</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>class Person {
</span></span><span class=line><span class=cl>  String firstName;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  Person.fromJson(Map data) {
</span></span><span class=line><span class=cl>    print(&#39;in Person&#39;);
</span></span><span class=line><span class=cl>  }
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>class Employee extends Person {
</span></span><span class=line><span class=cl>  // Person does not have a default constructor;
</span></span><span class=line><span class=cl>  // you must call super.fromJson(data).
</span></span><span class=line><span class=cl>  Employee.fromJson(Map data) : super.fromJson(data) {
</span></span><span class=line><span class=cl>    print(&#39;in Employee&#39;);
</span></span><span class=line><span class=cl>  }
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>main() {
</span></span><span class=line><span class=cl>  var emp = new Employee.fromJson({});
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  // Prints:
</span></span><span class=line><span class=cl>  // in Person
</span></span><span class=line><span class=cl>  // in Employee
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><p>初始化列表就是构造函数名的冒号后面，打括号前面的部分。</p><link href="https://fonts.googleapis.com/css?family=monoton" rel=stylesheet type=text/css><div style=font-family:monoton;font-size:20px;font-style:normal;font-weight:700;color:blue>初始化列表</div><p>初始化列表的执行顺序，在整个构造函数的最前面，它除了可以调用父类的构造函数，还可以在构造函数方法体之前，初始化一些成员变量。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>// Initializer list sets instance variables before
</span></span><span class=line><span class=cl>// the constructor body runs.
</span></span><span class=line><span class=cl>Point.fromJson(Map<span class=p>&lt;</span><span class=nt>String</span><span class=err>,</span> <span class=na>num</span><span class=p>&gt;</span> json)
</span></span><span class=line><span class=cl>    : x = json[&#39;x&#39;],
</span></span><span class=line><span class=cl>      y = json[&#39;y&#39;] {
</span></span><span class=line><span class=cl>  print(&#39;In Point.fromJson(): ($x, $y)&#39;);
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><p>尤其是初始化那些final修饰的成员变量时，初始化列表很有用，因为在方法体中，不能给final修饰的成员变量赋值，因为<strong>在执行方法体的时候，final修饰的成员变量已经不能变了</strong>。这个地方很多人犯错。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>import &#39;dart:math&#39;;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>class Point {
</span></span><span class=line><span class=cl>  final num x;
</span></span><span class=line><span class=cl>  final num y;
</span></span><span class=line><span class=cl>  final num distanceFromOrigin;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  Point(x, y)
</span></span><span class=line><span class=cl>      : x = x,
</span></span><span class=line><span class=cl>        y = y,
</span></span><span class=line><span class=cl>        distanceFromOrigin = sqrt(x * x + y * y);
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>main() {
</span></span><span class=line><span class=cl>  var p = new Point(2, 3);
</span></span><span class=line><span class=cl>  print(p.distanceFromOrigin);
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><link href="https://fonts.googleapis.com/css?family=monoton" rel=stylesheet type=text/css><div style=font-family:monoton;font-size:20px;font-style:normal;font-weight:700;color:blue>重定向构造函数</div><p>定义构造函数的时候，除了一个普通构造函数，还可以有若干命名构造函数，这些构造函数之间，有时候会有一些相同的逻辑，如果分别书写在各个构造函数中，会有些多余，所以构造函数可以传递。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>class Point {
</span></span><span class=line><span class=cl>  num x, y;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  // The main constructor for this class.
</span></span><span class=line><span class=cl>  Point(this.x, this.y);
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  // Delegates to the main constructor.
</span></span><span class=line><span class=cl>  Point.alongXAxis(num x) : this(x, 0);
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><p>传递构造函数，没有方法体，会在初始化列表中，调用另一个构造函数。</p><link href="https://fonts.googleapis.com/css?family=monoton" rel=stylesheet type=text/css><div style=font-family:monoton;font-size:20px;font-style:normal;font-weight:700;color:blue>常量构造函数</div><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>class ImmutablePoint {
</span></span><span class=line><span class=cl>  static final ImmutablePoint origin =
</span></span><span class=line><span class=cl>      const ImmutablePoint(0, 0);
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  final num x, y;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  const ImmutablePoint(this.x, this.y);
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><p>如果你的类，创建的对象永远不会改变，你可以在编译期就创建这个常量实例，并且定义一个常量构造函数，并且确保所有的成员变量都是final的。</p><link href="https://fonts.googleapis.com/css?family=monoton" rel=stylesheet type=text/css><div style=font-family:monoton;font-size:20px;font-style:normal;font-weight:700;color:blue>工厂构造函数</div><p>有时候可能有一种需求，并不需要每次都创建新的类实例，而是每一种情况，只需要一个实例：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>class Logger {
</span></span><span class=line><span class=cl>  final String name;
</span></span><span class=line><span class=cl>  bool mute = false;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  // _cache is library-private, thanks to
</span></span><span class=line><span class=cl>  // the _ in front of its name.
</span></span><span class=line><span class=cl>  static final Map<span class=p>&lt;</span><span class=nt>String</span><span class=err>,</span> <span class=na>Logger</span><span class=p>&gt;</span> _cache =
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>String</span><span class=err>,</span> <span class=na>Logger</span><span class=p>&gt;</span>{};
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  factory Logger(String name) {
</span></span><span class=line><span class=cl>    if (_cache.containsKey(name)) {
</span></span><span class=line><span class=cl>      return _cache[name];
</span></span><span class=line><span class=cl>    } else {
</span></span><span class=line><span class=cl>      final logger = Logger._internal(name);   # 调用构造函数
</span></span><span class=line><span class=cl>      _cache[name] = logger;
</span></span><span class=line><span class=cl>      return logger;
</span></span><span class=line><span class=cl>    }
</span></span><span class=line><span class=cl>  }
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  Logger._internal(this.name);    # 定义构造函数
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  void log(String msg) {
</span></span><span class=line><span class=cl>    if (!mute) print(msg);
</span></span><span class=line><span class=cl>  }
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>main() {
</span></span><span class=line><span class=cl>    var logger = Logger(&#39;UI&#39;);
</span></span><span class=line><span class=cl>    logger.log(&#39;Button clicked&#39;);
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><blockquote><p>工厂构造函数，没有权利访问this</p></blockquote><p>上例的意思是，类中又一个静态缓存<code>_cache</code>保存着一些Logger类实例，创建实例时，给工厂构造函数传递的name，如果在缓存中已经存在，就用缓存中现成的实例，如果没有，就新建一个实例，并且也放到缓存中。</p><p>如此这般，我们可以创建名字为UI / SYS / API 等的实例，然后在debug的时候，如果设置名字为UI的Logger实例的mute为true，就不会打印UI相关的log，而不影响其它两个名字的log。</p><h3 id=扩展>扩展</h3><h4 id=扩展类>扩展类</h4><link href="https://fonts.googleapis.com/css?family=monoton" rel=stylesheet type=text/css><div style=font-family:monoton;font-size:30px;font-style:normal;font-weight:700;color:blue>extends</div><p>Extends是典型的OOP类继承。如果 a类 扩展了 b类，则 a类 可以使用或覆盖 b类 中实现的所有属性、变量、函数 。在 Dart 中，一个类只能扩展一个类。
<img src=/p/flutter/5.jpg width=1233 height=641 srcset="/p/flutter/5_hu572765b138c1f7437a19c6cea77cac10_136967_480x0_resize_q75_box.jpg 480w, /p/flutter/5_hu572765b138c1f7437a19c6cea77cac10_136967_1024x0_resize_q75_box.jpg 1024w" loading=lazy class=gallery-image data-flex-grow=192 data-flex-basis=461px></p><link href="https://fonts.googleapis.com/css?family=monoton" rel=stylesheet type=text/css><div style=font-family:monoton;font-size:30px;font-style:normal;font-weight:700;color:blue>implements</div><p>创建另一个类或接口的实现。当 a类 实现 b类 时，<strong>必须实现</strong> b类 中定义的所有功能(所有属性、变量、函数)。一个类可以实现多个接口。</p><link href="https://fonts.googleapis.com/css?family=monoton" rel=stylesheet type=text/css><div style=font-family:monoton;font-size:30px;font-style:normal;font-weight:700;color:blue>with</div><p>mixin使用with关键字，类似于继承，可以扩展多个类。mixins的类只能继承自Object，不能再继承其他类，且不能有构造函数。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl># extends只能扩展一个类，而mixin没有限制，可以一起使用
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>class Maestro extends Person with Musical, Aggressive, Demented {
</span></span><span class=line><span class=cl>  Maestro(String maestroName) {
</span></span><span class=line><span class=cl>    name = maestroName;
</span></span><span class=line><span class=cl>    canConduct = true;
</span></span><span class=line><span class=cl>  }
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><h4 id=super>super</h4><p><code>super</code>关键字用于调用父类的对象、方法、构造函数和子类中的属性。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>// 访问父类变量
</span></span><span class=line><span class=cl>super.variable_name; 
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>// 访问父类方法
</span></span><span class=line><span class=cl>super.method_name();
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>// 转发给超类的构造函数
</span></span><span class=line><span class=cl>const MyApp({Key? key}) : super(key: key);
</span></span></code></pre></div><h4 id=扩展方法>扩展方法</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>extension FancyNum on num {
</span></span><span class=line><span class=cl>  num plus(num other) =&gt; this + other;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  num times(num other) =&gt; this * other;
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>print(5.plus(3)); // Equal to &#34;5 + 3&#34;.
</span></span><span class=line><span class=cl>print(5.times(8)); // Equal to &#34;5 * 8&#34;.
</span></span><span class=line><span class=cl>print(2.plus(1).times(3)); // Equal to &#34;(2 + 1) * 3&#34;.
</span></span></code></pre></div><h2 id=泛型>泛型</h2><p>泛型常用于需要要求类型安全的情况，可以减少代码重复。
<img src=/p/flutter/fanxing.jpg width=1122 height=449 srcset="/p/flutter/fanxing_hu6d02cad28d2736a6e42659b75fd941e7_62001_480x0_resize_q75_box.jpg 480w, /p/flutter/fanxing_hu6d02cad28d2736a6e42659b75fd941e7_62001_1024x0_resize_q75_box.jpg 1024w" loading=lazy class=gallery-image data-flex-grow=249 data-flex-basis=599px></p><p>@override 注解来表示你重写了一个成员
<img src=/p/flutter/override.jpg width=1173 height=659 srcset="/p/flutter/override_huf3ae0c28a53250be072483b49c760168_125842_480x0_resize_q75_box.jpg 480w, /p/flutter/override_huf3ae0c28a53250be072483b49c760168_125842_1024x0_resize_q75_box.jpg 1024w" loading=lazy class=gallery-image data-flex-grow=177 data-flex-basis=427px></p><h2 id=异步>异步</h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>// 示例：等待返回自己ip
</span></span><span class=line><span class=cl>import &#39;package:http/http.dart&#39;as http;
</span></span><span class=line><span class=cl>import &#39;dart:convert&#39;;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Future getIPAddress() async {
</span></span><span class=line><span class=cl>  final url =&#39;https://httpbin.org/ip&#39;;
</span></span><span class=line><span class=cl>  var response = await http.get(Uri.parse(url));
</span></span><span class=line><span class=cl>  String ip = json.decode(response.body)[&#39;origin&#39;];
</span></span><span class=line><span class=cl>  return ip;
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>void main() async {
</span></span><span class=line><span class=cl>  final ip = await getIPAddress();
</span></span><span class=line><span class=cl>  print(ip);
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><h1 id=flutter>flutter</h1><h2 id=生命周期>生命周期</h2><p><strong>StatelessWidget生命周期源码图</strong>
<img src=/p/flutter/6.jpg width=1787 height=966 srcset="/p/flutter/6_hu9df739c1aeb15e1ce9f35dea789d6e83_349244_480x0_resize_q75_box.jpg 480w, /p/flutter/6_hu9df739c1aeb15e1ce9f35dea789d6e83_349244_1024x0_resize_q75_box.jpg 1024w" loading=lazy class=gallery-image data-flex-grow=184 data-flex-basis=443px></p><p>Flutter 中万物皆为Widget，<code>widget</code>类继承自<code>DiagnosticableTree</code>。</p><p><code>DiagnosticableTree</code>即“诊断树”，主要作用是提供调试信息。</p><p><code>Widget.createElement()</code> :创建一个Element实例，记为<code>element</code>。</p><p><code>Key</code>: [Key]是[Widget]、[Element]和[SemanticsNode]的标识符。Key可以保持组件之前的状态，比如在用户滑动时或者修改集合时，决定的条件在<code>canUpdate()</code>方法中。</p><p><code>canUpdate(...)</code>: <code>newWidget</code>与<code>oldWidget</code>的<code>runtimeType</code>和<code>key</code>同时相等时就会用<code>new widget</code>去更新<code>Element</code>对象的配置，否则就会创建新的<code>Element</code>。</p><p><code>createState()</code>:为每一个<code>StatefulElement</code>创建一个State实例。</p><p><code>element.mount()</code> :调用<code>createRenderObject</code>创建RenderObject，并使用<code>attachRenderObject</code>将RenderObject关联到Element上。</p><p>StatefulWidgets更为复杂，使用Getx接管更好用，不再详解。</p><h2 id=getx>Getx</h2><h3 id=状态管理>状态管理</h3><h4 id=介绍>介绍</h4><div class=table-wrapper><table><tr><td>分类</td><td>状态管理器</td><td>消耗RAM</td><td>结论</td></tr><tr><td>简单的状态管理</td><td>GetBuilder</td><td>最少</td><td>性能最好，最常用</td></tr><tr><td rowspan=2>反应式状态管理</td><td>Obx</td><td>较少</td><td>反应式的基础层，较Getx简洁</td></tr><tr><td>GetX</td><td>较多</td><td>可以灵活使用的反应式，较Obx实用</td></tr><tr><td>混合态管理</td><td>MixinBuilder</td><td>最多</td><td>在GetBuilder中插入一个Obx，既可以响应式更新、也可以手动更新</td></tr></table></div><link href="https://fonts.googleapis.com/css?family=monoton" rel=stylesheet type=text/css><div style=font-family:monoton;font-size:20px;font-style:normal;font-weight:700;color:#000>代码结构：</div><p>都可以分为GetXController（控制器层）和view（界面层），GetXController 可以进一步分为state（状态层/变量层），logic（逻辑层）。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>└── sinup
</span></span><span class=line><span class=cl>    ├── controller.dart
</span></span><span class=line><span class=cl>    ├── view.dart
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>└── login
</span></span><span class=line><span class=cl>    ├── logic.dart
</span></span><span class=line><span class=cl>    ├── state.dart
</span></span><span class=line><span class=cl>    ├── view.dart    
</span></span></code></pre></div><link href="https://fonts.googleapis.com/css?family=monoton" rel=stylesheet type=text/css><div style=font-family:monoton;font-size:20px;font-style:normal;font-weight:700;color:#000>使用场景：</div><p><strong>Obx</strong></p><ul><li>当我的控制器<strong>已经</strong>在其他地方注册</li><li>最少的代码/噪音</li><li>反应式小部件，自动刷新，不用<code>update()</code></li><li>监听<strong>多个</strong>GetXController的状态改变</li></ul><p><strong>GetX</strong></p><ul><li>当我的控制器<strong>尚未</strong>注册</li><li>我想非常明确/明显地使用哪个控制器</li><li>我需要<code>initState</code>在创建过程中进行一些调用</li><li>反应式小部件，自动刷新，不用<code>update()</code></li><li>只更新某个小组件的状态，只重建特定组件，性能更好</li></ul><p><strong>GetBuilder</strong></p><ul><li>我想手动决定何时重建小部件</li><li>我有几个状态变量，可以作为一个组一起刷新</li><li>需要update()手动刷新</li><li>更新几乎整个页面或几乎所有的变量，性能更好</li></ul><h4 id=反应状态管理>反应状态管理</h4><h5 id=反应变量>反应变量</h5><p>使用反应状态管理需要声明反应变量，你有3种方法可以把一个变量变成是 &ldquo;可观察的&rdquo;。</p><p>1 - 第一种是使用 <strong><code>Rx{Type}</code></strong>。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>// 建议使用初始值，但不是强制性的
</span></span><span class=line><span class=cl>final name = RxString(&#39;&#39;);
</span></span><span class=line><span class=cl>final isLogged = RxBool(false);
</span></span><span class=line><span class=cl>final count = RxInt(0);
</span></span><span class=line><span class=cl>final balance = RxDouble(0.0);
</span></span><span class=line><span class=cl>final items = RxList&lt;String&gt;([]);
</span></span><span class=line><span class=cl>final myMap = RxMap&lt;String, int&gt;({});
</span></span></code></pre></div><p>2 - 第二种是使用 <strong><code>Rx</code></strong>，规定泛型 <code>Rx&lt;Type></code>。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>final name = Rx&lt;String&gt;(&#39;&#39;);
</span></span><span class=line><span class=cl>final isLogged = Rx&lt;Bool&gt;(false);
</span></span><span class=line><span class=cl>final count = Rx&lt;Int&gt;(0);
</span></span><span class=line><span class=cl>final balance = Rx&lt;Double&gt;(0.0);
</span></span><span class=line><span class=cl>final number = Rx&lt;Num&gt;(0)
</span></span><span class=line><span class=cl>final items = Rx&lt;List&lt;String&gt;&gt;([]);
</span></span><span class=line><span class=cl>final myMap = Rx&lt;Map&lt;String, int&gt;&gt;({});
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>// 自定义类 - 可以是任何类
</span></span><span class=line><span class=cl>final user = Rx&lt;User&gt;();
</span></span></code></pre></div><p>3 - 第三种更实用、更简单和<strong>首选的</strong>方法，只需添加 <strong><code>.obs</code></strong> 作为<code>value</code>的属性。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>final name = &#39;&#39;.obs;
</span></span><span class=line><span class=cl>final isLogged = false.obs;
</span></span><span class=line><span class=cl>final count = 0.obs;
</span></span><span class=line><span class=cl>final balance = 0.0.obs;
</span></span><span class=line><span class=cl>final number = 0.obs;
</span></span><span class=line><span class=cl>final items = &lt;String&gt;[].obs;
</span></span><span class=line><span class=cl>final myMap = &lt;String, int&gt;{}.obs;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>// 自定义类 - 可以是任何class, literally
</span></span><span class=line><span class=cl>final user = User().obs;
</span></span></code></pre></div><h5 id=使用value>使用value</h5><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>// controller
</span></span><span class=line><span class=cl>final count1 = 0.obs;
</span></span><span class=line><span class=cl>final count2 = 0.obs;
</span></span><span class=line><span class=cl>int get sum =&gt; count1.value + count2.value;   // 由于.obs把变量换成`Rx{Type}`类型，所以需要用.value取值
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>// 视图
</span></span><span class=line><span class=cl>GetX&lt;Controller&gt;(
</span></span><span class=line><span class=cl>  builder: (controller) {
</span></span><span class=line><span class=cl>    print(&#34;count 1 rebuild&#34;);
</span></span><span class=line><span class=cl>    return Text(&#39;${controller.count1.value}&#39;);
</span></span><span class=line><span class=cl>  },
</span></span><span class=line><span class=cl>),
</span></span><span class=line><span class=cl>GetX&lt;Controller&gt;(
</span></span><span class=line><span class=cl>  builder: (controller) {
</span></span><span class=line><span class=cl>    print(&#34;count 2 rebuild&#34;);
</span></span><span class=line><span class=cl>    return Text(&#39;${controller.count2.value}&#39;);
</span></span><span class=line><span class=cl>  },
</span></span><span class=line><span class=cl>),
</span></span><span class=line><span class=cl>GetX&lt;Controller&gt;(
</span></span><span class=line><span class=cl>  builder: (controller) {
</span></span><span class=line><span class=cl>    print(&#34;count 3 rebuild&#34;);
</span></span><span class=line><span class=cl>    return Text(&#39;${controller.sum}&#39;);
</span></span><span class=line><span class=cl>  },
</span></span><span class=line><span class=cl>),
</span></span></code></pre></div><h5 id=obx>Obx</h5><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>class StateObxView extends StatelessWidget {
</span></span><span class=line><span class=cl>  StateObxView({Key? key}) : super(key: key);
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  final count = 0.obs;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  @override
</span></span><span class=line><span class=cl>  Widget build(BuildContext context) {
</span></span><span class=line><span class=cl>    return Scaffold(
</span></span><span class=line><span class=cl>      appBar: AppBar(
</span></span><span class=line><span class=cl>        title: Text(&#34;Obx(...)&#34;),
</span></span><span class=line><span class=cl>      ),
</span></span><span class=line><span class=cl>      body: Center(
</span></span><span class=line><span class=cl>        child: Column(
</span></span><span class=line><span class=cl>          children: [
</span></span><span class=line><span class=cl>            Obx(() =&gt; Text(&#34;count1 -&gt; &#34; + count.toString())),
</span></span><span class=line><span class=cl>            Obx(() =&gt; Text(&#34;count2 -&gt; &#34; + count.toString())),
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            //
</span></span><span class=line><span class=cl>            Divider(),
</span></span><span class=line><span class=cl>            ElevatedButton(
</span></span><span class=line><span class=cl>              onPressed: () {
</span></span><span class=line><span class=cl>                count.value++;
</span></span><span class=line><span class=cl>              },
</span></span><span class=line><span class=cl>              child: Text(&#39;add&#39;),
</span></span><span class=line><span class=cl>            ),
</span></span><span class=line><span class=cl>          ],
</span></span><span class=line><span class=cl>        ),
</span></span><span class=line><span class=cl>      ),
</span></span><span class=line><span class=cl>    );
</span></span><span class=line><span class=cl>  }
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><h5 id=getx-1>GetX</h5><p>Controller</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>class CountController extends GetxController {
</span></span><span class=line><span class=cl>  final _count = 0.obs;
</span></span><span class=line><span class=cl>  set count(value) =&gt; this._count.value = value;
</span></span><span class=line><span class=cl>  get count =&gt; this._count.value;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  final _count2 = 0.obs;
</span></span><span class=line><span class=cl>  set count2(value) =&gt; this._count2.value = value;
</span></span><span class=line><span class=cl>  get count2 =&gt; this._count2.value;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  add() =&gt; _count.value++;
</span></span><span class=line><span class=cl>  add2() =&gt; _count2.value++;
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><p>View</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>class StateGetxView extends StatelessWidget {
</span></span><span class=line><span class=cl>  StateGetxView({Key? key}) : super(key: key);
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  final controller = CountController();
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  @override
</span></span><span class=line><span class=cl>  Widget build(BuildContext context) {
</span></span><span class=line><span class=cl>    return Scaffold(
</span></span><span class=line><span class=cl>      appBar: AppBar(
</span></span><span class=line><span class=cl>        title: Text(&#34;Getx&#34;),
</span></span><span class=line><span class=cl>      ),
</span></span><span class=line><span class=cl>      body: Center(
</span></span><span class=line><span class=cl>        child: Column(
</span></span><span class=line><span class=cl>          children: [
</span></span><span class=line><span class=cl>            GetX<span class=p>&lt;</span><span class=nt>CountController</span><span class=p>&gt;</span>(
</span></span><span class=line><span class=cl>              init: controller,
</span></span><span class=line><span class=cl>              initState: (_) {},
</span></span><span class=line><span class=cl>              builder: (_) {
</span></span><span class=line><span class=cl>                print(&#34;GetX - 1&#34;);
</span></span><span class=line><span class=cl>                return Text(&#39;value 1 -&gt; ${_.count}&#39;);
</span></span><span class=line><span class=cl>              },
</span></span><span class=line><span class=cl>            ),
</span></span><span class=line><span class=cl>            GetX<span class=p>&lt;</span><span class=nt>CountController</span><span class=p>&gt;</span>(
</span></span><span class=line><span class=cl>              init: controller,
</span></span><span class=line><span class=cl>              initState: (_) {},
</span></span><span class=line><span class=cl>              builder: (_) {
</span></span><span class=line><span class=cl>                print(&#34;GetX - 2&#34;);
</span></span><span class=line><span class=cl>                return Text(&#39;value 2 -&gt; ${_.count}&#39;);
</span></span><span class=line><span class=cl>              },
</span></span><span class=line><span class=cl>            ),
</span></span><span class=line><span class=cl>            Divider(),
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            //
</span></span><span class=line><span class=cl>            GetX<span class=p>&lt;</span><span class=nt>CountController</span><span class=p>&gt;</span>(
</span></span><span class=line><span class=cl>              init: controller,
</span></span><span class=line><span class=cl>              initState: (_) {},
</span></span><span class=line><span class=cl>              builder: (_) {
</span></span><span class=line><span class=cl>                print(&#34;GetX - 3&#34;);
</span></span><span class=line><span class=cl>                return Column(
</span></span><span class=line><span class=cl>                  children: [
</span></span><span class=line><span class=cl>                    Text(&#39;value 3 -&gt; ${_.count}&#39;),
</span></span><span class=line><span class=cl>                    ElevatedButton(
</span></span><span class=line><span class=cl>                      onPressed: () {
</span></span><span class=line><span class=cl>                        _.add();
</span></span><span class=line><span class=cl>                      },
</span></span><span class=line><span class=cl>                      child: Text(&#39;count1&#39;),
</span></span><span class=line><span class=cl>                    )
</span></span><span class=line><span class=cl>                  ],
</span></span><span class=line><span class=cl>                );
</span></span><span class=line><span class=cl>              },
</span></span><span class=line><span class=cl>            ),
</span></span><span class=line><span class=cl>            Divider(),
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            // count2
</span></span><span class=line><span class=cl>            GetX<span class=p>&lt;</span><span class=nt>CountController</span><span class=p>&gt;</span>(
</span></span><span class=line><span class=cl>              init: controller,
</span></span><span class=line><span class=cl>              initState: (_) {},
</span></span><span class=line><span class=cl>              builder: (_) {
</span></span><span class=line><span class=cl>                print(&#34;GetX - 4&#34;);
</span></span><span class=line><span class=cl>                return Text(&#39;value 4 -&gt; ${_.count2}&#39;);
</span></span><span class=line><span class=cl>              },
</span></span><span class=line><span class=cl>            ),
</span></span><span class=line><span class=cl>            Divider(),
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            // 按钮
</span></span><span class=line><span class=cl>            ElevatedButton(
</span></span><span class=line><span class=cl>              onPressed: () {
</span></span><span class=line><span class=cl>                controller.add();
</span></span><span class=line><span class=cl>              },
</span></span><span class=line><span class=cl>              child: Text(&#39;count1&#39;),
</span></span><span class=line><span class=cl>            ),
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            ElevatedButton(
</span></span><span class=line><span class=cl>              onPressed: () {
</span></span><span class=line><span class=cl>                controller.add2();
</span></span><span class=line><span class=cl>              },
</span></span><span class=line><span class=cl>              child: Text(&#39;count2&#39;),
</span></span><span class=line><span class=cl>            ),
</span></span><span class=line><span class=cl>          ],
</span></span><span class=line><span class=cl>        ),
</span></span><span class=line><span class=cl>      ),
</span></span><span class=line><span class=cl>    );
</span></span><span class=line><span class=cl>  }
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><h4 id=简单状态管理>简单状态管理</h4><h5 id=getbuilder>GetBuilder</h5><p>Controller同Getx</p><p>View</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>class StateGetBuilderView extends StatelessWidget {
</span></span><span class=line><span class=cl>  StateGetBuilderView({Key? key}) : super(key: key);
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  final controller = CountController();
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  @override
</span></span><span class=line><span class=cl>  Widget build(BuildContext context) {
</span></span><span class=line><span class=cl>    return Scaffold(
</span></span><span class=line><span class=cl>      appBar: AppBar(
</span></span><span class=line><span class=cl>        title: Text(&#34;GetBuilder&#34;),
</span></span><span class=line><span class=cl>      ),
</span></span><span class=line><span class=cl>      body: Center(
</span></span><span class=line><span class=cl>        child: Column(
</span></span><span class=line><span class=cl>          children: [
</span></span><span class=line><span class=cl>            GetBuilder<span class=p>&lt;</span><span class=nt>CountController</span><span class=p>&gt;</span>(
</span></span><span class=line><span class=cl>              init: controller,
</span></span><span class=line><span class=cl>              initState: (_) {},
</span></span><span class=line><span class=cl>              builder: (_) {
</span></span><span class=line><span class=cl>                print(&#34;GetBuilder - 1&#34;);
</span></span><span class=line><span class=cl>                return Text(&#39;value -&gt; ${_.count}&#39;);
</span></span><span class=line><span class=cl>              },
</span></span><span class=line><span class=cl>            ),
</span></span><span class=line><span class=cl>            GetBuilder<span class=p>&lt;</span><span class=nt>CountController</span><span class=p>&gt;</span>(
</span></span><span class=line><span class=cl>              init: controller,
</span></span><span class=line><span class=cl>              initState: (_) {},
</span></span><span class=line><span class=cl>              builder: (_) {
</span></span><span class=line><span class=cl>                print(&#34;GetBuilder - 2&#34;);
</span></span><span class=line><span class=cl>                return Text(&#39;value -&gt; ${_.count}&#39;);
</span></span><span class=line><span class=cl>              },
</span></span><span class=line><span class=cl>            ),
</span></span><span class=line><span class=cl>            Divider(),
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            //
</span></span><span class=line><span class=cl>            GetBuilder<span class=p>&lt;</span><span class=nt>CountController</span><span class=p>&gt;</span>(
</span></span><span class=line><span class=cl>              init: controller,
</span></span><span class=line><span class=cl>              initState: (_) {},
</span></span><span class=line><span class=cl>              builder: (_) {
</span></span><span class=line><span class=cl>                print(&#34;GetBuilder - 3&#34;);
</span></span><span class=line><span class=cl>                return Column(
</span></span><span class=line><span class=cl>                  children: [
</span></span><span class=line><span class=cl>                    Text(&#39;value -&gt; ${_.count}&#39;),
</span></span><span class=line><span class=cl>                    ElevatedButton(
</span></span><span class=line><span class=cl>                      onPressed: () {
</span></span><span class=line><span class=cl>                        _.add();
</span></span><span class=line><span class=cl>                      },
</span></span><span class=line><span class=cl>                      child: Text(&#39;GetBuilder -&gt; add&#39;),
</span></span><span class=line><span class=cl>                    )
</span></span><span class=line><span class=cl>                  ],
</span></span><span class=line><span class=cl>                );
</span></span><span class=line><span class=cl>              },
</span></span><span class=line><span class=cl>            ),
</span></span><span class=line><span class=cl>            Divider(),
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            // count2
</span></span><span class=line><span class=cl>            GetBuilder<span class=p>&lt;</span><span class=nt>CountController</span><span class=p>&gt;</span>(
</span></span><span class=line><span class=cl>              init: controller,
</span></span><span class=line><span class=cl>              initState: (_) {},
</span></span><span class=line><span class=cl>              builder: (_) {
</span></span><span class=line><span class=cl>                print(&#34;GetBuilder - 4&#34;);
</span></span><span class=line><span class=cl>                return Text(&#39;value count2 -&gt; ${_.count2}&#39;);
</span></span><span class=line><span class=cl>              },
</span></span><span class=line><span class=cl>            ),
</span></span><span class=line><span class=cl>            Divider(),
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            // id2 标记一个 `builder` ，触发方式`controller.update([&#34;id2&#34;]);` ，可传多个 `Array` 类型。
</span></span><span class=line><span class=cl>            GetBuilder<span class=p>&lt;</span><span class=nt>CountController</span><span class=p>&gt;</span>(
</span></span><span class=line><span class=cl>              id: &#34;id2&#34;,
</span></span><span class=line><span class=cl>              init: controller,
</span></span><span class=line><span class=cl>              initState: (_) {},
</span></span><span class=line><span class=cl>              builder: (_) {
</span></span><span class=line><span class=cl>                print(&#34;GetBuilder - 4&#34;);
</span></span><span class=line><span class=cl>                return Text(&#39;id2 -&gt; value count2 -&gt; ${_.count2}&#39;);
</span></span><span class=line><span class=cl>              },
</span></span><span class=line><span class=cl>            ),
</span></span><span class=line><span class=cl>            Divider(),
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            // 按钮
</span></span><span class=line><span class=cl>            ElevatedButton(
</span></span><span class=line><span class=cl>              onPressed: () {
</span></span><span class=line><span class=cl>                controller.add();
</span></span><span class=line><span class=cl>              },
</span></span><span class=line><span class=cl>              child: Text(&#39;add&#39;),
</span></span><span class=line><span class=cl>            ),
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            ElevatedButton(
</span></span><span class=line><span class=cl>              onPressed: () {
</span></span><span class=line><span class=cl>                controller.add2();
</span></span><span class=line><span class=cl>              },
</span></span><span class=line><span class=cl>              child: Text(&#39;add2&#39;),
</span></span><span class=line><span class=cl>            ),
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            ElevatedButton(
</span></span><span class=line><span class=cl>              onPressed: () {
</span></span><span class=line><span class=cl>                controller.update();
</span></span><span class=line><span class=cl>              },
</span></span><span class=line><span class=cl>              child: Text(&#39;controller.update()&#39;),
</span></span><span class=line><span class=cl>            ),
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            ElevatedButton(
</span></span><span class=line><span class=cl>              onPressed: () {
</span></span><span class=line><span class=cl>                controller.update([&#34;id2&#34;]);
</span></span><span class=line><span class=cl>              },
</span></span><span class=line><span class=cl>              child: Text(&#39;controller.update(id2)&#39;),
</span></span><span class=line><span class=cl>            ),
</span></span><span class=line><span class=cl>          ],
</span></span><span class=line><span class=cl>        ),
</span></span><span class=line><span class=cl>      ),
</span></span><span class=line><span class=cl>    );
</span></span><span class=line><span class=cl>  }
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><h4 id=workers>Workers</h4><p>Worker可以精确控制事件发生时触发回调，常用于Controller的onInit中：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>class CountController extends GetxController {
</span></span><span class=line><span class=cl>  final _count = 0.obs;
</span></span><span class=line><span class=cl>  set count(value) =&gt; this._count.value = value;
</span></span><span class=line><span class=cl>  get count =&gt; this._count.value;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  add() =&gt; _count.value++;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  @override
</span></span><span class=line><span class=cl>  void onInit() {
</span></span><span class=line><span class=cl>    super.onInit();
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    // 每次_count变化时调用
</span></span><span class=line><span class=cl>    ever(_count, (value) {
</span></span><span class=line><span class=cl>      print(&#34;ever -&gt; &#34; + value.toString());
</span></span><span class=line><span class=cl>    });
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    // 第一次被改变时才会被调用。
</span></span><span class=line><span class=cl>    once(_count, (value) {
</span></span><span class=line><span class=cl>      print(&#34;once -&gt; &#34; + value.toString());
</span></span><span class=line><span class=cl>    });
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    // 防DDos - 每当用户停止输入1秒时调用
</span></span><span class=line><span class=cl>    debounce(
</span></span><span class=line><span class=cl>      _count,
</span></span><span class=line><span class=cl>      (value) {
</span></span><span class=line><span class=cl>        print(&#34;debounce -&gt; &#34; + value.toString());
</span></span><span class=line><span class=cl>      },
</span></span><span class=line><span class=cl>      time: Duration(seconds: 1),
</span></span><span class=line><span class=cl>    );
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    // 忽略1秒内的所有变化。
</span></span><span class=line><span class=cl>    interval(
</span></span><span class=line><span class=cl>      _count,
</span></span><span class=line><span class=cl>      (value) {
</span></span><span class=line><span class=cl>        print(&#34;interval -&gt; &#34; + value.toString());
</span></span><span class=line><span class=cl>      },
</span></span><span class=line><span class=cl>      time: Duration(seconds: 1),
</span></span><span class=line><span class=cl>    );
</span></span><span class=line><span class=cl>  }
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><h3 id=路由管理>路由管理</h3><h4 id=普通路由>普通路由</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>// 导航到新的页面。
</span></span><span class=line><span class=cl>Get.to(NextScreen());
</span></span><span class=line><span class=cl>// 要导航到下一条路由，并在返回后立即接收或更新数据。
</span></span><span class=line><span class=cl>var data = await Get.to(Payment());
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>// 关闭SnackBars、Dialogs、BottomSheets或任何你通常会用Navigator.pop(context)关闭的东西。
</span></span><span class=line><span class=cl>Get.back();
</span></span><span class=line><span class=cl>// 在另一个页面上，发送前一个路由的数据。并使用它。
</span></span><span class=line><span class=cl>Get.back(result: &#39;success&#39;);
</span></span><span class=line><span class=cl>if(data == &#39;success&#39;) madeAnything();
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>// 进入下一个页面，但没有返回上一个页面的选项（用于SplashScreens，登录页面等）。
</span></span><span class=line><span class=cl>Get.off(NextScreen());
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>// 进入下一个界面并取消之前的所有路由（在购物车、投票和测试中很有用）。
</span></span><span class=line><span class=cl>Get.offAll(NextScreen());
</span></span></code></pre></div><h4 id=别名路由>别名路由</h4><p>普通路由管理起来比较麻烦,通常我们使用别名路由。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>// 导航到下一个页面
</span></span><span class=line><span class=cl>Get.toNamed(&#34;/NextScreen&#34;);
</span></span><span class=line><span class=cl>// 传递参数
</span></span><span class=line><span class=cl>Get.toNamed(&#34;/NextScreen&#34;, arguments: &#34;Hello&#34;);
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>// 浏览并删除前一个页面。
</span></span><span class=line><span class=cl>Get.offNamed(&#34;/NextScreen&#34;);
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>// 浏览并删除所有以前的页面。
</span></span><span class=line><span class=cl>Get.offAllNamed(&#34;/NextScreen&#34;);
</span></span><span class=line><span class=cl>// 动态URL
</span></span><span class=line><span class=cl>Get.offAllNamed(&#34;/NextScreen?device=phone<span class=ni>&amp;id=354&amp;name=Enzo&#34;);</span>
</span></span></code></pre></div><h3 id=依赖注入>依赖注入</h3><p><strong>Get.put()：</strong> 不使用控制器实例也会被创建</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>Get.put(CountController());
</span></span></code></pre></div><p><strong>Get.lazyPut()：</strong> 懒加载方式创建实例，只有在使用时才创建</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>Get.lazyPut<span class=p>&lt;</span><span class=nt>CountController</span><span class=p>&gt;</span>(() =&gt; CountController());
</span></span></code></pre></div><p><strong>Get.putAsync()：</strong> <code>Get.put()</code>的异步版版本</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>Get.putAsync<span class=p>&lt;</span><span class=nt>CountController</span><span class=p>&gt;</span>(() async =&gt; await CountController());
</span></span></code></pre></div><p><strong>Get.create()：</strong> 每次使用都会创建一个新的实例</p><p><strong>Get.find()：</strong> 你可以实例化100万个控制器，Get总会找到你所需的控制器</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>Get.find<span class=p>&lt;</span><span class=nt>CountController</span><span class=p>&gt;</span>();
</span></span></code></pre></div><h3 id=其他高级-api>其他高级 API</h3><p><a class=link href=https://github.com/jonataslaw/getx#other-advanced-apis target=_blank rel=noopener>https://github.com/jonataslaw/getx#other-advanced-apis</a></p><h2 id=dio>dio</h2><h3 id=原理>原理</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl># dio_mixin.dart 文件中 DioMixin 实现了 Dio
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>abstract class DioMixin implements Dio {
</span></span><span class=line><span class=cl>  @override
</span></span><span class=line><span class=cl>  Future<span class=p>&lt;</span><span class=nt>Response</span><span class=err>&lt;</span><span class=na>T</span><span class=p>&gt;</span>&gt; post<span class=p>&lt;</span><span class=nt>T</span><span class=p>&gt;</span>(
</span></span><span class=line><span class=cl>    String path, {                            # path： 请求的url链接
</span></span><span class=line><span class=cl>    data,                                     # data： 请求数据，例如上传用到的FromData
</span></span><span class=line><span class=cl>    Map<span class=p>&lt;</span><span class=nt>String</span><span class=err>,</span> <span class=na>dynamic</span><span class=p>&gt;</span>? queryParameters,    # data： 请求数据，例如上传用到的FromData
</span></span><span class=line><span class=cl>    Options? options,                         # queryParameters： 查询参数
</span></span><span class=line><span class=cl>    CancelToken? cancelToken,                 # cancelToken： 用来取消发送请求的token
</span></span><span class=line><span class=cl>    ProgressCallback? onSendProgress,         # onSendProgress： 网络请求发送的进度
</span></span><span class=line><span class=cl>    ProgressCallback? onReceiveProgress,      # onSendProgress： 网络请求发送的进度
</span></span><span class=line><span class=cl>  }) {
</span></span><span class=line><span class=cl>    return request<span class=p>&lt;</span><span class=nt>T</span><span class=p>&gt;</span>(                        # 返回request方法     
</span></span><span class=line><span class=cl>      path,
</span></span><span class=line><span class=cl>      data: data,
</span></span><span class=line><span class=cl>      options: checkOptions(&#39;POST&#39;, options),
</span></span><span class=line><span class=cl>      queryParameters: queryParameters,
</span></span><span class=line><span class=cl>      cancelToken: cancelToken,
</span></span><span class=line><span class=cl>      onSendProgress: onSendProgress,
</span></span><span class=line><span class=cl>      onReceiveProgress: onReceiveProgress,
</span></span><span class=line><span class=cl>    );
</span></span><span class=line><span class=cl>  }
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><p>get() post() 等调用时，返回request方法，request 方法对请求参数处理，并返回 fetch 方法，fetch 进行响应数据设定、构建请求流、添加拦截器、请求分发。</p><h2 id=其他>其他</h2><p>double width = MediaQuery.of(context).size.width; 屏幕宽度</p><p>double height = MediaQuery.of(context).size.height; 屏幕高度</p></section><footer class=article-footer><section class=article-copyright><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg><span>Licensed under CC BY-NC-SA 4.0</span></section><section class=article-lastmod><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round" style="margin:0 5px"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg><span>最后更新于 2021-04-30</span></section></footer><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/katex.min.css integrity="sha256-J+iAE0sgH8QSz9hpcDxXIftnj65JEZgNhGcgReTTK9s=" crossorigin=anonymous><script src=https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/katex.min.js integrity="sha256-InsNdER1b2xUewP+pKCUJpkhiqwHgqiPXDlIk7GzBu4=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/contrib/auto-render.min.js integrity="sha256-y39Mpg7V3D4lhBX4x6O0bUqTV4pSrfgwEfGKfxkOdgI=" crossorigin=anonymous defer></script><script>window.addEventListener("DOMContentLoaded",()=>{renderMathInElement(document.querySelector(`.article-content`),{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}]})})</script></article><script src=//unpkg.com/@waline/client@v2/dist/waline.js></script>
<link href=//unpkg.com/@waline/client@v2/dist/waline.css rel=stylesheet><div id=waline class=waline-container></div><style>.waline-container{background-color:var(--card-background);border-radius:var(--card-border-radius);box-shadow:var(--shadow-l1);padding:var(--card-padding);--waline-font-size:var(--article-font-size)}.waline-container .wl-count{color:var(--card-text-color-main)}</style><script>Waline.init({dark:'html[data-scheme="dark"]',el:"#waline",emoji:["https://cdn.jsdelivr.net/gh/walinejs/emojis/weibo"],locale:{admin:"Admin",placeholder:null},requiredMeta:["name","email","url"],serverURL:"https://myblog-rho-ebon.vercel.app/"})</script><footer class=site-footer><section class=copyright>&copy;
2021 -
2023 xiaoxian</section><section class=powerby>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>主题 <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.16.0>Stack</a></b> 由 <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a> 设计</section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script type=text/javascript src=/ts/main.js defer></script>
<script>function adsenseDelay(){var t=document.getElementsByTagName("head")[0],e=document.createElement("script");e.type="text/javascript",e.src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1748363845231571",e.setAttribute("crossorigin","anonymous"),t.appendChild(e)}function analyticsDelay(){var t=document.getElementsByTagName("head")[0],e=document.createElement("script");e.type="text/javascript",e.src="https://www.googletagmanager.com/gtag/js?id=UA-124746836-1",t.appendChild(e)}function gtag(){dataLayer.push(arguments)}setTimeout(adsenseDelay,1500),setTimeout(analyticsDelay,1500),window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-124746836-1")</script></body></html>