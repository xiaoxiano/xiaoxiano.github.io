<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>银之介</title><link>https://www.jiangdaoli.cf/</link><description>Recent content on 银之介</description><generator>Hugo -- gohugo.io</generator><language>zh-CN</language><lastBuildDate>Wed, 24 Nov 2021 00:00:00 +0000</lastBuildDate><atom:link href="https://www.jiangdaoli.cf/index.xml" rel="self" type="application/rss+xml"/><item><title>root手机和自动化</title><link>https://www.jiangdaoli.cf/p/phone-root/</link><pubDate>Wed, 24 Nov 2021 00:00:00 +0000</pubDate><guid>https://www.jiangdaoli.cf/p/phone-root/</guid><description>&lt;h1 id="root不同手机不同操作刷机有变砖风险">root（不同手机不同操作，刷机有变砖风险！）&lt;/h1>
&lt;p>以前手机都是用虚拟机 VMOS Pro，应用权限是有了，但现手机不能自动开屏幕锁自动执行任务，于是我就找了旧手机root。&lt;/p>
&lt;p>据网友文章说新华为解锁难度大，就找了一个荣耀8青春版。然后找教程，发现还是小破站文章可靠。大概分为以下几个步骤：&lt;/p>
&lt;ol>
&lt;li>
&lt;p>解bl锁
各品牌手机解锁可能有所不同，我仅简述我本次解锁，我用的是github的potatoNV短接解锁，如果其中没有你的手机，直接淘宝不要浪费时间。作者在youtube拍了教程，照做就好了，视频简介的USB com 1.0连接教程也要看，他的点击DriverSetup操作很快，不要漏了，&lt;a class="link" href="http://www.shuajibang.net/news/detail/39124/" target="_blank" rel="noopener"
>短接点可以参考这里&lt;/a>。获得解锁码搜华为工具箱即可解锁。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>刷入 TWRP recovery
建议不要刷机软件一键刷机，都是垃圾系统，就用官方系统刷适合你手机的TWRP，我在&lt;a class="link" href="https://m.huaweirom.com/rom/" target="_blank" rel="noopener"
>这个网站&lt;/a>找到华为的TWRP，我当时看到他网站干净无广告就刷了，是可以用的，此网站应该靠谱。Fastboot模式运行run脚本就行了。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>root
安卓7及以上使用magisk，有大神建议用20.4版本，github下载zip放进手机储存卡，进入TWRP recovery安装，开机后酷安装magisk app即可。&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h1 id="macrodroid">MacroDroid&lt;/h1>
&lt;h2 id="基础">基础&lt;/h2>
&lt;ol>
&lt;li>设置&lt;/li>
&lt;/ol>
&lt;ul>
&lt;li>防止系统清理：进入系统最近任务界面，点击应用旁边的小锁，锁定应用不被系统清理&lt;/li>
&lt;li>忽略电池优化：依次打开系统设置，应用和通知，应用管理，设置，特殊访问权限，忽略电池优化（直接在设置搜索栏搜索电池也能找到），允许忽略应用&lt;/li>
&lt;li>设置启动管理：依次打开系统设置，电池，启动管理，关闭应用自动管理后弹出的对话框中选中：允许自启动，允许关联启动，允许后台活动&lt;/li>
&lt;li>权限全部打开&lt;/li>
&lt;/ul>
&lt;ol start="2">
&lt;li>创建你需要的操作，这里不多介绍，估计很快可以学会。&lt;/li>
&lt;/ol>
&lt;h2 id="shell">shell&lt;/h2>
&lt;p>shell命令很方便定义操作（点击的坐标可以在手机开发者选项中打开指针位置）。&lt;a class="link" href="https://commandnotfound.cn/android/4/439/%E5%B8%B8%E7%94%A8-adb-shell-%E5%91%BD%E4%BB%A4%E5%A4%A7%E5%85%A8" target="_blank" rel="noopener"
>shell命令摘录网站&lt;/a>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">#按键事件
input text &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">string&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> #输入文本
input keyevent 20 #向下
input keyevent 4 #返回
input keyevent 3 #Home
input keyevent 6 #挂机
input keyevent 84 #搜索
input keyevent 26 #电源，息屏
input keyevent 24 #音量+
input keyevent 25 #音量-
#模拟点击
input tap 100 100
#滑动
input swipe x1 y1 x2 y2 ms
input swipe 100 100 400 100 300 #左往右
input swipe 400 100 100 100 300 #右往左
input swipe 100 100 100 400 300 #上往下
input swipe 100 400 100 100 300 #下往上
input swipe 100 100 400 400 300 #上往下斜
input swipe 400 400 100 100 300 #下往上斜
#长按
input swipe 100 100 100 100 1000 //在 100 100 位置长按 1000毫秒
&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>freenom自动续期</title><link>https://www.jiangdaoli.cf/p/freenom/</link><pubDate>Fri, 19 Nov 2021 00:00:00 +0000</pubDate><guid>https://www.jiangdaoli.cf/p/freenom/</guid><description>&lt;h1 id="freenom自动续期">freenom自动续期&lt;/h1>
&lt;ol>
&lt;li>Fork &lt;a class="link" href="https://github.com/luolongfei/freenom" target="_blank" rel="noopener"
>luolongfei大佬的freenom库&lt;/a>，再添加以下workflow：&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">###### 说明 ######
# 1、Fork 本仓库
# 2、在你 Fork 的本仓库下的 Settings &amp;gt; Secrets 画面追加以下几个 secret 变量：
# FREENOM_USERNAME、FREENOM_PASSWORD、MULTIPLE_ACCOUNTS、MAIL_USERNAME、MAIL_PASSWORD、TO、MAIL_ENABLE、TELEGRAM_CHAT_ID、
# TELEGRAM_BOT_TOKEN、TELEGRAM_BOT_ENABLE、NOTICE_FREQ
# （注：此处列出了所有可用变量，你只用追加你需要用到的变量，变量的具体含义请参考本项目的 .env 文件中的说明，一般情况下，.env 文件中的某些
# 项存在默认值，如果默认值满足你的需求则可不追加到 Secrets，它们会保持默认）
#
# 下面定时任务中的时间是世界时间，每天 10:00 执行，由于创建虚拟环境会消耗时间，故任务会延迟 30 秒左右执行
#
# @Author of yml configuration file: RouRouX &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">https:&lt;/span>&lt;span class="err">//&lt;/span>&lt;span class="na">github&lt;/span>&lt;span class="err">.&lt;/span>&lt;span class="na">com&lt;/span>&lt;span class="err">/&lt;/span>&lt;span class="na">RouRouX&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="err">&amp;amp;&lt;/span> mybsdc &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">mybsdc&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="na">gmail&lt;/span>&lt;span class="err">.&lt;/span>&lt;span class="na">com&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
#
###### end 说明 ######
name: Run it on action
on:
push:
branches:
- main
schedule:
- cron: 00 02 * * *
workflow_dispatch:
jobs:
run-it:
runs-on: ubuntu-18.04
name: Run it on action
steps:
- name: Checkout master
uses: actions/checkout@v2
- name: Setup PHP
uses: shivammathur/setup-php@v2
with:
php-version: &amp;#39;7.2&amp;#39;
- name: Setting
run: |
echo &amp;#39;Renew freenom domain name automatically.&amp;#39;
echo &amp;#39;@Author of yml configuration file: RouRouX &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">https:&lt;/span>&lt;span class="err">//&lt;/span>&lt;span class="na">github&lt;/span>&lt;span class="err">.&lt;/span>&lt;span class="na">com&lt;/span>&lt;span class="err">/&lt;/span>&lt;span class="na">RouRouX&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="err">&amp;amp;&lt;/span> mybsdc &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">mybsdc&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="na">gmail&lt;/span>&lt;span class="err">.&lt;/span>&lt;span class="na">com&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&amp;#39;
echo &amp;#39;@Url: https://github.com/luolongfei/freenom&amp;#39;
cp .env.example .env
if [[ (&amp;#39;${{ secrets.FREENOM_USERNAME }}&amp;#39; == &amp;#39;&amp;#39; || &amp;#39;${{ secrets.FREENOM_PASSWORD }}&amp;#39; == &amp;#39;&amp;#39;) &lt;span class="err">&amp;amp;&amp;amp;&lt;/span> &amp;#39;${{ secrets.MULTIPLE_ACCOUNTS }}&amp;#39; == &amp;#39;&amp;#39; ]]; then echo &amp;#39;你在 Github 的当前项目的 Settings &amp;gt; Secrets 画面没有设置任何与账户信息相关的 secret 值，无法正常运行，请添加新的 secret 值，设置 FREENOM_USERNAME 与 FREENOM_PASSWORD，或者设置 MULTIPLE_ACCOUNTS，以及 .env 文件中其它必要项，各项的具体含义与格式参考本项目 .env 文件中的说明。&amp;#39;; fi
if [ &amp;#39;${{ secrets.FREENOM_USERNAME }}&amp;#39; != &amp;#39;&amp;#39; ]; then sed -i &amp;#34;s/^FREENOM_USERNAME=.*$/FREENOM_USERNAME=&amp;#39;${{ secrets.FREENOM_USERNAME }}&amp;#39;/&amp;#34; .env; fi
if [ &amp;#39;${{ secrets.FREENOM_PASSWORD }}&amp;#39; != &amp;#39;&amp;#39; ]; then sed -i &amp;#34;s/^FREENOM_PASSWORD=.*$/FREENOM_PASSWORD=&amp;#39;${{ secrets.FREENOM_PASSWORD }}&amp;#39;/&amp;#34; .env; fi
if [ &amp;#39;${{ secrets.MULTIPLE_ACCOUNTS }}&amp;#39; != &amp;#39;&amp;#39; ]; then sed -i &amp;#34;s/^MULTIPLE_ACCOUNTS=.*$/MULTIPLE_ACCOUNTS=&amp;#39;${{ secrets.MULTIPLE_ACCOUNTS }}&amp;#39;/&amp;#34; .env; fi
if [ &amp;#39;${{ secrets.MAIL_USERNAME }}&amp;#39; != &amp;#39;&amp;#39; ]; then sed -i &amp;#34;s/^MAIL_USERNAME=.*$/MAIL_USERNAME=&amp;#39;${{ secrets.MAIL_USERNAME }}&amp;#39;/&amp;#34; .env; fi
if [ &amp;#39;${{ secrets.MAIL_PASSWORD }}&amp;#39; != &amp;#39;&amp;#39; ]; then sed -i &amp;#34;s/^MAIL_PASSWORD=.*$/MAIL_PASSWORD=&amp;#39;${{ secrets.MAIL_PASSWORD }}&amp;#39;/&amp;#34; .env; fi
if [ &amp;#39;${{ secrets.TO }}&amp;#39; != &amp;#39;&amp;#39; ]; then sed -i &amp;#34;s/^TO=.*$/TO=&amp;#39;${{ secrets.TO }}&amp;#39;/&amp;#34; .env; fi
if [ &amp;#39;${{ secrets.MAIL_ENABLE }}&amp;#39; != &amp;#39;&amp;#39; ]; then sed -i &amp;#34;s/^MAIL_ENABLE=.*$/MAIL_ENABLE=&amp;#39;${{ secrets.MAIL_ENABLE }}&amp;#39;/&amp;#34; .env; fi
if [ &amp;#39;${{ secrets.TELEGRAM_CHAT_ID }}&amp;#39; != &amp;#39;&amp;#39; ]; then sed -i &amp;#34;s/^TELEGRAM_CHAT_ID=.*$/TELEGRAM_CHAT_ID=&amp;#39;${{ secrets.TELEGRAM_CHAT_ID }}&amp;#39;/&amp;#34; .env; fi
if [ &amp;#39;${{ secrets.TELEGRAM_BOT_TOKEN }}&amp;#39; != &amp;#39;&amp;#39; ]; then sed -i &amp;#34;s/^TELEGRAM_BOT_TOKEN=.*$/TELEGRAM_BOT_TOKEN=&amp;#39;${{ secrets.TELEGRAM_BOT_TOKEN }}&amp;#39;/&amp;#34; .env; fi
if [ &amp;#39;${{ secrets.TELEGRAM_BOT_ENABLE }}&amp;#39; != &amp;#39;&amp;#39; ]; then sed -i &amp;#34;s/^TELEGRAM_BOT_ENABLE=.*$/TELEGRAM_BOT_ENABLE=&amp;#39;${{ secrets.TELEGRAM_BOT_ENABLE }}&amp;#39;/&amp;#34; .env; fi
if [ &amp;#39;${{ secrets.NOTICE_FREQ }}&amp;#39; != &amp;#39;&amp;#39; ]; then sed -i &amp;#34;s/^NOTICE_FREQ=.*$/NOTICE_FREQ=&amp;#39;${{ secrets.NOTICE_FREQ }}&amp;#39;/&amp;#34; .env; fi
sed -i &amp;#34;s/^ON_GITHUB_ACTIONS=.*$/ON_GITHUB_ACTIONS=true/&amp;#34; .env
- name: Run
run: |
php run
&lt;/code>&lt;/pre>&lt;/div>&lt;ol start="2">
&lt;li>在你 Fork 的本仓库下的 &lt;code>Settings&lt;/code> -&amp;gt; &lt;code>Secrets&lt;/code> 页面追加以下几个&lt;code>secret&lt;/code>秘密环境变量
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:center">变量名&lt;/th>
&lt;th style="text-align:center">含义&lt;/th>
&lt;th style="text-align:center">默认值&lt;/th>
&lt;th style="text-align:center">是否必须&lt;/th>
&lt;th style="text-align:center">备注&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:center">FREENOM_USERNAME&lt;/td>
&lt;td style="text-align:center">freenom 账户&lt;/td>
&lt;td style="text-align:center">-&lt;/td>
&lt;td style="text-align:center">是&lt;/td>
&lt;td style="text-align:center">只支持邮箱账户，不支持也不打算支持第三方社交账户登录&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">FREENOM_PASSWORD&lt;/td>
&lt;td style="text-align:center">freenom 密码&lt;/td>
&lt;td style="text-align:center">-&lt;/td>
&lt;td style="text-align:center">是&lt;/td>
&lt;td style="text-align:center">某些特殊字符可能需要转义，在&lt;code>Github actions&lt;/code>环境，请在除字母数字以外的字符前加上“\”，否则可能无法正确读取密码，此举是防止某些字符在&lt;code>shell&lt;/code>命令行被解析，举个例子，比如我密码是&lt;code>fei.,:!~@#$%^&amp;amp;*?233-_abcd^$$&lt;/code>，那么写到秘密变量时就应写为&lt;code>fei\.\,\:\!\~\@\#\$\%\^\&amp;amp;\*\?233\-\_abcd\^\$\$&lt;/code>。而在普通&lt;code>VPS&lt;/code>环境，则只用在密码中的“#”或单双引号前加“\”，请参考&lt;code>.env.example&lt;/code>文件内的注释，应该没人会设置那么变态的密码吧&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">MULTIPLE_ACCOUNTS&lt;/td>
&lt;td style="text-align:center">多账户支持&lt;/td>
&lt;td style="text-align:center">-&lt;/td>
&lt;td style="text-align:center">否&lt;/td>
&lt;td style="text-align:center">多个账户和密码的格式必须是“&lt;code>&amp;lt;账户1&amp;gt;@&amp;lt;密码1&amp;gt;|&amp;lt;账户2&amp;gt;@&amp;lt;密码2&amp;gt;|&amp;lt;账户3&amp;gt;@&amp;lt;密码3&amp;gt;&lt;/code>”，如果设置了多账户，上面的&lt;code>FREENOM_USERNAME&lt;/code>和&lt;code>FREENOM_PASSWORD&lt;/code>可不设置&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">MAIL_USERNAME&lt;/td>
&lt;td style="text-align:center">机器人邮箱账户&lt;/td>
&lt;td style="text-align:center">-&lt;/td>
&lt;td style="text-align:center">是&lt;/td>
&lt;td style="text-align:center">支持&lt;code>Gmail&lt;/code>、&lt;code>QQ邮箱&lt;/code>以及&lt;code>163邮箱&lt;/code>，尽可能使用&lt;code>163邮箱&lt;/code>或者&lt;code>QQ邮箱&lt;/code>，而非之前推荐的&lt;code>Gmail&lt;/code>。因为谷歌的安全机制，每次在新设备登录 &lt;code>Gmail&lt;/code> 都会先被限制，需要手动解除限制才行，而&lt;code>Github Actions&lt;/code>每次创建的虚拟环境都会分配一个新的设备&lt;code>IP&lt;/code>，相当于每次都是从新设备登录&lt;code>Gmail&lt;/code>，而我们不可能每次都去手动为&lt;code>Gmail&lt;/code>解除登录限制，所以这种机制会导致无法发出通知邮件。具体的配置方法参考「 &lt;a class="link" href="#--%e9%85%8d%e7%bd%ae%e5%8f%91%e4%bf%a1%e9%82%ae%e7%ae%b1" >配置发信邮箱&lt;/a> 」&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">MAIL_PASSWORD&lt;/td>
&lt;td style="text-align:center">机器人邮箱密码&lt;/td>
&lt;td style="text-align:center">-&lt;/td>
&lt;td style="text-align:center">是&lt;/td>
&lt;td style="text-align:center">&lt;code>Gmail&lt;/code>填密码，&lt;code>QQ邮箱&lt;/code>或&lt;code>163邮箱&lt;/code>填授权码&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">TO&lt;/td>
&lt;td style="text-align:center">接收通知的邮箱&lt;/td>
&lt;td style="text-align:center">-&lt;/td>
&lt;td style="text-align:center">是&lt;/td>
&lt;td style="text-align:center">你自己最常用的邮箱，推荐使用&lt;code>QQ邮箱&lt;/code>，用来接收机器人邮箱发出的域名相关邮件&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">MAIL_ENABLE&lt;/td>
&lt;td style="text-align:center">是否启用邮件推送功能&lt;/td>
&lt;td style="text-align:center">true&lt;/td>
&lt;td style="text-align:center">否&lt;/td>
&lt;td style="text-align:center">&lt;code>true&lt;/code>：启用&lt;!-- raw HTML omitted -->&lt;code>false&lt;/code>：不启用&lt;!-- raw HTML omitted -->默认启用，如果设为&lt;code>false&lt;/code>，不启用邮件推送功能，则上面的&lt;code>MAIL_USERNAME&lt;/code>、&lt;code>MAIL_PASSWORD&lt;/code>、&lt;code>TO&lt;/code>变量变为非必须，可不设置&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">TELEGRAM_CHAT_ID&lt;/td>
&lt;td style="text-align:center">你的&lt;code>chat_id&lt;/code>&lt;/td>
&lt;td style="text-align:center">-&lt;/td>
&lt;td style="text-align:center">否&lt;/td>
&lt;td style="text-align:center">通过发送&lt;code>/start&lt;/code>给&lt;code>@userinfobot&lt;/code>可以获取自己的&lt;code>id&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">TELEGRAM_BOT_TOKEN&lt;/td>
&lt;td style="text-align:center">你的&lt;code>Telegram bot&lt;/code>的&lt;code>token&lt;/code>&lt;/td>
&lt;td style="text-align:center">-&lt;/td>
&lt;td style="text-align:center">否&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">TELEGRAM_BOT_ENABLE&lt;/td>
&lt;td style="text-align:center">是否启用&lt;code>Telegram Bot&lt;/code>推送功能&lt;/td>
&lt;td style="text-align:center">false&lt;/td>
&lt;td style="text-align:center">否&lt;/td>
&lt;td style="text-align:center">&lt;code>true&lt;/code>：启用&lt;!-- raw HTML omitted -->&lt;code>false&lt;/code>：不启用&lt;!-- raw HTML omitted -->默认不启用，如果设为&lt;code>true&lt;/code>，则必须设置上面的&lt;code>TELEGRAM_CHAT_ID&lt;/code>和&lt;code>TELEGRAM_BOT_TOKEN&lt;/code>变量&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">NOTICE_FREQ&lt;/td>
&lt;td style="text-align:center">通知频率&lt;/td>
&lt;td style="text-align:center">1&lt;/td>
&lt;td style="text-align:center">否&lt;/td>
&lt;td style="text-align:center">&lt;code>0&lt;/code>：仅当有续期操作的时候&lt;!-- raw HTML omitted -->&lt;code>1&lt;/code>：每次执行&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;/li>
&lt;/ol>
&lt;p>（注：你只用关注上面表格中的必须项，非必须项可不设置，将保持默认值。更多相关变量的含义、格式以及默认值，请参考本项目的&lt;code>.env.example&lt;/code>文件内的注释）&lt;/p>
&lt;ol start="3">
&lt;li>启用 Actions ，完成。&lt;/li>
&lt;/ol>
&lt;h1 id="保活">保活&lt;/h1>
&lt;ol>
&lt;li>
&lt;p>Fork &lt;a class="link" href="https://github.com/zhzhzhy/Workflow-Keep-Alive" target="_blank" rel="noopener"
>zhzhzhy/Workflow-Keep-Alive库&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>创建 sercets ：&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:center">变量名&lt;/th>
&lt;th style="text-align:center">值&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:center">REST_TOKEN&lt;/td>
&lt;td style="text-align:center">个人访问令牌（Personal access tokens）&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">API_ADDRESS&lt;/td>
&lt;td style="text-align:center">&lt;code>https://api.github.com/repos/{owner}/{target-repo}/actions/workflows/enable_workflow/enable&lt;/code>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;/li>
&lt;li>
&lt;p>在目标仓库的工作流程中执行上述步骤，然后在之后添加以下 Github Action &lt;code>step&lt;/code>:&lt;/p>
&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html"> - name: curl
id: enable_workflow
env:
REST_TOKEN: ${{ secrets.REST_TOKEN }}
API_ADDRESS: ${{ secrets.API_ADDRESS }}
run: |
echo &amp;#34;Enable Workflow Start...&amp;#34;
curl -X PUT -H &amp;#34;Authorization: token $REST_TOKEN&amp;#34; &amp;#34;$API_ADDRESS&amp;#34;
echo &amp;#34;Finished&amp;#34;
&lt;/code>&lt;/pre>&lt;/div>&lt;details class="spoiler " id="spoiler-0">
&lt;summary>“点击展开完整代码”&lt;/summary>
&lt;p>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html"># 1、Fork 本仓库
# 2、在你 Fork 的本仓库下的 Settings &amp;gt; Secrets 画面追加以下几个 secret 变量：
# FREENOM_USERNAME、FREENOM_PASSWORD、MULTIPLE_ACCOUNTS、MAIL_USERNAME、MAIL_PASSWORD、TO、MAIL_ENABLE、TELEGRAM_CHAT_ID、
# TELEGRAM_BOT_TOKEN、TELEGRAM_BOT_ENABLE、NOTICE_FREQ
# （注：此处列出了所有可用变量，你只用追加你需要用到的变量，变量的具体含义请参考本项目的 .env 文件中的说明，一般情况下，.env 文件中的某些
# 项存在默认值，如果默认值满足你的需求则可不追加到 Secrets，它们会保持默认）
#
# 下面定时任务中的时间是世界时间，每天 10:00 执行，由于创建虚拟环境会消耗时间，故任务会延迟 30 秒左右执行
#
# @Author of yml configuration file: RouRouX &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">https:&lt;/span>&lt;span class="err">//&lt;/span>&lt;span class="na">github&lt;/span>&lt;span class="err">.&lt;/span>&lt;span class="na">com&lt;/span>&lt;span class="err">/&lt;/span>&lt;span class="na">RouRouX&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="err">&amp;amp;&lt;/span> mybsdc &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">mybsdc&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="na">gmail&lt;/span>&lt;span class="err">.&lt;/span>&lt;span class="na">com&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
#
###### end 说明 ######
name: Run it on action
on:
push:
branches:
- main
schedule:
- cron: 00 02 * * *
workflow_dispatch:
jobs:
run-it:
runs-on: ubuntu-18.04
name: Run it on action
steps:
- name: Checkout master
uses: actions/checkout@v2
- name: Setup PHP
uses: shivammathur/setup-php@v2
with:
php-version: &amp;#39;7.2&amp;#39;
- name: Setting
run: |
echo &amp;#39;Renew freenom domain name automatically.&amp;#39;
echo &amp;#39;@Author of yml configuration file: RouRouX &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">https:&lt;/span>&lt;span class="err">//&lt;/span>&lt;span class="na">github&lt;/span>&lt;span class="err">.&lt;/span>&lt;span class="na">com&lt;/span>&lt;span class="err">/&lt;/span>&lt;span class="na">RouRouX&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> &lt;span class="err">&amp;amp;&lt;/span> mybsdc &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">mybsdc&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="na">gmail&lt;/span>&lt;span class="err">.&lt;/span>&lt;span class="na">com&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&amp;#39;
echo &amp;#39;@Url: https://github.com/luolongfei/freenom&amp;#39;
cp .env.example .env
if [[ (&amp;#39;${{ secrets.FREENOM_USERNAME }}&amp;#39; == &amp;#39;&amp;#39; || &amp;#39;${{ secrets.FREENOM_PASSWORD }}&amp;#39; == &amp;#39;&amp;#39;) &lt;span class="err">&amp;amp;&amp;amp;&lt;/span> &amp;#39;${{ secrets.MULTIPLE_ACCOUNTS }}&amp;#39; == &amp;#39;&amp;#39; ]]; then echo &amp;#39;你在 Github 的当前项目的 Settings &amp;gt; Secrets 画面没有设置任何与账户信息相关的 secret 值，无法正常运行，请添加新的 secret 值，设置 FREENOM_USERNAME 与 FREENOM_PASSWORD，或者设置 MULTIPLE_ACCOUNTS，以及 .env 文件中其它必要项，各项的具体含义与格式参考本项目 .env 文件中的说明。&amp;#39;; fi
if [ &amp;#39;${{ secrets.FREENOM_USERNAME }}&amp;#39; != &amp;#39;&amp;#39; ]; then sed -i &amp;#34;s/^FREENOM_USERNAME=.*$/FREENOM_USERNAME=&amp;#39;${{ secrets.FREENOM_USERNAME }}&amp;#39;/&amp;#34; .env; fi
if [ &amp;#39;${{ secrets.FREENOM_PASSWORD }}&amp;#39; != &amp;#39;&amp;#39; ]; then sed -i &amp;#34;s/^FREENOM_PASSWORD=.*$/FREENOM_PASSWORD=&amp;#39;${{ secrets.FREENOM_PASSWORD }}&amp;#39;/&amp;#34; .env; fi
if [ &amp;#39;${{ secrets.MULTIPLE_ACCOUNTS }}&amp;#39; != &amp;#39;&amp;#39; ]; then sed -i &amp;#34;s/^MULTIPLE_ACCOUNTS=.*$/MULTIPLE_ACCOUNTS=&amp;#39;${{ secrets.MULTIPLE_ACCOUNTS }}&amp;#39;/&amp;#34; .env; fi
if [ &amp;#39;${{ secrets.MAIL_USERNAME }}&amp;#39; != &amp;#39;&amp;#39; ]; then sed -i &amp;#34;s/^MAIL_USERNAME=.*$/MAIL_USERNAME=&amp;#39;${{ secrets.MAIL_USERNAME }}&amp;#39;/&amp;#34; .env; fi
if [ &amp;#39;${{ secrets.MAIL_PASSWORD }}&amp;#39; != &amp;#39;&amp;#39; ]; then sed -i &amp;#34;s/^MAIL_PASSWORD=.*$/MAIL_PASSWORD=&amp;#39;${{ secrets.MAIL_PASSWORD }}&amp;#39;/&amp;#34; .env; fi
if [ &amp;#39;${{ secrets.TO }}&amp;#39; != &amp;#39;&amp;#39; ]; then sed -i &amp;#34;s/^TO=.*$/TO=&amp;#39;${{ secrets.TO }}&amp;#39;/&amp;#34; .env; fi
if [ &amp;#39;${{ secrets.MAIL_ENABLE }}&amp;#39; != &amp;#39;&amp;#39; ]; then sed -i &amp;#34;s/^MAIL_ENABLE=.*$/MAIL_ENABLE=&amp;#39;${{ secrets.MAIL_ENABLE }}&amp;#39;/&amp;#34; .env; fi
if [ &amp;#39;${{ secrets.TELEGRAM_CHAT_ID }}&amp;#39; != &amp;#39;&amp;#39; ]; then sed -i &amp;#34;s/^TELEGRAM_CHAT_ID=.*$/TELEGRAM_CHAT_ID=&amp;#39;${{ secrets.TELEGRAM_CHAT_ID }}&amp;#39;/&amp;#34; .env; fi
if [ &amp;#39;${{ secrets.TELEGRAM_BOT_TOKEN }}&amp;#39; != &amp;#39;&amp;#39; ]; then sed -i &amp;#34;s/^TELEGRAM_BOT_TOKEN=.*$/TELEGRAM_BOT_TOKEN=&amp;#39;${{ secrets.TELEGRAM_BOT_TOKEN }}&amp;#39;/&amp;#34; .env; fi
if [ &amp;#39;${{ secrets.TELEGRAM_BOT_ENABLE }}&amp;#39; != &amp;#39;&amp;#39; ]; then sed -i &amp;#34;s/^TELEGRAM_BOT_ENABLE=.*$/TELEGRAM_BOT_ENABLE=&amp;#39;${{ secrets.TELEGRAM_BOT_ENABLE }}&amp;#39;/&amp;#34; .env; fi
if [ &amp;#39;${{ secrets.NOTICE_FREQ }}&amp;#39; != &amp;#39;&amp;#39; ]; then sed -i &amp;#34;s/^NOTICE_FREQ=.*$/NOTICE_FREQ=&amp;#39;${{ secrets.NOTICE_FREQ }}&amp;#39;/&amp;#34; .env; fi
sed -i &amp;#34;s/^ON_GITHUB_ACTIONS=.*$/ON_GITHUB_ACTIONS=true/&amp;#34; .env
- name: Run
run: |
php run
- name: curl
id: enable_workflow
env:
REST_TOKEN: ${{ secrets.REST_TOKEN }}
API_ADDRESS: ${{ secrets.API_ADDRESS }}
run: |
echo &amp;#34;Enable Workflow Start...&amp;#34;
curl -X PUT -H &amp;#34;Authorization: token $REST_TOKEN&amp;#34; &amp;#34;$API_ADDRESS&amp;#34;
echo &amp;#34;Finished&amp;#34;
&lt;/code>&lt;/pre>&lt;/div>&lt;/p>
&lt;/details>
&lt;ol start="4">
&lt;li>运行 github action，完成。&lt;/li>
&lt;/ol>
&lt;h1 id="附">附&lt;/h1>
&lt;p>&lt;a class="link" href="https://docs.github.com/en/actions/learn-github-actions/workflow-syntax-for-github-actions" target="_blank" rel="noopener"
>github workflow 语法文档&lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="https://crontab.guru/examples.html" target="_blank" rel="noopener"
>修改定时任务 —— Cron示例&lt;/a>&lt;/p></description></item><item><title>docker自动化部署</title><link>https://www.jiangdaoli.cf/p/auto-deploy/</link><pubDate>Mon, 15 Nov 2021 00:00:00 +0000</pubDate><guid>https://www.jiangdaoli.cf/p/auto-deploy/</guid><description>&lt;h1 id="actions部署前后端分离项目">actions部署前后端分离项目&lt;/h1>
&lt;p>&lt;a class="link" href="https://dev.to/2nit/rails-cd-with-docker-github-actions-and-vps-4hi4" target="_blank" rel="noopener"
>参考文章&lt;/a>&lt;/p>
&lt;p>本文使用github actions + docker compose部署到github container registry（这适用于中小型项目） 附：&lt;a class="link" href="https://cloudonaut.io/amazon-ecr-vs-docker-hub-vs-github-container-registry/" target="_blank" rel="noopener"
>容器注册平台对比&lt;/a>&lt;/p>
&lt;ol>
&lt;li>
&lt;p>准备好你的dockerfile，如无docker和docker-compose基础请先看文档和&lt;a class="link" href="https://jiangdaoli.cf/p/docker-compose/" target="_blank" rel="noopener"
>前文&lt;/a>。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>使用github actions
&lt;details class="spoiler " id="spoiler-0">
&lt;summary>“点击展开示例actions”&lt;/summary>
&lt;p>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">on:
push:
branches:
- master
workflow_dispatch:
env:
REGISTRY: ghcr.io
IMAGE_NAME: ${{ github.repository }}
jobs:
build-and-push-image:
runs-on: ubuntu-latest
permissions:
contents: read
packages: write
strategy:
matrix:
node: [ &amp;#39;14&amp;#39; ]
steps:
- name: Checkout repository
uses: actions/checkout@v2
- name: Setup node
uses: actions/setup-node@v2
with:
node-version: ${{ matrix.node }}
- name: npm install
run: |
cd web #进入前端dockerfile目录
npm install
- name: Set up QEMU
uses: docker/setup-qemu-action@v1
- uses: docker/setup-buildx-action@v1
id: builder1
- uses: docker/setup-buildx-action@v1
id: builder2
- name: Log in to the Container registry
uses: docker/login-action@v1
with:
registry: ${{ env.REGISTRY }}
username: ${{ github.actor }}
password: ${{ secrets.GITHUB_TOKEN }}
# 用于消毒标签，tag是此动作的重要功能之一，本示例没使用，请见文档
- name: Extract metadata (tags, labels) for Docker
id: meta1
uses: docker/metadata-action@v3
with:
images: ghcr.io/username/server # images地址
- name: Extract metadata (tags, labels) for Docker
id: meta2
uses: docker/metadata-action@v3
with:
images: ghcr.io/username/web # images地址
- name: Build and push Docker image 1
uses: docker/build-push-action@v2
with:
builder: ${{ steps.builder1.outputs.name }}
context: ./server # 服务端dockerfile目录
file: ./server/Dockerfile # 服务端dockerfile
push: true
tags: ${{ steps.meta1.outputs.tags }}
labels: ${{ steps.meta1.outputs.labels }}
cache-from: type=gha
cache-to: type=gha,mode=max
- name: Build and push Docker image 2
uses: docker/build-push-action@v2
with:
builder: ${{ steps.builder2.outputs.name }}
context: ./web # 前端dockerfile目录
file: ./web/Dockerfile # 前端dockerfile
push: true
tags: ${{ steps.meta2.outputs.tags }}
labels: ${{ steps.meta2.outputs.labels }}
cache-from: type=gha
cache-to: type=gha,mode=max
deploy:
runs-on: ubuntu-latest
needs: build-and-push-image
steps:
- uses: appleboy/ssh-action@master
with:
host: ${{ secrets.host }} #仓库设置中添加Secrets：HOST
username: root
password: ${{ secrets.PASSWORD }} #仓库设置中添加Secrets：PASSWORD
port: 22
script: |
echo $CR_PAT | docker login ghcr.io -u USERNAME --password-stdin # 用户名
docker-compose -f docker-compose-nginx.yaml -f docker-compose-app.yaml pull # docker-compose名
docker-compose -f docker-compose-nginx.yaml -f docker-compose-app.yaml up -d # docker-compose名
# 此actions许多参数由github自动提供，无需添加，需修改的均已注释
&lt;/code>&lt;/pre>&lt;/div>&lt;/p>
&lt;/details>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>在服务器上完成&lt;a class="link" href="https://docs.github.com/cn/packages/working-with-a-github-packages-registry/working-with-the-container-registry#" target="_blank" rel="noopener"
>向 Container registry 验证&lt;/a>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>具体操作：打开/etc/profile&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">export CR_PAT=YOUR_TOKEN
source /etc/profile
echo $CR_PAT | docker login ghcr.io -u USERNAME --password-stdin
&lt;/code>&lt;/pre>&lt;/div>&lt;ol start="4">
&lt;li>新建docker-compose-app.yaml和代理容器docker-compose-nginx.yaml,&lt;a class="link" href="https://github.com/buchdag/letsencrypt-nginx-proxy-companion-compose" target="_blank" rel="noopener"
>示例&lt;/a>。如有不懂，请多看几遍&lt;a class="link" href="https://github.com/nginx-proxy/acme-companion/tree/main/docs" target="_blank" rel="noopener"
>acme-companion&lt;/a>和上述示例文档。&lt;/li>
&lt;/ol>
&lt;p>最后，我前文的示例 或 &lt;a class="link" href="https://github.com/nginx-proxy/nginx-proxy/discussions/1755" target="_blank" rel="noopener"
>Issues中的实例&lt;/a>应该会有帮助。&lt;/p></description></item><item><title>docker和docker-compose</title><link>https://www.jiangdaoli.cf/p/docker-compose/</link><pubDate>Wed, 27 Oct 2021 00:00:00 +0000</pubDate><guid>https://www.jiangdaoli.cf/p/docker-compose/</guid><description>&lt;h1 id="docker">docker&lt;/h1>
&lt;p>&lt;a class="link" href="https://docs.docker.com/engine/install/debian/" target="_blank" rel="noopener"
>安装docker&lt;/a>：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">#更新apt包索引
sudo apt-get update
#安装包以允许apt通过 HTTPS 使用存储库
sudo apt-get install \
ca-certificates \
curl \
gnupg \
lsb-release
#添加Docker官方的GPG密钥
curl -fsSL https://download.docker.com/linux/debian/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg
#设置稳定存储库
echo \
&amp;#34;deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/debian \
$(lsb_release -cs) stable&amp;#34; | sudo tee /etc/apt/sources.list.d/docker.list &amp;gt; /dev/null
#安装最新版本的Docker Engine和containerd
sudo apt-get update
sudo apt-get install docker-ce docker-ce-cli containerd.io
#hello-world 映像验证
sudo docker run hello-world
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="dockerfile">Dockerfile&lt;/h2>
&lt;details class="spoiler " id="spoiler-0">
&lt;summary>“点击展开go语言示例”&lt;/summary>
&lt;p>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html"># 这个参考示例来自李文周大佬的bluebell项目
FROM golang:alpine AS builder
# 为我们的镜像设置必要的环境变量
ENV GO111MODULE=on \
CGO_ENABLED=0 \
GOOS=linux \
GOARCH=amd64
# 移动到工作目录：/build
WORKDIR /build
# 复制项目中的 go.mod 和 go.sum文件并下载依赖信息
COPY go.mod .
COPY go.sum .
RUN go mod download
# 将代码复制到容器中
COPY . .
# 将我们的代码编译成二进制可执行文件 bluebell_app
RUN go build -o bluebell_app .
###################
# 接下来创建一个小镜像
###################
FROM debian:stretch-slim
COPY ./wait-for.sh /
COPY ./templates /templates
COPY ./static /static
COPY ./conf /conf
# 从builder镜像中把/dist/app 拷贝到当前目录
COPY --from=builder /build/bluebell_app /
RUN set -eux; \
apt-get update; \
apt-get install -y \
--no-install-recommends \
netcat; \
chmod 755 wait-for.sh
# 声明服务端口
EXPOSE 8084
# 需要运行的命令
#ENTRYPOINT [&amp;#34;/bluebell_app&amp;#34;, &amp;#34;conf/config.yaml&amp;#34;]
&lt;/code>&lt;/pre>&lt;/div>&lt;/p>
&lt;/details>
&lt;h2 id="基础知识参考">基础知识参考&lt;/h2>
&lt;p>以下简介节选自&lt;a class="link" href="https://docs.docker.com/get-started/" target="_blank" rel="noopener"
>docker文档&lt;/a>：&lt;/p>
&lt;ol>
&lt;li>**卷（volumes）**存储在由 Docker管理的主机文件系统（在 Linux 上的/var/lib/docker/volumes/ ）。卷完全由 Docker 管理，非 Docker 进程不应修改文件系统的这一部分。卷是在 Docker 中持久化数据的最佳方式。&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html"># 将当前目录的相对路径挂载到/app目录中
volumes:
- ./:/app
&lt;/code>&lt;/pre>&lt;/div>&lt;h1 id="docker-compose">docker compose&lt;/h1>
&lt;p>&lt;a class="link" href="https://docs.docker.com/compose/install/" target="_blank" rel="noopener"
>安装docker compose&lt;/a>：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">#下载 Docker Compose 的当前稳定版本
sudo curl -L &amp;#34;https://github.com/docker/compose/releases/download/1.29.2/docker-compose-$(uname -s)-$(uname -m)&amp;#34; -o /usr/local/bin/docker-compose
#对二进制文件应用可执行权限
sudo chmod +x /usr/local/bin/docker-compose
#测试安装
docker-compose --version
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="docker-composeyaml">docker-compose.yaml&lt;/h2>
&lt;details class="spoiler " id="spoiler-1">
&lt;summary>“点击展开和折叠代码”&lt;/summary>
&lt;p>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">version: &amp;#39;3.7&amp;#39;
services:
mysql5.7:
# 镜像名
image: &amp;#39;mysql:5.7&amp;#39;
# 容器名(以后的控制都通过这个)
container_name: mysql5.7
# 重启策略
restart: always
environment:
# 时区上海
TZ: Asia/Shanghai
# root 密码
MYSQL_ROOT_PASSWORD: root
# 初始化数据库(后续的初始化sql会在这个库执行)
MYSQL_DATABASE: nacos_config
# 初始化用户(不能是root 会报错, 后续需要给新用户赋予权限)
MYSQL_USER: nacos
# 用户密码
MYSQL_PASSWORD: nacos
# 映射端口
ports:
- 3306:3306
volumes:
# 数据挂载
#- /root/mysql/data/:/var/lib/mysql/
# 配置挂载
#- /root/mysql/conf/:/etc/mysql/conf.d/
# 初始化目录挂载，注意此处我只跑了这个挂载，只是为了说明其他配置不应该数据初始化
- /root/mysql/init/:/docker-entrypoint-initdb.d/
command:
# 将mysql8.0默认密码策略 修改为 原先 策略 (mysql8.0对其默认策略做了更改 会导致密码无法匹配)
--default-authentication-plugin=mysql_native_password
--character-set-server=utf8mb4
--collation-server=utf8mb4_general_ci
--explicit_defaults_for_timestamp=true
--lower_case_table_names=1
networks:
- proxy
server:
image: ghcr.io/USERNAME/server:master
container_name: server
ports:
- 8082:8082
expose:
- &amp;#34;8082&amp;#34;
depends_on:
- mysql5.7
restart: always
volumes:
- &amp;#39;./data:/data/&amp;#39;
networks:
- proxy
web:
image: ghcr.io/USERNAME/web:master
container_name: web
depends_on:
- server
restart: always
ports:
- 3000:3000
expose:
- &amp;#34;3000&amp;#34;
environment:
- VIRTUAL_HOST=example.com
- VIRTUAL_PORT=3000
- LETSENCRYPT_HOST=example.com
- LETSENCRYPT_EMAIL=mail@example.com
networks:
- proxy
networks:
proxy:
external:
name: nginx-proxy
&lt;/code>&lt;/pre>&lt;/div>&lt;/p>
&lt;/details>
&lt;details class="spoiler " id="spoiler-2">
&lt;summary>“点击展开nginx-proxy代码”&lt;/summary>
&lt;p>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">version: &amp;#39;3&amp;#39;
services:
nginx-proxy:
image: jwilder/nginx-proxy
container_name: nginx-proxy
ports:
- &amp;#34;80:80&amp;#34;
- &amp;#34;443:443&amp;#34;
volumes:
- conf:/etc/nginx/conf.d
- vhost:/etc/nginx/vhost.d
- html:/usr/share/nginx/html
- dhparam:/etc/nginx/dhparam
- certs:/etc/nginx/certs:ro
- /var/run/docker.sock:/tmp/docker.sock:ro
restart: always
networks:
- nginxproxy
labels:
- &amp;#34;com.github.jrcs.letsencrypt_nginx_proxy_companion.nginx_proxy&amp;#34;
letsencrypt:
image: jrcs/letsencrypt-nginx-proxy-companion
container_name: nginx-proxy-le
depends_on:
- nginx-proxy
volumes:
- vhost:/etc/nginx/vhost.d
- html:/usr/share/nginx/html
- dhparam:/etc/nginx/dhparam:ro
- certs:/etc/nginx/certs
- acme:/etc/acme.sh
- /var/run/docker.sock:/var/run/docker.sock:ro
&lt;span class="c">&amp;lt;!-- # 由于LETSENCRYPT证书速率限制，可使用ZeroSSL--&amp;gt;&lt;/span>
&lt;span class="c">&amp;lt;!-- # 注释掉web服务environment中的：--&amp;gt;&lt;/span>
&lt;span class="c">&amp;lt;!-- - LETSENCRYPT_HOST=example.com--&amp;gt;&lt;/span>
&lt;span class="c">&amp;lt;!-- - LETSENCRYPT_EMAIL=mail@example.com--&amp;gt;&lt;/span>
&lt;span class="c">&amp;lt;!-- # 需添加如下environment--&amp;gt;&lt;/span>
&lt;span class="c">&amp;lt;!-- environment:--&amp;gt;&lt;/span>
&lt;span class="c">&amp;lt;!-- - ACME_CA_URI=https://acme.zerossl.com/v2/DV90--&amp;gt;&lt;/span>
&lt;span class="c">&amp;lt;!-- - ZEROSSL_API_KEY=--&amp;gt;&lt;/span>
restart: always
networks:
- nginxproxy
volumes:
conf:
vhost:
html:
dhparam:
certs:
acme:
networks:
nginxproxy:
external:
name: nginx-proxy
&lt;/code>&lt;/pre>&lt;/div>&lt;/p>
&lt;/details>
&lt;h2 id="基础知识参考-1">基础知识参考&lt;/h2>
&lt;p>以下简介节选自&lt;a class="link" href="https://docs.docker.com/compose/" target="_blank" rel="noopener"
>docker compose文档&lt;/a>：&lt;/p>
&lt;ol>
&lt;li>Compose 中的&lt;strong>网络&lt;/strong>:&lt;/li>
&lt;/ol>
&lt;p>Compose默认为您的应用程序设置单个网络。服务中的每个容器都加入默认网络。例如，假设您的应用程序是在一个名为myapp的目录，运行docker-compose up时会创建一个名为myapp_default的网络，服务中使用web和db的配置创建的容器会以web和db的名字加入myapp_default。&lt;/p>
&lt;p>但是，当你使用&lt;a class="link" href="https://docs.docker.com/compose/compose-file/compose-file-v3/#external-1" target="_blank" rel="noopener"
>external&lt;/a>（外部网络，例如你有2个或多个docker-compose.yml）时，Compose不会创建默认网络，你必须使用&lt;code>docker network create Your_Nerwork&lt;/code>预先创建网络。&lt;/p>
&lt;h1 id="常用命令">常用命令&lt;/h1>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">Docker命令
docker run [可选参数] imagename #新建并启动容器
　　--name = &amp;#34;name&amp;#34; 容器取名
　　-it 交互模式进入容器
　　-d 后台启动容器 注意：一般后台启动要有前台的应用，否则很可能被守护程序杀掉
　　-p ip:主机端口:容器端口 #指定端口映射
查看：
docker search xxx #搜索dockerhub-镜像
docker images [-a][-q] #列出本地主机的-镜像
-a 显示所有信息
-q 显示所有id
docker ps [-a][-q] #显示当前正在运行的容器
　　-a 显示当前运行的容器，并显示历史运行过的容器
　　-q 只显示运行容器的编号
docker logs 容器id #日志
docker top 容器id #查看容器中进程信息
docker inspect 容器id #查看容器的详细信息
操作：
docker pull 镜像：版本号 #拉取-镜像
docker start 容器id #启动容器
docker restart 容器id #重启容器
docker stop 容器id #停止容器
docker kill 容器id #强制停止容器
docker rm 容器id #删除停止状态的容器
docker rm -f 容器id #强制删除容器
docker rmi -f xxx #删除单个-镜像
docker rmi -f $(docker images -aq) #删除所有-镜像
docker stop $(docker ps -a -q) #停止所有容器运行
docker rm $(docker ps -a -q) #删除所有容器
docker network rm $(docker network ls -q) #删除所有network
docker system prune --all --force --volumes #删除一切
exit 容器停止并退出
ctrl+p+q 容器不停止退出
docker exec -it mysql /bin/bash #进入正在执行的mysql容器
从容器拷贝内容到主机：
docker cp 容器id: 路径 主机目的路径 #此处不必进入容器，容器可以是关闭的。
&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">Docker-compose命令
docker-compose up -d # 在后台启动服务
docker-compose pull # 拉取
docker-compose -f docker-compose.yml up -d # 指定docker-compose.yml
docker-compose -f docker-compose.yml pull # 指定docker-compose.yml，后同
查看：
docker-compose ps # 查看正在运行中的容器
docker-compose ps -a # 查看所有编排容器，包括已停止的容器
docker-compose images # 列出Compose文件构建的镜像
docker-compose logs # 查看日志
docker-compose logs [serviceName] # 查看某服务的日志
docker-compose logs -f [serviceName] # 查看某服务的实时日志
操作：
docker-compose stop # 停止服务
docker-compose start # 启动已经存在的服务
docker-compose pause [serviceName] # 暂停服务
docker-compose unpause [serviceName] # 恢复服务
docker-compose restart [serviceName] # 重启服务
docker-compose rm # 删除所有（停止状态的）服务容器
docker-compose down # 删除所有容器
docker-compose down --remove-orphans # 删除orphans容器
docker-compose config -q # 验证（docker-compose.yml）文件配置，当配置正确时，不输出任何内容
docker-compose exec --index=1 [serviceName] sh # 进入某服务的第1个容器执行命令
docker-compose --help # 帮助
&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>常用命令</title><link>https://www.jiangdaoli.cf/p/ubuntu/</link><pubDate>Thu, 22 Jul 2021 00:00:00 +0000</pubDate><guid>https://www.jiangdaoli.cf/p/ubuntu/</guid><description>&lt;h1 id="git">git&lt;/h1>
&lt;h2 id="git命令">git命令&lt;/h2>
&lt;p>&lt;a class="link" href="https://training.github.com/downloads/zh_CN/github-git-cheat-sheet/" target="_blank" rel="noopener"
>官网git备忘表&lt;/a>比各种教程都易看&lt;/p>
&lt;h2 id="push脚本">push脚本&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">#!/bin/bash
echo -e &amp;#34;\033[0;32mDeploying updates to GitHub...\033[0m&amp;#34;
# Add changes to git.
git add .
# Commit changes.
msg=&amp;#34;rebuilding site `date`&amp;#34;
if [ $# -eq 1 ]
then msg=&amp;#34;$1&amp;#34;
fi
git commit -m &amp;#34;$msg&amp;#34;
# Push source and build repos.
git push origin master
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="公开仓库fork为私有仓库">公开仓库fork为私有仓库&lt;/h2>
&lt;ol>
&lt;li>fork一个公开仓库&lt;/li>
&lt;li>使用github&lt;a class="link" href="https://github.com/new/import" target="_blank" rel="noopener"
>导入功能&lt;/a>，写fork仓库的地址，并创建私有仓库&lt;/li>
&lt;li>本地操作&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">git clone git@github.com:&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">your_username&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>/&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">your_repo&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>.git #克隆到本地
git remote add upstream git@github.com:&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">original_owner&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>/&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">original_repo&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>.git #添加上游(源)仓库用于更新
git remote set-url --push upstream DISABLE #禁用推送到上游(源)仓库
&lt;/code>&lt;/pre>&lt;/div>&lt;ol start="4">
&lt;li>&lt;code>git remote -v&lt;/code>可以看到：&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">origin git@github.com:&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">your_username&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>/&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">your_repo&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>.git (fetch)
origin git@github.com:&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">your_username&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>/&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">your_repo&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>.git (push)
upstream git@github.com:&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">original_owner&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>/&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">original_repo&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>.git (fetch)
upstream DISABLE (push)
&lt;/code>&lt;/pre>&lt;/div>&lt;ol start="5">
&lt;li>拉取更新&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">git fetch upstream
git merge upstream/master
&lt;/code>&lt;/pre>&lt;/div>&lt;h1 id="linux命令">Linux命令&lt;/h1>
&lt;h2 id="文件">文件&lt;/h2>
&lt;p>i 键可以对文件进行修改， &lt;code>Esc + :+ wq&lt;/code> 退出并保存修改之后的文件&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">sudo gedit ~/File //编辑
touch File //新建文件
mkdir -p Folder/a/src //新建文件夹
sudo rm -r Folder //删除文件夹
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="安装包">安装包&lt;/h2>
&lt;ul>
&lt;li>apt&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">sudo apt update &lt;span class="err">&amp;amp;&amp;amp;&lt;/span> apt upgrade //更新
dpkg --list //显示所有软件
sudo apt-get install 包名 //安装
sudo apt-get remove 包名 //卸载不删除配置文件
sudo apt-get --purge remove 包名 //软件及其配置文件一并删除
&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>snap&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">sudo snap list //列出已经安装的snap包
sudo snap install &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">snap&lt;/span> &lt;span class="na">name&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> //安装一个snap包
sudo snap refresh &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">snap&lt;/span> &lt;span class="na">name&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> //更新一个snap包，如果后面不加包的名字更新所有的snap包
sudo snap remove &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">snap&lt;/span> &lt;span class="na">name&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> //删除一个snap包
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="端口">端口&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">sudo apt-get install lsof //安装lsof
lsof -i:80 //查看80端口
kill -9 pid //强制杀进程
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="脚本">脚本&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">local #用于声明局部变量
source
sed
systemctl stop service # 停止一个服务
systemctl daemon-reload # 重载所有修改过的配置文件
systemctl enable #将服务设置为每次开机启动
grep
&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">set -eux #用于脚本开头设置
#-e 　若指令传回值不等于0，则立即退出shell。0表示没有错误
#-u 　当执行时使用到未定义过的变量，则显示错误信息。
#-x 　执行指令后，会先显示该指令及所下的参数。
&lt;/code>&lt;/pre>&lt;/div>&lt;h1 id="编程语言备忘录">编程语言备忘录&lt;/h1>
&lt;h2 id="dart">dart&lt;/h2>
&lt;h3 id="变量">变量&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html"># 创建一个变量并将其初始化
var name = &amp;#39;Bob&amp;#39;;
# 指定类型
String name = &amp;#39;Bob&amp;#39;;
# 如果对象(name)不局限于单一的类型(String),可以将其指定为 Object（或 dynamic）类型
Object name = &amp;#39;Bob&amp;#39;;
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="常量">常量&lt;/h3>
&lt;ul>
&lt;li>final 和 const&lt;/li>
&lt;/ul>
&lt;p>final在被使用到的时候才会进行初始化, 如果只是被定义, 而没有被使用到, 那么这个变量一直没有被初始化 (&amp;lsquo;懒加载&amp;rsquo;); 而const修饰的变量, 一经定义就会在编译期间对其进行初始化&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">final name = &amp;#39;Bob&amp;#39;; // Without a type annotation
final String nickname = &amp;#39;Bobby&amp;#39;;
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="内置类型">内置类型&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">int 整数值
double 浮点数字
String 字符串
bool 布尔类型
List 集合类型
Set 无序集合
Map 字典型
&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html"># Set主要的功能就是去除数组重复内容
void main(){
List myList=[&amp;#39;香蕉&amp;#39;,&amp;#39;苹果&amp;#39;,&amp;#39;西瓜&amp;#39;,&amp;#39;香蕉&amp;#39;,&amp;#39;苹果&amp;#39;,&amp;#39;香蕉&amp;#39;,&amp;#39;苹果&amp;#39;];
var s=new Set();
s.addAll(myList);
print(s);
print(s.toList());
}
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="函数">函数&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">bool isNoble(int atomicNumber) { # bool:返回类型
return _nobleGases[atomicNumber] != null;
}
&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>箭头函数 =&amp;gt;&lt;/li>
&lt;/ul>
&lt;p>　&lt;code>=&amp;gt; expr&lt;/code> 是 &lt;code>{ return expr; }&lt;/code>的简写&lt;/p>
&lt;h3 id="运算符">运算符：&lt;/h3>
&lt;ul>
&lt;li>算术运算符&lt;/li>
&lt;/ul>
&lt;p>　&lt;code>+&lt;/code>(加)　　&lt;code>–&lt;/code>(减)　　&lt;code>-&lt;/code>(负)　　&lt;code>*&lt;/code>(乘)　　&lt;code>/&lt;/code>(除)　　&lt;code>~/&lt;/code>(取整)　　&lt;code>%&lt;/code>（取余）&lt;/p>
&lt;ul>
&lt;li>关系运算符&lt;/li>
&lt;/ul>
&lt;p>　&lt;code>==&lt;/code>　　&lt;code>！=&lt;/code>　　&lt;code>&amp;gt;&lt;/code>　　&lt;code>&amp;lt;&lt;/code>　　&lt;code>&amp;gt;=&lt;/code>　　&lt;code>&amp;lt;=&lt;/code>&lt;/p>
&lt;ul>
&lt;li>逻辑运算符&lt;/li>
&lt;/ul>
&lt;p>　&lt;code>!&lt;/code>(取反)　　&lt;code>&amp;amp;&amp;amp;&lt;/code>(与)　　&lt;code>||&lt;/code>(或)&lt;/p>
&lt;ul>
&lt;li>赋值运算符&lt;/li>
&lt;/ul>
&lt;p>　基础赋值运算符　　&lt;code>=&lt;/code>　　&lt;code>??=&lt;/code>(为 null 的变量赋值)&lt;/p>
&lt;p>　复合赋值运算符　　&lt;code>+=&lt;/code>　　&lt;code>-=&lt;/code>　　&lt;code>*=&lt;/code>　　&lt;code>/=&lt;/code>　　&lt;code>%=&lt;/code>　　&lt;code>~/=&lt;/code>&lt;/p>
&lt;ul>
&lt;li>其他运算符
　&lt;code>()&lt;/code>　　使用一个方法&lt;/li>
&lt;/ul>
&lt;p>　&lt;code>[]&lt;/code>　　访问 List&lt;/p>
&lt;p>　&lt;code>?[]&lt;/code>　　访问 List,左侧可以为null&lt;/p>
&lt;p>　&lt;code>.&lt;/code>　　访问成员&lt;/p>
&lt;p>　&lt;code>?.&lt;/code>　　访问成员,左侧可以为null&lt;/p>
&lt;ul>
&lt;li>
&lt;p>if-else的表达式：&lt;/p>
&lt;ul>
&lt;li>condition &lt;code>?&lt;/code> expr1 &lt;code>:&lt;/code> expr2&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>　如果条件为真，则计算expr1（并返回其值）；否则，计算并返回expr2的值。&lt;/p>
&lt;ul>
&lt;li>expr1 &lt;code>??&lt;/code> expr2&lt;/li>
&lt;/ul>
&lt;p>　如果expr1不为 null，则返回其值；否则，计算并返回expr2的值。&lt;/p>
&lt;h3 id="类">类&lt;/h3>
&lt;ul>
&lt;li>抽象类、抽象方法
　抽象类常用于定义接口，抽象类常常会包含抽象方法&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">abstract class Doer {
// Define instance variables and methods...
void doSomething(); // Define an abstract method.
}
class EffectiveDoer extends Doer {
void doSomething() {
// Provide an implementation, so the method is not abstract here...
}
}
&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="泛型">泛型&lt;/h3>
&lt;p>泛型常用于需要要求类型安全的情况，可以减少代码重复。
&lt;figure
class="gallery-image"
style="
flex-grow: 249;
flex-basis: 599px"
>
&lt;a href="https://www.jiangdaoli.cf/p/ubuntu/fanxing.jpg" data-size="1122x449">
&lt;img src="https://www.jiangdaoli.cf/p/ubuntu/fanxing.jpg"
width="1122"
height="449"
srcset="https://www.jiangdaoli.cf/p/ubuntu/fanxing_hu6d02cad28d2736a6e42659b75fd941e7_62001_480x0_resize_q75_box.jpg 480w, https://www.jiangdaoli.cf/p/ubuntu/fanxing_hu6d02cad28d2736a6e42659b75fd941e7_62001_1024x0_resize_q75_box.jpg 1024w"
loading="lazy"
>
&lt;/a>
&lt;/figure>&lt;/p>
&lt;p>@override 注解来表示你重写了一个成员
&lt;figure
class="gallery-image"
style="
flex-grow: 177;
flex-basis: 427px"
>
&lt;a href="https://www.jiangdaoli.cf/p/ubuntu/override.jpg" data-size="1173x659">
&lt;img src="https://www.jiangdaoli.cf/p/ubuntu/override.jpg"
width="1173"
height="659"
srcset="https://www.jiangdaoli.cf/p/ubuntu/override_huf3ae0c28a53250be072483b49c760168_125842_480x0_resize_q75_box.jpg 480w, https://www.jiangdaoli.cf/p/ubuntu/override_huf3ae0c28a53250be072483b49c760168_125842_1024x0_resize_q75_box.jpg 1024w"
loading="lazy"
>
&lt;/a>
&lt;/figure>&lt;/p>
&lt;h2 id="shell">shell&lt;/h2>
&lt;p>&lt;a class="link" href="http://www.imooc.com/wiki/shelllesson/shellvariable.html" target="_blank" rel="noopener"
>原文地址&lt;/a>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">name=&amp;#34;MyName&amp;#34; //定义变量
echo $name 或 echo ${name} //使用变量
&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">val=`expr 2 + 2` #expr 是一款表达式计算工具，使用它能完成表达式的求值操作。
echo &amp;#34;Total value : $val&amp;#34;
&lt;/code>&lt;/pre>&lt;/div>&lt;table>
&lt;thead>
&lt;tr>
&lt;th>特殊变量&lt;/th>
&lt;th>含义&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>$0&lt;/td>
&lt;td>当前脚本的文件名&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>$n&lt;/td>
&lt;td>传递给脚本或函数的参数。n 是一个数字，表示第几个参数。例如，第一个参数是$1，第二个参数是$2&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>$#&lt;/td>
&lt;td>传递给脚本或函数的参数个数总和&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>$*&lt;/td>
&lt;td>传递给脚本或函数的所有参数，当被双引号 &amp;quot; &amp;quot; 包含时，所有的位置参数被看做一个字符串&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>$@&lt;/td>
&lt;td>传递给脚本或函数的所有参数，当被双引号 &amp;quot; &amp;quot; 包含时，每个位置参数被看做独立的字符串&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>$?&lt;/td>
&lt;td>上个命令的退出状态，或函数的返回值&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>$$&lt;/td>
&lt;td>当前 Shell 进程 ID。对于 Shell 脚本，就是这些脚本所在的进程 ID。&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>测试符&lt;/th>
&lt;th>描述&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>-eq，equal&lt;/td>
&lt;td>等于&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>-ne，not equal&lt;/td>
&lt;td>不等于&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>-gt，greater than&lt;/td>
&lt;td>大于&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>-lt，lesser than&lt;/td>
&lt;td>小于&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>-ge，greater or equal&lt;/td>
&lt;td>大于或等于&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>-le，lesser or equal&lt;/td>
&lt;td>小于或等于&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>-z&lt;/td>
&lt;td>检测字符串长度是否为 0，为 0 返回 true。&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>-e&lt;/td>
&lt;td>file 检测文件（包括目录）是否存在，如果是，则返回 true。&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>-f&lt;/td>
&lt;td>file 检测文件是否是普通文件（既不是目录，也不是设备文件），如果是，则返回 true。&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>待续&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted --></description></item><item><title>环境配置和软件</title><link>https://www.jiangdaoli.cf/p/config/</link><pubDate>Sun, 18 Jul 2021 00:00:00 +0000</pubDate><guid>https://www.jiangdaoli.cf/p/config/</guid><description>&lt;h1 id="部分电脑配置记录">部分电脑配置记录&lt;/h1>
&lt;h2 id="win10-config">win10 config&lt;/h2>
&lt;ul>
&lt;li>git&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">git config --global http.https://www.github.com.proxy socks5://127.0.0.1:port.socks
git config --global https.https://www.github.com.proxy socks5://127.0.0.1:port.socks
&lt;/code>&lt;/pre>&lt;/div>&lt;p>文件路径：&lt;code>C:\Users\90487\.gitconfig&lt;/code>，90487是我的用户名&lt;/p>
&lt;ul>
&lt;li>Terminal（临时使用）&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">set http_proxy=http://127.0.0.1:port.http #临时命令行代理
set https_proxy=http://127.0.0.1:port.http #临时命令行代理
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="vm-ubuntu-config">VM Ubuntu config&lt;/h2>
&lt;ul>
&lt;li>
&lt;p>代理&lt;br>
Windows中使用&lt;code>ipconfig&lt;/code>查看&lt;code>VMware Network Adapter VMnet8&lt;/code>的ip地址，ubuntu中进入“设置”-“网络”-“proxy”，在&lt;code>Socks Host&lt;/code>里写入之前查到的&lt;strong>ip&lt;/strong>地址&lt;/p>
&lt;/li>
&lt;li>
&lt;p>git config&lt;/p>
&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">git config --global user.name &amp;#34;John Doe&amp;#34; #配置github账号用户名
git config --global user.email johndoe@example.com #配置邮箱
&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>git ssh 代理&lt;/li>
&lt;/ul>
&lt;p>创建~/.ssh/config 文件：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">Host github.com
User git
ProxyCommand nc -v -x ip:port.socks %h %p #写自己ip
&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>
&lt;p>终端代理（临时使用）&lt;/p>
&lt;ul>
&lt;li>
&lt;p>方法一：直接在命令前加proxychains&lt;/p>
&lt;/li>
&lt;li>
&lt;p>方法二：直接在.bashrc最后加入：&lt;/p>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">export http_proxy=&amp;#34;http://ip:port.http&amp;#34; #写自己ip
export https_proxy=&amp;#34;http://ip:port.http&amp;#34; #写自己ip
&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">source ~/.bashrc #使配置生效
&lt;/code>&lt;/pre>&lt;/div>&lt;h1 id="ubuntu安装go">Ubuntu安装go&lt;/h1>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">sudo apt install snap #安装snap，使用snap更易安装、更新
&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">sudo snap install go --classic #安装go
&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">sudo vim /etc/profile #编辑profile
&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">export GOROOT=/snap/go #在最后一行添加
export PATH=$PATH:$GOROOT/bin
&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">source /etc/profile #保存
go version #验证
&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">export GO111MODULE=on
export GOPROXY=https://goproxy.cn #设置 go get 为国内源（无代理）
&lt;/code>&lt;/pre>&lt;/div>&lt;h1 id="goland">Goland&lt;/h1>
&lt;h2 id="使用">使用&lt;/h2>
&lt;p>goland无限试用，方法适用&lt;strong>IDEA系列&lt;/strong>&lt;/p>
&lt;ol>
&lt;li>goland中添加第三方插件仓库地址：https://plugins.zhile.io&lt;/li>
&lt;li>安装插件：IDE Eval Reset&lt;/li>
&lt;li>&lt;a class="link" href="https://plugins.zhile.io/files/ide-eval-resetter-2.1.14-d2fedb86.zip" target="_blank" rel="noopener"
>下载&lt;/a>&lt;/li>
&lt;li>直接把zip包拖进IDE的窗口来进行插件的安装&lt;/li>
&lt;li>Help -&amp;gt; Eval Reset 勾选Auto reset before per restart&lt;/li>
&lt;/ol>
&lt;p>&lt;a class="link" href="https://zhile.io/2020/11/18/jetbrains-eval-reset-da33a93d.html" target="_blank" rel="noopener"
>原文地址&lt;/a>，本段仅进行简述，使操作简明&lt;/p>
&lt;h2 id="不能输入中文ubuntu">不能输入中文（Ubuntu）&lt;/h2>
&lt;p>在goland.sh注释之后的首行添加&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">export XMODIFIERS=&amp;#34;@im=ibus&amp;#34;
export GTK_IM_MODULE=&amp;#34;ibus&amp;#34;
export QT_IM_MODULE=&amp;#34;ibus&amp;#34;
&lt;/code>&lt;/pre>&lt;/div>&lt;p>goland.vmoptions添加&lt;code>-Drecreate.x11.input.method=true&lt;/code>&lt;/p>
&lt;h1 id="flutter">flutter&lt;/h1>
&lt;h2 id="安装">安装&lt;/h2>
&lt;ol>
&lt;li>
&lt;p>配置 JDK、安装配置Android Studio&lt;/p>
&lt;/li>
&lt;li>
&lt;p>flutter(windows)
&lt;a class="link" href="https://docs.flutter.dev/get-started/install/windows" target="_blank" rel="noopener"
>flutter安装&lt;/a>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">set PUB_HOSTED_URL=&amp;#34;https://mirrors.tuna.tsinghua.edu.cn/dart-pub&amp;#34; #配置国内镜像
set FLUTTER_STORAGE_BASE_URL=&amp;#34;https://mirrors.tuna.tsinghua.edu.cn/flutter&amp;#34;
&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>安装遇坑&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">//配置build.gradle(project:android)
allprojects {
repositories {
google()
jcenter()
maven { url &amp;#34;https://storage.googleapis.com/download.flutter.io&amp;#34; }
}
}
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="创建-flutter-项目">创建 Flutter 项目&lt;/h2>
&lt;p>&lt;figure
class="gallery-image"
style="
flex-grow: 57;
flex-basis: 136px"
>
&lt;a href="https://www.jiangdaoli.cf/p/config/1.jpg" data-size="1325x2324">
&lt;img src="https://www.jiangdaoli.cf/p/config/1.jpg"
width="1325"
height="2324"
srcset="https://www.jiangdaoli.cf/p/config/1_hu5d1e27dd8cae3be82a376e550243ba5f_300346_480x0_resize_q75_box.jpg 480w, https://www.jiangdaoli.cf/p/config/1_hu5d1e27dd8cae3be82a376e550243ba5f_300346_1024x0_resize_q75_box.jpg 1024w"
loading="lazy"
>
&lt;/a>
&lt;/figure>&lt;/p>
&lt;p>&lt;figure
class="gallery-image"
style="
flex-grow: 167;
flex-basis: 401px"
>
&lt;a href="https://www.jiangdaoli.cf/p/config/2.jpg" data-size="1255x751">
&lt;img src="https://www.jiangdaoli.cf/p/config/2.jpg"
width="1255"
height="751"
srcset="https://www.jiangdaoli.cf/p/config/2_hu81fa969734d5dd4a557c1b7b09aa2597_119603_480x0_resize_q75_box.jpg 480w, https://www.jiangdaoli.cf/p/config/2_hu81fa969734d5dd4a557c1b7b09aa2597_119603_1024x0_resize_q75_box.jpg 1024w"
loading="lazy"
>
&lt;/a>
&lt;/figure>&lt;/p>
&lt;p>&lt;figure
class="gallery-image"
style="
flex-grow: 188;
flex-basis: 452px"
>
&lt;a href="https://www.jiangdaoli.cf/p/config/3.jpg" data-size="1745x926">
&lt;img src="https://www.jiangdaoli.cf/p/config/3.jpg"
width="1745"
height="926"
srcset="https://www.jiangdaoli.cf/p/config/3_huf55ceb339b2d0f0aaf2ecaa8582e484a_222184_480x0_resize_q75_box.jpg 480w, https://www.jiangdaoli.cf/p/config/3_huf55ceb339b2d0f0aaf2ecaa8582e484a_222184_1024x0_resize_q75_box.jpg 1024w"
loading="lazy"
>
&lt;/a>
&lt;/figure>&lt;/p>
&lt;p>&lt;figure
class="gallery-image"
style="
flex-grow: 167;
flex-basis: 402px"
>
&lt;a href="https://www.jiangdaoli.cf/p/config/4.jpg" data-size="1877x1120">
&lt;img src="https://www.jiangdaoli.cf/p/config/4.jpg"
width="1877"
height="1120"
srcset="https://www.jiangdaoli.cf/p/config/4_hu51785015fe51b68ebcd4023b90b5069d_254474_480x0_resize_q75_box.jpg 480w, https://www.jiangdaoli.cf/p/config/4_hu51785015fe51b68ebcd4023b90b5069d_254474_1024x0_resize_q75_box.jpg 1024w"
loading="lazy"
>
&lt;/a>
&lt;/figure>&lt;/p>
&lt;h1 id="自用软件">自用软件&lt;/h1>
&lt;p>本文软件均为自用，本人无意推广任何软件，所以下载地址请自行查找，一般在google可找到官方，或者在52论坛搜搜看&lt;/p>
&lt;h2 id="win10优雅必备">win10优雅必备&lt;/h2>
&lt;ul>
&lt;li>
&lt;p>Wallpaper Engine　　　　　　#壁纸，steam购买&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Everything + uTools　　　　#文件快捷搜索及工具&lt;/p>
&lt;/li>
&lt;li>
&lt;p>quicker　　　　　　　　　　 #鼠标便捷操作神器&lt;/p>
&lt;/li>
&lt;li>
&lt;p>DeskGo　　　　　　　　　　#腾讯出品的桌面软件格子&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Geek Uninstaller　　　　　　#卸载无残留&lt;/p>
&lt;/li>
&lt;li>
&lt;p>clover　　　　　　　　　　　#资源管理器多标签页&lt;/p>
&lt;/li>
&lt;li>
&lt;p>火绒　　　　　　　　　　　　#屏蔽弹窗&lt;/p>
&lt;/li>
&lt;li>
&lt;p>typora　　　　　　　　　　　#markdown记事本，据说notion在线笔记，我把博客当作在线笔记了&lt;/p>
&lt;/li>
&lt;li>
&lt;p>win10 microsoft store工具&lt;/p>
&lt;ul>
&lt;li>Windows Terminal　　　　　#命令行&lt;/li>
&lt;li>TranslucentTB　　　　　　　#任务栏透明&lt;/li>
&lt;li>EarTrumpet　　　　　　　　#音频管理&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="安卓app">安卓app&lt;/h2>
&lt;ul>
&lt;li>
&lt;p>浏览器：Chrome、Kiwi、Via&lt;/p>
&lt;/li>
&lt;li>
&lt;p>影视：zd01.tv下载 + AdGuard　　# AdGuard设置复杂请自行研究，去除视频开头广告可在日志中找到广告，把这几个广告网站地址添加到自定义过滤&lt;/p>
&lt;/li>
&lt;li>
&lt;p>音乐：listen1　　　　　　　　# 并不完美，希望找到更好用的&lt;/p>
&lt;/li>
&lt;li>
&lt;p>小说：笔趣阁　　　　　　　　# 52论坛蓝底app&lt;/p>
&lt;/li>
&lt;li>
&lt;p>阅读：福昕PDF阅读器、ReadEra&lt;/p>
&lt;/li>
&lt;li>
&lt;p>去除启动广告：启动加速　　　#有后台权限更好用&lt;/p>
&lt;/li>
&lt;li>
&lt;p>手机控制&lt;/p>
&lt;ul>
&lt;li>MacroDroid、hamibot　　　#手机自动化，使用见后文&lt;/li>
&lt;li>Moonlight　　　　　　　　#局域网流畅投屏&lt;/li>
&lt;li>AirDroid和AirMirror　　　#手机远程控制手机&lt;/li>
&lt;li>向日葵远程控制&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>其他&lt;/p>
&lt;ul>
&lt;li>zarchiver　　　　　　　#文件管理和解压&lt;/li>
&lt;li>星空视频壁纸&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul></description></item><item><title>投资记录</title><link>https://www.jiangdaoli.cf/p/investment/</link><pubDate>Tue, 13 Jul 2021 00:00:00 +0000</pubDate><guid>https://www.jiangdaoli.cf/p/investment/</guid><description>&lt;h1 id="前言">前言&lt;/h1>
&lt;p>本文仅为个人投资记录，不构成投资建议，A股人均韭菜请谨慎&lt;/p>
&lt;h2 id="本人买入">本人买入&lt;/h2>
&lt;ul>
&lt;li>
&lt;p>国恩股份：发文时(2021-07-13)收盘价24.38&lt;/p>
&lt;ul>
&lt;li>可降解塑料概念，同类中估值较低&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>上海银行：发文时(2021-09-03)收盘价7.41&lt;/p>
&lt;ul>
&lt;li>感觉被低估&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h2 id="观察中">观察中&lt;/h2>
&lt;ul>
&lt;li>
&lt;p>微芯生物&lt;/p>
&lt;/li>
&lt;li>
&lt;p>托斯达&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h1 id="历史">历史&lt;/h1>
&lt;p>买入上海银行：(2021-09-03)收盘价7.41&lt;/p>
&lt;p>卖出渝农商行：(2021-09-03)收盘价3.96，无盈亏&lt;/p>
&lt;p>买入国恩股份：(2021-07-13)收盘价24.38&lt;/p>
&lt;p>买入渝农商行：(2021-07-13)收盘价3.94&lt;/p></description></item><item><title>hugo使用stack主题搭建博客及部署</title><link>https://www.jiangdaoli.cf/p/hugo-blog/</link><pubDate>Sat, 03 Jul 2021 00:00:00 +0000</pubDate><guid>https://www.jiangdaoli.cf/p/hugo-blog/</guid><description>&lt;h1 id="准备">准备&lt;/h1>
&lt;p>1.Ubuntu&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">sudo apt update #更新
&lt;/code>&lt;/pre>&lt;/div>&lt;p>2.github账号&lt;/p>
&lt;p>3.git配置&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">git config --global user.name &amp;#34;John Doe&amp;#34; #配置github账号用户名
git config --global user.email johndoe@example.com #配置邮箱
&lt;/code>&lt;/pre>&lt;/div>&lt;p>4.连接github&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">ssh-keygen -t ed25519 -C &amp;#34;your_email@example.com&amp;#34; #生成SSH Keys 此为新版
ssh-keygen -t rsa -b 4096 -C &amp;#34;your_email@example.com&amp;#34; #此为常用版
&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">cat ~/.ssh/id_ed25519.pub #复制
&lt;/code>&lt;/pre>&lt;/div>&lt;p>点击github右上角头像-&amp;gt; Settings -&amp;gt; SSH and GPG Keys -&amp;gt; New SSH key添加&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">ssh -T git@github.com #验证连接，输入yes
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;a class="link" href="https://docs.github.com/cn/github/authenticating-to-github/connecting-to-github-with-ssh/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent" target="_blank" rel="noopener"
>官方文档&lt;/a>&lt;/p>
&lt;p>5.git ssh 代理设置&lt;/p>
&lt;p>非必要步骤，如果有一天ssh push网速极慢但https push正常，可尝试此操作&lt;/p>
&lt;p>创建~/.ssh/config 文件：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">Host github.com
User git
ProxyCommand nc -v -x 127.0.0.1:10808 %h %p #请修改127.0.0.1:10808
&lt;/code>&lt;/pre>&lt;/div>&lt;h1 id="安装">安装&lt;/h1>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">snap install hugo --channel=extended #安装hugo
&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">hugo version #验证
&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">hugo new site myblog #创建博客
&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">git init #初始化
&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">git remote add origin git@github.com:**** #连接远程仓库
&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">git clone https://github.com/CaiJimmy/hugo-theme-stack/ #安装stack主题
&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">rm config.toml &lt;span class="err">&amp;amp;&amp;amp;&lt;/span> cp themes/hugo-theme-stack/exampleSite/config.yaml . #使用主题的配置文件
&lt;/code>&lt;/pre>&lt;/div>&lt;p>把myblog/themes/hugo-theme-stack/exampleSite/content内容移到myblog/content使用主题示例文章&lt;/p>
&lt;p>本地预览：
myblog下执行&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">hugo server
&lt;/code>&lt;/pre>&lt;/div>&lt;p>浏览器打开：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">http://localhost:1313/ #目前本地运行不显示文章目录，估计是操作系统原因
&lt;/code>&lt;/pre>&lt;/div>&lt;h1 id="部署">部署&lt;/h1>
&lt;p>注：我将介绍使用github托管源码自动化部署，如果您仅在本地存放源码，提交public文件夹即可，无需使用下列方法。&lt;/p>
&lt;p>1.虽然博客内容全都能看到，但我们可能不太希望公开源码，不开放源码使用github pages需要创建2个仓库:
创建 username.github.io.source 仓库存放源码可设为私人仓库，创建 username.github.io 仓库作为公开仓库&lt;/p>
&lt;p>点击github右上角头像-&amp;gt; Settings -&amp;gt; Developer Settings-&amp;gt; Personal access tokens -&amp;gt; Generate new token （Note随意，Select scopes全选,复制token，我们这里使用Personal tokens比Deploy keys更方便）&lt;/p>
&lt;p>找到源码仓库Settings-&amp;gt; Secrets -&amp;gt; New repository secret （Name写PERSONAL_TOKEN，Value粘贴token）&lt;/p>
&lt;p>2.创建github actions的workflows自动部署文件：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">mkdir -p .github/workflows &lt;span class="err">&amp;amp;&amp;amp;&lt;/span> touch ~/myblog/.github/workflows/main.yml
&lt;/code>&lt;/pre>&lt;/div>&lt;p>粘贴脚本：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">name: github pages
on:
push:
branches:
- master
jobs:
deploy:
runs-on: ubuntu-latest #可使用指定版本，例：runs-on: ubuntu-18.04
steps:
- uses: actions/checkout@v2
with:
submodules: true # Fetch Hugo themes (true OR recursive)
fetch-depth: 0 # Fetch all history for .GitInfo and .Lastmod
- name: Setup Hugo
uses: peaceiris/actions-hugo@v2
with:
hugo-version: latest #可使用指定版本，例：hugo-version: &amp;#39;0.83.1&amp;#39;
extended: true
- name: Build
run: hugo --gc --forceSyncStatic --minify --cleanDestinationDir
- name: Deploy
uses: peaceiris/actions-gh-pages@v3
with:
personal_token: ${{ secrets.PERSONAL_TOKEN }} # PERSONAL_TOKEN是源码仓库secrets的name
external_repository: username/username.github.io # Pages 远程仓库
publish_branch: master # 部署的分支
publish_dir: ./public
commit_message: ${{ github.event.head_commit.message }}
#cname: www.example.com # 使用自定义域名
&lt;/code>&lt;/pre>&lt;/div>&lt;p>只需更改external_repository: username/username.github.io 为你的github账户名，&lt;a class="link" href="https://github.com/marketplace/actions/github-pages-action" target="_blank" rel="noopener"
>脚本详情&lt;/a>&lt;/p>
&lt;p>3.在myblog文件夹下创建push.sh&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">touch push.sh
&lt;/code>&lt;/pre>&lt;/div>&lt;p>粘贴脚本：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">#!/bin/bash
echo -e &amp;#34;\033[0;32mDeploying updates to GitHub...\033[0m&amp;#34;
# Add changes to git.
git add .
# Commit changes.
msg=&amp;#34;rebuilding site `date`&amp;#34;
if [ $# -eq 1 ]
then msg=&amp;#34;$1&amp;#34;
fi
git commit -m &amp;#34;$msg&amp;#34;
# Push source and build repos.
git push origin master
&lt;/code>&lt;/pre>&lt;/div>&lt;p>在myblog下运行 sh push.sh命令&lt;/p>
&lt;p>到此已完成部署，之后任何更新如上运行push脚本即可&lt;/p>
&lt;h1 id="修改主题">修改主题&lt;/h1>
&lt;p>此处仅列举常见需修改内容，更多内容请看&lt;a class="link" href="https://docs.stack.jimmycai.com/v/zh-cn/configuration" target="_blank" rel="noopener"
>stack主题文档&lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="https://github.com/rmdhnreza/rmdhnreza.my.id" target="_blank" rel="noopener"
>本博客修改样式来自rmdhnreza&lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="https://yinhe.co/archives/20210401_hugo_theme_stack.html" target="_blank" rel="noopener"
>更多定制文章可以参考这里&lt;/a>&lt;/p>
&lt;h2 id="主题配置">主题配置&lt;/h2>
&lt;p>1.修改~/myblog/config.yaml&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">1 baseurl: https://username.github.io #改为自己的
2 languageCode: zh-CN #中文编码
5 title: Example Site #博客名字
15 DefaultContentLanguage: zh-cn #中文
29 since: 2021
33 published: 2006-01-02 #日期格式
34 lastUpdated: 2006-01-02 #更新日期格式
37 emoji: 🍥 #头像角标
41 src: img/avatar.png #头像，myblog/themes/hugo-theme-stack/assets/img
135 name: &amp;#39;首页&amp;#39; #改中文左侧菜单home
155 startLevel: 1 #从文章1级标题使用文章目录
&lt;/code>&lt;/pre>&lt;/div>&lt;p>2.左侧菜单栏
~/myblog/content/page用于左侧菜单，请自定义&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">2 title: &amp;#39;关于&amp;#39; #中文左侧菜单about，后同
&lt;/code>&lt;/pre>&lt;/div>&lt;p>3.覆盖主题样式&lt;/p>
&lt;p>我使用了rmdhnreza(&lt;a class="link" href="https://github.com/rmdhnreza/rmdhnreza.my.id" target="_blank" rel="noopener"
>https://github.com/rmdhnreza/rmdhnreza.my.id&lt;/a>)修改的样式，直接在~/myblog下复制他的assets、layouts文件夹&lt;/p>
&lt;p>另外修改：&lt;/p>
&lt;ul>
&lt;li>
&lt;p>~/myblog/assets/scss/variables.scss&lt;/p>
&lt;ul>
&lt;li>link-background-color: 0, 255, 255 链接背景颜色&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>注：浏览器可能缓存样式，可使用无痕模式&lt;/p>
&lt;h2 id="创建文章">创建文章&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">hugo new post/文件夹名/index.md #创建文章
&lt;/code>&lt;/pre>&lt;/div>&lt;p>写文章：&lt;/p>
&lt;p>1.front matter:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">---
title: hugo使用stack主题搭建博客及部署 #标题
description: 搜索了搭建博客教程，仍花费我几天时间，本文旨在更全面简洁 #副标题
date: 2021-07-04 #日期
lastmod: 2021-07-27 #上次修改内容的日期
slug: hugo-blog #URL的尾部，用于文章地址
categories: #文章分类
- blog
---
&lt;/code>&lt;/pre>&lt;/div>&lt;p>front matter仅列举本文使用，&lt;a class="link" href="https://gohugo.io/content-management/front-matter#readout" target="_blank" rel="noopener"
>hugo front matter官方文档&lt;/a>&lt;/p>
&lt;p>2.常见文章markdown语法：&lt;/p>
&lt;ul>
&lt;li>
&lt;p>&lt;code># 一级标题&lt;/code>&lt;br>
&lt;code>## 二级标题&lt;/code>&lt;br>
&lt;code>### 三级标题&lt;/code>&lt;br>
&lt;code>#### 四级标题&lt;/code>&lt;br>
&lt;code>##### 五级标题&lt;/code>&lt;br>
&lt;code>###### 六级标题&lt;/code>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>`单行代码` &lt;/code>&lt;br>
&lt;code>``&lt;/code> &lt;code>有`需用双反引号&lt;/code> &lt;code>``&lt;/code>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>```html&lt;/code>&lt;br>
&lt;code>多行代码&lt;/code>&lt;br>
&lt;code>```&lt;/code>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>[链接](https://)&lt;/code>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>\&lt;/code> 写在特殊符号前为转义；写在行尾为换行\&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>*斜体*&lt;/code>&lt;br>
&lt;code>**加粗**&lt;/code>&lt;br>
&lt;code>~~删除线~~&lt;/code>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>* 无序列表&lt;/code>&lt;br>
&lt;code>双空格* 子无序列表&lt;/code>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;code>![图片描述](本地图片.jpg)&lt;/code>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>表格&lt;/p>
&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">| Italics | Bold | Code |
| -------- | -------- | ------ |
| *italics* | **bold** | `code` |
&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>{{&amp;lt; spoiler text=&amp;ldquo;点击展开和折叠代码&amp;rdquo; &amp;gt;}}&lt;br>
```html&lt;br>
code&lt;br>
```&lt;br>
{{&amp;lt; /spoiler &amp;gt;}}&lt;/li>
&lt;/ul>
&lt;h2 id="评论系统">评论系统&lt;/h2>
&lt;p>&lt;a class="link" href="https://waline.js.org/en/guide/get-started.html#leancloud-settings-database" target="_blank" rel="noopener"
>waline官方文档&lt;/a>写得非常清楚，您只需 LeanCloud设置 和 部署到Vercel ，拿到URL&lt;/p>
&lt;p>然后修改~/myblog/config.yaml&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">52 provider: waline #评论系统，本文示例使用waline
73 serverURL: https:// #评论系统URL用你自己的
&lt;/code>&lt;/pre>&lt;/div>&lt;p>执行sh push.sh即可&lt;/p>
&lt;h2 id="自定义域名">自定义域名&lt;/h2>
&lt;p>在~/myblog/config.yaml修改baseurl: &lt;code>https://username.github.io&lt;/code>&lt;/p>
&lt;p>在~/myblog/.github/workflows/main.yml最后一行取消注释并修改&lt;code>cname: www.example.com&lt;/code>&lt;/p>
&lt;p>执行sh push.sh即可&lt;/p>
&lt;p>启用https：&lt;a class="link" href="https://last2win.com/2020/02/21/github-pages-https/" target="_blank" rel="noopener"
>参考链接&lt;/a>&lt;/p>
&lt;p>没有域名？为了白嫖可在freenom和cloudflare进行申请域名和解析，这可能花费一些时间，如对此没有了解建议暂时跳过自定义域名。&lt;/p>
&lt;p>&lt;a class="link" href="URL" >freenom脚本自动续期参考后续文章&lt;/a>&lt;/p></description></item></channel></rss>